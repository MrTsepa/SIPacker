{"version":3,"sources":["routes/Pack/styles.module.scss","routes/Pack/PackToolbar/styles.module.scss","components/ItemsList/styles.module.scss","components/EditingToolbar/styles.module.scss","routes/Pack/Settings/styles.module.scss","components/Navigation/styles.module.scss","routes/NewPack/styles.module.scss","components/FileStorage/styles.module.scss","routes/Pack/Rounds/styles.module.scss","components/ItemsList/Item/styles.module.scss","components/FormikField/styles.module.scss","components/NotFound404/styles.module.scss","components/Container/styles.module.scss","routes/Dashboard/styles.module.scss","routes/Pack/Question/QuestionContent/styles.module.scss","routes/Pack/Rounds/CheckList/styles.module.scss","consts.js","localStorage/indexeddb.js","localStorage/localPacks.js","localStorage/fileStorage/hashFile.js","localStorage/fileStorage/saveFile.js","localStorage/fileStorage/index.js","reducers/fileRendering.js","reducers/index.js","reducers/packReducer.js","reducers/dashboardReducer.js","reducers/menuReducer.js","utils.js","localStorage/packGenerator.js","routes/Dashboard/packTypes/Upload.js","components/ContextMenu/index.js","components/ConfirmationDialog/index.js","components/ConfirmationDialog/DeleteConfirmationDialog.js","components/RenameDialog/index.js","routes/Dashboard/packTypes/Pack.js","routes/Dashboard/packTypes/index.js","routes/Dashboard/index.js","components/Navigation/index.js","routes/NewPack/index.js","routes/Pack/PackBreadcrumbs.js","routes/Pack/PackToolbar/SavingDialog.js","routes/Pack/PackToolbar/index.js","components/ItemsList/Item/index.js","components/ItemsList/Handle.js","routes/Pack/Rounds/List/Round.js","components/ItemsList/AddItem/index.js","components/ItemsList/index.js","components/EditingToolbar/index.js","routes/Pack/Rounds/List/index.js","routes/Pack/Rounds/CheckList/index.js","routes/Pack/Rounds/index.js","components/FileStorage/Filters.js","components/FileStorage/File.js","components/FileStorage/List.js","components/FileStorage/Upload.js","components/FileStorage/index.js","components/ImageField/index.js","components/FormikField/index.js","routes/Pack/Settings/index.js","components/NotFound404/index.js","routes/Pack/RoundThemes/RoundTable.js","routes/Pack/RoundThemes/Questions.js","components/ClickIsolator.js","routes/Pack/RoundThemes/Theme.js","routes/Pack/RoundThemes/ThemesEditing.js","routes/Pack/RoundThemes/index.js","routes/Pack/Question/QuestionContent/hints.js","routes/Pack/Question/QuestionContent/WithHint.js","routes/Pack/Question/QuestionContent/FormFields.js","routes/Pack/Question/QuestionContent/ScenarioEvent.js","routes/Pack/Question/QuestionContent/Scenario.js","routes/Pack/Question/QuestionContent/index.js","routes/Pack/Question/index.js","routes/Pack/index.js","components/Container/index.js","App.js","index.js","routes/Pack/RoundThemes/styles.module.scss","routes/Pack/Rounds/List/styles.module.scss","components/ImageField/styles.module.scss","components/ItemsList/AddItem/styles.module.scss"],"names":["module","exports","format","PropTypes","shape","uuid","string","name","creationTime","number","date","thumbnail","formatDefaults","contentTypes","xmlJS","js2xml","_declaration","_attributes","version","encoding","Types","xmlns","Default","Extension","ContentType","compact","uuidRegex","init","db","Dexie","stores","packs","join","files","loadLocalPack","packUUID","a","get","pack","loadLocalPacks","toArray","saveLocalPack","put","deleteLocalPack","delete","hashFile","file","Promise","resolve","reject","blobSlice","File","prototype","slice","mozSlice","webkitSlice","chunkSize","chunks","Math","ceil","size","spark","SparkMD5","ArrayBuffer","fileReader","FileReader","currentChunk","onload","e","append","target","result","loadNext","end","onerror","start","readAsArrayBuffer","call","mimeTypes","image","audio","video","allowedFileTypes","saveFile","blob","includes","type","filename","hash","where","length","Object","entries","find","some","fileURI","nanoid","fileObject","fileName","addedAt","Date","now","generateMiniature","miniature","img","document","createElement","src","URL","createObjectURL","width","height","min","newWidth","newHeight","canvas","drawTransparentPattern","getContext","drawImage","toBlob","revokeObjectURL","getFile","getPacksIDs","packIDs","map","getDeletedPacks","existingPacks","allPacks","filter","deleteFile","equals","getRecent","filters","splice","indexOf","deletedPacks","push","anyOf","limit","offset","reverse","sortBy","deleteFilesOfPack","primaryKeys","bulkDelete","removeFileURI","state","newState","changeProperty","propertyName","newValue","createStore","combineReducers","action","dashboard","uploading","fileRendering","callback","menu","position","removeUndefined","object","fromEntries","undefined","history","createBrowserHistory","emptyFunc","formatDate","dateTime","Intl","DateTimeFormat","year","month","day","hour","minute","seconds","mapPackState","questionTypes","packErrors","check","errors","author","language","generate","zip","JSZip","packContent","declaration","attributes","elements","comment","id","restriction","over18","publisher","difficulty","logo","software","tags","split","tag","text","authors","generateAsync","zipInBlob","loadAsync","contentXML","error","async","content","xml2js","mapText","array","t","packageTag","n","property","infoTag","Number","SlideTransition","props","Slide","direction","connect","React","useState","entered","setEntered","setContent","useEffect","interval","setInterval","c","clearInterval","onDragEnter","onDragLeave","onDrop","acceptedFiles","previousState","dispatch","concat","parsePackGenerator","then","noContentXML","reloadPacks","store","getState","accept","getRootProps","getInputProps","className","cx","styles","packBase","newPack","upload","dragOver","backdrop","visible","Snackbar","open","onClose","TransitionComponent","Alert","severity","alert","i","ContextMenuActions","createContext","ContextMenu","items","setItems","contextMenu","preventDefault","clientX","clientY","close","Provider","value","children","ReactDOM","createPortal","Menu","anchorReference","anchorPosition","top","left","item","MenuItem","onClick","stopPropagation","ListItemIcon","icon","ListItemText","body","displayName","okCallback","ConfirmationDialog","forwardRef","ref","setOpen","setText","confirmText","setConfirmText","checkboxText","setCheckboxText","checkboxValue","setCheckboxValue","handleAction","confirmed","checked","useImperativeHandle","maxWidth","DialogTitle","title","DialogContent","DialogContentText","FormControlLabel","control","Checkbox","defaultChecked","onChange","label","DialogActions","Button","autoFocus","color","DeleteConfirmationDialog","confirmationDialogRef","useRef","useHistory","confirmPackDeletion","current","deleteFiles","confirmRoundDeletion","RenameDialog","setCallback","subject","setSubject","oldName","setOldName","setValue","askToRename","handleCancel","TextField","placeholder","variant","style","marginTop","disabled","Pack","confDialogRef","renameDialog","dashboardActions","useContext","DashboardContext","contextMenuActions","handleDeletePack","handleRenamePack","newName","onContextMenu","PackImage","info","time","Create","Loading","loading","Skeleton","skeleton","setSrc","cleanup","pictureContainer","Dashboard","LocalPacks","savedLocalPacks","setSavedLocalPacks","loadPacks","packsUUID","sort","b","contextActions","packsList","PackBase","Array","fill","_","PackSwitch","to","Navigation","infoShown","setInfoShown","AppBar","zIndex","Toolbar","logoContainer","Typography","component","href","rel","IconButton","Dialog","NewPack","packName","setPackName","createPack","uuidv4","dayjs","rounds","examples","container","field","floor","random","onKeyUp","key","linkStyles","link","route","useLocation","path","setPath","page","pathname","RegExp","parts","crumbs","currentPack","settings","theme","questions","paths","default","question","pathRegex","test","Breadcrumbs","Transition","Zoom","SavingDialog","setErrors","setPack","save","startProcessing","setTimeout","bundlePack","saveAs","slugify","LinearProgress","savingDialogRef","handleDeleteRound","roundIndex","parseInt","handleDeleteQuestion","buttons","root","pageToolbar","regex","toolbar","getStyle","transform","axisLockY","Item","draggableId","String","index","provided","Card","innerRef","draggableProps","Handle","handle","dragHandleProps","Round","handleRemoveRound","cardOfRound","editing","ItemContent","CardActionArea","round","CardContent","paddingBottom","darkTheme","spacing","flex1","roundNamesTextInput","handleRoundNameChange","inputField","flex2","AddItem","addingItem","setAddingItem","addItem","ItemName","handleAddItem","onAdd","button","expand","inputLabel","addButtonOuter","startIcon","addButton","buttonLabel","outlinedInput","handleDone","focus","FormControl","InputLabel","OutlinedInput","onKeyDown","paddingRight","inputRef","endAdornment","InputAdornment","ItemsList","WeakMap","itemsMap","setItemsMap","onDragEnd","droppableId","droppableProps","droppableClassName","list","oid","has","set","itemComponent","useIdAsKey","gutterBottom","listStyles","noItems","noItemsLabel","EditingToolbar","heading","showButton","hint","onSwitch","setRounds","setEditing","handleAddRound","packRounds","themes","updateRounds","names","Boolean","destination","startIndex","endIndex","from","removed","reorder","source","droppable","namesList","Items","first","starting","last","ending","replace","done","Marker","marker","lineBefore","hidden","bullet","lineAfter","hasAtLeast1Question","hasAtLeast1Theme","has5ThemesInEachRound","every","hasAtLeast25Questions","reduce","prev","hasQuestionWithAuction","hasQuestionWithBagCat","required","optional","filterItems","f","reducer","progress","point","max","progressBar","caption","line","Rounds","roundsPage","Filters","Stack","checkboxes","handleChange","checkbox","all","fileSrc","setFileSrc","infoDialogueOpen","setInfoDialogueOpen","removing","setRemoving","handleDeleteFile","onRemove","Grid","xs","md","sm","handleSelect","itemInner","preview","foreground","background","filesize","symbols","List","setFiles","mapFiles","keys","mappedFiles","packSwitchUUID","packGroup","packDivider","grid","j","noFilesYet","Upload","setUploading","uploadingFileIndex","setUploadingFileIndex","filesListLength","setFilesListLength","uploaded","setUploaded","handleDrop","hasErrors","fileIndex","console","errorMessage","setTab","uploadingFiles","uploadingScreen","uploadingCaption","CircularProgress","thickness","onDropAccepted","dropzone","flex","supportedTypes","FileStorage","tab","setPacks","setPackUUID","setCheckboxes","handleClose","deletedPack","filteredPacks","cb","checkedPack","sx","palette","grey","dialog","Tabs","textColor","tabs","Tab","selectedFile","B","kB","MB","GB","TB","PB","EB","ZB","YB","Placeholder","FileMissingIcon","fileMissing","FileMissing","FileInfo","FileNotSelected","Image","srcUrl","alt","setSrcUrl","noFile","setNoFile","fileStorage","url","handleClick","formikMuiErrors","formik","touched","helperText","FormikTextField","fieldProps","values","setTouched","FormikAutocomplete","handleKeyDown","Autocomplete","multiple","options","getOptionLabel","option","freeSolo","clearOnBlur","setFieldValue","v","replaceAll","renderInput","FormikSelect","fullWidth","Select","FormHelperText","FormikCheckbox","FormikSlider","slider","Slider","valueLabelDisplay","marks","FormikImageField","formikTouched","schema","yup","positive","integer","validationSchema","initialValues","forEach","submitting","setSubmitting","useFormik","onSubmit","useBeforeunload","event","handleSubmit","form","step","when","message","NotFound404","centered","RoundTable","useRouteMatch","TableContainer","Paper","table","Table","TableBody","row","TableRow","border","TableCell","scope","minWidth","tableCell","price","ButtonBase","buttonBase","align","noItemsYet","Cell","wp","sortedQuestions","TableHead","tableRow","hover","themeIndex","answer","movie","ClickIsolator","expandId","themeName","setThemeName","handleDelete","handleRemoveTheme","handleChangeThemeName","newThemeName","toString","Accordion","expanded","isExpand","setExpand","AccordionSummary","expandIcon","AccordionDetails","ThemesEditing","Theme","handleAddTheme","addTheme","setThemes","found","setFound","roundThemes","updateThemes","clone","questionPriceHint","questionTypesHint","realPriceHint","bagcatRealPriceTypeHint","scenarioHint","WithHint","Tooltip","FormFields","numberFieldProps","InputProps","inputProps","questionPriceType","grouped","ScenarioEvent","duration","setDuration","imageFieldValue","setImageFieldValue","onDelete","step0_1","Decimal","times","toNumber","step0_5","step1","step5","durationMarks","_label","closestToMarks","itemType","toFixed","details","defaultValue","valueLabelFormat","multiline","rows","Scenario","scenario","setScenario","newEventValue","setNewEventValue","newScenario","addEvent","displayEmpty","priceSchema","realprice","transferToSelf","detailsDisclosure","realpriceFrom","realpriceTo","realpriceStep","of","QuestionContent","validateOnChange","validateOnBlur","log","submit","notFound","setNotFound","setQuestion","params","useParams","questionPrice","data","exact","routeChanged","pathParts","createTheme","mode","primary","main","App","sipackerStore","ThemeProvider","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e11cb9e1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"styles_link__iWnvj\",\"toolbar\":\"styles_toolbar__viJ4P\",\"container\":\"styles_container__3KW9G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__Srfpa\",\"delete\":\"styles_delete__1GXPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noItems\":\"styles_noItems__19dBE\",\"handle\":\"styles_handle__DHO5p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1dso8\",\"text\":\"styles_text__16Cv2\",\"hint\":\"styles_hint__2upGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1vfWp\",\"form\":\"styles_form__LUKmR\",\"info\":\"styles_info__1RrDx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"styles_navigation__b3eL_\",\"logoContainer\":\"styles_logoContainer__3hxi2\",\"logo\":\"styles_logo__Triy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Npq2\",\"field\":\"styles_field__1Q5KE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__3sESC\",\"dialog\":\"styles_dialog__2HYt8\",\"tabs\":\"styles_tabs__3oGTF\",\"files\":\"styles_files__gJLVp\",\"filters\":\"styles_filters__1TEOe\",\"text\":\"styles_text__3q7xF\",\"checkbox\":\"styles_checkbox__2-7wb\",\"list\":\"styles_list__QxZ1P\",\"content\":\"styles_content__3DAbo\",\"packDivider\":\"styles_packDivider__1eh-l\",\"grid\":\"styles_grid__2YaAc\",\"item\":\"styles_item__3OyXq\",\"itemInner\":\"styles_itemInner__j4sTM\",\"preview\":\"styles_preview__2vnda\",\"foreground\":\"styles_foreground__3OtLE\",\"background\":\"styles_background__2v4Hw\",\"fileName\":\"styles_fileName__Y6Kge\",\"button\":\"styles_button__2BATH\",\"noFilesYet\":\"styles_noFilesYet__1Hcst\",\"hint\":\"styles_hint__1anpH\",\"upload\":\"styles_upload__i5SMD\",\"dropzone\":\"styles_dropzone__7zJs4\",\"flex\":\"styles_flex__1oz2f\",\"supportedTypes\":\"styles_supportedTypes__UNDK8\",\"uploadingFiles\":\"styles_uploadingFiles__3pQjA\",\"uploadingScreen\":\"styles_uploadingScreen__3l-EZ\",\"uploadingCaption\":\"styles_uploadingCaption__2Thca\",\"caption\":\"styles_caption__3MYtC\",\"errors\":\"styles_errors__3zZJK\",\"delete\":\"styles_delete__GzwCF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"roundsPage\":\"styles_roundsPage__2xjXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"styles_item__2_EzC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"styles_slider__2_T4D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centered\":\"styles_centered__23ouW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2xIAm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"packsList\":\"styles_packsList__3_FVk\",\"hoverUnfocused\":\"styles_hoverUnfocused__QnvyG\",\"packBase\":\"styles_packBase__1LyE6\",\"hoverFocused\":\"styles_hoverFocused__3wnZX\",\"loading\":\"styles_loading__3SVRQ\",\"pack\":\"styles_pack__P7r43\",\"info\":\"styles_info__2vfvj\",\"visibilityDelay\":\"styles_visibilityDelay__2WqMA\",\"newPack\":\"styles_newPack__SHDep\",\"skeleton\":\"styles_skeleton__2LQD-\",\"upload\":\"styles_upload__nOCvw\",\"thumbnail\":\"styles_thumbnail__1aU0y\",\"pictureContainer\":\"styles_pictureContainer__3Ksvb\",\"name\":\"styles_name__10d11\",\"time\":\"styles_time___bQuG\",\"backdrop\":\"styles_backdrop__2CHGI\",\"visible\":\"styles_visible__zmC7_\",\"alert\":\"styles_alert__1bU9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__10MD0\",\"hint\":\"styles_hint__2rDGF\",\"grouped\":\"styles_grouped__2K5-H\",\"addEvent\":\"styles_addEvent__3LcHk\",\"item\":\"styles_item__22gS9\",\"itemType\":\"styles_itemType__12yvw\",\"spacing\":\"styles_spacing__AWfQV\",\"details\":\"styles_details__2X22Q\",\"duration\":\"styles_duration__1EfuX\",\"time\":\"styles_time__CfIYV\",\"submit\":\"styles_submit__39tBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3R_IO\",\"list\":\"styles_list__V6atM\",\"done\":\"styles_done__T3LaX\",\"marker\":\"styles_marker__1v4R9\",\"lineBefore\":\"styles_lineBefore__3FZJa\",\"lineAfter\":\"styles_lineAfter__2tf62\",\"hidden\":\"styles_hidden__QZJee\",\"bullet\":\"styles_bullet__3qHV-\",\"link\":\"styles_link__3mTg0\",\"caption\":\"styles_caption__3cP02\",\"line\":\"styles_line__JJEXr\",\"text\":\"styles_text__1tFeb\",\"progress\":\"styles_progress__2qcQG\",\"progressBar\":\"styles_progressBar__1AayW\"};","import PropTypes from 'prop-types'\nimport xmlJS from 'xml-js'\n\nexport const componentsPropTypes = {\n  pack: PropTypes.shape({\n    uuid: PropTypes.string,\n    name: PropTypes.string,\n    creationTime: PropTypes.number,\n    date: PropTypes.string,\n    thumbnail: PropTypes.string\n  })\n}\n\nexport const format = {\n  xmlVersion: '1.0',\n  encoding: 'utf-8',\n  latestVersion: 4\n}\n\nexport const formatDefaults = {\n  contentTypes: xmlJS.js2xml({\n    _declaration: {\n      _attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    Types: {\n      _attributes: {\n        xmlns: 'http://schemas.openxmlformats.org/package/2006/content-types',\n      },\n      Default: {\n        _attributes: {\n          Extension: 'xml',\n          ContentType: 'si/xml'\n        }\n      }\n    }\n  }, { compact: true })\n}\n\nexport const uuidRegex = '\\\\b[0-9a-f]{8}\\\\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\\\\b[0-9a-f]{12}\\\\b'\n","import Dexie from 'dexie'\n\nexport const init = () => {\n  const db = new Dexie('sipacker')\n  db.version(1).stores({\n    packs: [\n      'uuid'\n      // also: name, version, over18, date, publisher, difficulty, logo, language, tags, authors, comment\n    ].join(', '),\n    files: [\n      'fileURI',\n      'type',\n      'hash',\n      'packUUID',\n      'addedAt'\n      // also: filename, blob\n    ].join(', ')\n  })\n  return db\n}\n","import { init } from './indexeddb'\n\nexport async function loadLocalPack(packUUID) {\n  const db = init()\n  let pack = await db.packs.get(packUUID)\n  return pack ?? null\n}\n\nexport async function loadLocalPacks() {\n  const db = init()\n  const packs = await db.packs.toArray()\n  return packs\n}\n\nexport async function saveLocalPack(pack) {\n  const db = init()\n  await db.packs.put(pack)\n}\n\nexport async function deleteLocalPack(packUUID) {\n  const db = init()\n  await db.packs.delete(packUUID)\n}\n","import SparkMD5 from 'spark-md5'\n\nexport default function hashFile(file) {\n  return new Promise((resolve, reject) => {\n    // from https://github.com/satazor/js-spark-md5#hash-a-file-incrementally\n    const blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\n    const chunkSize = 1024*1024*2\n    const chunks = Math.ceil(file.size / chunkSize)\n    const spark = new SparkMD5.ArrayBuffer()\n    const fileReader = new FileReader()\n\n    let currentChunk = 0\n\n    fileReader.onload = e => {\n      spark.append(e.target.result)\n      currentChunk++\n\n      if (currentChunk < chunks) {\n        loadNext()\n      } else {\n        resolve(spark.end())\n      }\n    }\n\n    fileReader.onerror = () => reject('Unable to hash file')\n\n    const loadNext = () => {\n      const start = currentChunk * chunkSize\n      const end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize\n\n      fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n    }\n\n    loadNext()\n  })\n}\n","import hashFile from './hashFile'\nimport { nanoid } from 'nanoid'\nimport { init } from '../indexeddb'\nimport drawTransparentPattern from 'checkerboardjs'\n\nconst mimeTypes = {\n  image: ['image/png', 'image/jpeg'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg'],\n  video: ['video/mpeg']\n}\nexport const allowedFileTypes = [...mimeTypes.image, ...mimeTypes.audio, ...mimeTypes.video]\nexport async function saveFile(blob, packUUID) {\n  if(!allowedFileTypes.includes(blob.type)) { throw 'Mime-type is not supported' }\n  if(!blob.filename) { throw 'Blob instance must have filename propery' }\n\n  const db = init()\n  const hash = await hashFile(blob)\n\n  let results = await db.files.where({ packUUID, hash }).toArray()\n  if(results.length) throw 'File with such hash already exist'\n\n  const type = Object.entries(mimeTypes).find(\n    ([,mimeType]) => mimeType.some(type => type === blob.type)\n  )[0]\n\n  const fileURI = nanoid()\n  const fileObject = {\n    fileURI,\n    type,\n    blob,\n    fileName: blob.filename,\n    hash,\n    packUUID,\n    addedAt: Date.now()\n  }\n\n  switch(type) {\n    case 'image':\n      fileObject.miniature = await generateMiniature(blob)\n      break\n  }\n\n  await db.files.put(fileObject)\n  return fileURI\n}\n\nconst maxSize = 100\nasync function generateMiniature(blob) {\n  const img = document.createElement('img')\n  const src = URL.createObjectURL(blob)\n  img.src = src\n  await new Promise(resolve => img.onload = resolve)\n  const { width, height } = img\n  const size = Math.min(width, height, maxSize)\n  let newWidth = size, newHeight = size\n  if(width > height) newHeight = newWidth*height/ width\n  else newWidth = newHeight*width/height\n\n  const canvas = document.createElement('canvas')\n  canvas.width = newWidth\n  canvas.height = newHeight\n  drawTransparentPattern(canvas)\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n  const miniature = await new Promise(resolve => canvas.toBlob(resolve))\n  URL.revokeObjectURL(src)\n  return miniature\n}\n","import { init } from '../indexeddb'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nexport { allowedFileTypes, saveFile } from './saveFile'\n\nexport async function getFile(fileURI) {\n  const db = init()\n  let file = await db.files.get(fileURI)\n  return file ?? null\n}\n\nexport async function getPacksIDs() {\n  const db = init()\n  const packIDs = await db.files.toArray()\n  return packIDs.map(({ packUUID }) => packUUID)\n}\n\nexport async function getDeletedPacks() {\n  let existingPacks = await loadLocalPacks()\n  existingPacks = existingPacks.map(({ uuid }) => uuid)\n  const allPacks = await getPacksIDs()\n  return allPacks.filter(pack => !existingPacks.includes(pack))\n}\n\nexport async function deleteFile(fileURI) {\n  const db = init()\n  await db.files.where('fileURI').equals(fileURI).delete()\n}\n\nconst size = 20\nexport async function getRecent(filters) {\n  const db = init()\n  if(filters.includes('null')){\n    filters.splice(filters.indexOf('null'), 1)\n    const deletedPacks = await getDeletedPacks()\n    filters.push(...deletedPacks)\n  }\n  const files = await db.files.where('packUUID').anyOf(filters)\n    .limit(size)\n    .offset(0)\n    .reverse()\n    .sortBy('addedAt')\n  return files\n}\n\nexport async function deleteFilesOfPack(packUUID) {\n  const db = init()\n  const files = await db.files.where({ packUUID }).primaryKeys()\n  await db.files.bulkDelete(files)\n}\n","export default function fileRenderingReducer(state = {}, action) {\n  switch (action.type) {\n    case 'fileRendering/fileRenderingStarted':\n      return state[action.fileURI] ? { ...state } :  { ...state, [action.fileURI]: action.callback }\n    case 'fileRendering/fileRenderingStopped':\n      return removeFileURI(state, action.fileURI)\n    case 'fileRendering/fileUnlinked':\n      const callback = state[action.fileURI]\n      callback && callback()\n      return removeFileURI(state, action.fileURI)\n    case 'fileRendering/setFileUnlinkCallback':\n      return changeProperty(state, action.fileURI, action.callback)\n    default:\n      return state\n  }\n}\n\nfunction removeFileURI(state, fileURI) {\n  const newState = { ...state }\n  delete newState[fileURI]\n  return newState\n}\n\nfunction changeProperty(state, propertyName, newValue) {\n  const newState = { ...state }\n  newState[propertyName] = newValue\n  return newState\n}\n","import { combineReducers, createStore } from 'redux'\nimport packReducer from './packReducer'\nimport dashboardReducer from './dashboardReducer'\nimport fileRenderingReducer from './fileRendering'\nimport menuReducer from './menuReducer'\n\nexport default createStore(combineReducers({\n  pack: packReducer,\n  dashboard: dashboardReducer,\n  fileRendering: fileRenderingReducer,\n  menu: menuReducer\n}))\n","export default function packReducer(state = null, action) {\n  switch (action.type) {\n    case 'pack/load':\n      return action.pack\n    default:\n      return state\n  }\n}\n","export default function dashboardReducer(state = null, action) {\n  switch (action.type) {\n    case 'dashboard/setUploading':\n      return { ...state, uploading: action.uploading }\n    default:\n      return state\n  }\n}\n","export default function menuReducer(state = null, action) {\n  switch (action.type) {\n    case 'menu/setPosition':\n      return { ...state, position: action.position }\n    default:\n      return state\n  }\n}\n","import { createBrowserHistory } from 'history'\n\nexport const removeUndefined = object => Object.fromEntries(Object.entries(object).filter(([, val]) => val !== undefined))\n\nexport const history = createBrowserHistory()\n\nexport const emptyFunc = () => {}\n\nexport const formatDate = dateTime => new Intl.DateTimeFormat('ru-RU', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  seconds: 'numeric'\n}).format(dateTime)\n\nexport const mapPackState = state => ({ pack: state.pack })\n\nexport const questionTypes = {\n  'simple': 'Обычный',\n  'auction': 'Аукцион',\n  'cat': 'С секретом',\n  'bagcat': 'Кот в мешке',\n  'sponsored': 'Без риска'\n}\n","import JSZip from 'jszip'\nimport { format, formatDefaults } from '../consts'\nimport xmlJS from 'xml-js'\nimport { saveLocalPack } from '../localStorage/localPacks'\nimport { removeUndefined } from '../utils'\n\nconst packErrors = {\n  noAuthor: 'Добавьте как минимум одного автора в настройках пака',\n  noLanguage: 'Установите язык вопросов в настройках пака'\n}\nexport async function check(pack) {\n  let errors = []\n  if(!pack.author) errors.push(packErrors.noAuthor)\n  if(!pack.language) errors.push(packErrors.noLanguage)\n\n  return errors\n}\n\nexport async function generate(pack) {\n  const zip = new JSZip()\n  zip.file('[Content_Types].xml', formatDefaults.contentTypes)\n  // zip.folder('Audio')\n  // zip.folder('Images')\n  // zip.folder('Texts')\n\n  const packContent = {\n    declaration: {\n      attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    elements: [\n      {\n        type: 'comment',\n        comment: 'This package was generated using SIPacker — free open-source online tool for generating SIGame packs. Feel free to leave feedback on https://github.com/VityaSchel/SIPacker'\n      },\n      {\n        type: 'element',\n        name: 'package',\n        attributes: {\n          xmlns: 'http://vladimirkhil.com/ygpackage3.0.xsd',\n          id: pack.uuid,\n          name: pack.name,\n          version: pack.version,\n          restriction: pack.over18 ? '18+' : undefined,\n          date: pack.date,\n          publisher: pack.publisher,\n          difficulty: pack.difficulty,\n          logo: pack.logo,\n          language: pack.language,\n          software: 'sipacker'\n        },\n        elements: [\n          pack.tags && {\n            type: 'element',\n            name: 'tags',\n            elements: pack.tags.split(',').map(tag => ({\n              type: 'element',\n              name: 'tag',\n              elements: [{ type: 'text', text: tag }]\n            }))\n          },\n          {\n            type: 'element',\n            name: 'info',\n            elements: [\n              {\n                type: 'element',\n                name: 'authors',\n                elements: pack.authors.split(',').map(author => ({\n                  type: 'element',\n                  name: 'author',\n                  elements: [{ type: 'text', text: author }]\n                }))\n              },\n              pack.comment && {\n                type: 'element',\n                name: 'comments',\n                elements: [\n                  {\n                    type: 'text',\n                    text: pack.comment\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n  zip.file('content.xml', xmlJS.js2xml(packContent, { compact: true }))\n  const zipInBlob = await zip.generateAsync({ type: 'blob' })\n  return zipInBlob\n}\n\nexport async function parse(blob) {\n  try {\n    const zip = await JSZip.loadAsync(blob)\n    const contentXML = zip.files['content.xml']\n    if(!contentXML) { return { error: 'noContentXML' }}\n    const packContent = await contentXML.async('string')\n    const content = xmlJS.xml2js(packContent)\n\n    const n = (object, property) => {\n      const target = object.elements.filter(e => e.name === property)\n      return target && target[0]\n    }\n\n    const mapText = array => {\n      if(!array) { return undefined }\n      return array.elements.map(t => t.elements[0].text)\n    }\n\n    const packageTag = n(content, 'package')\n    const { id, name, version, difficulty, restriction, date, publisher, logo, language } = packageTag.attributes\n    const infoTag = n(packageTag, 'info')\n    const authors = mapText(n(infoTag, 'authors'))\n    const tags = mapText(n(packageTag, 'tags'))\n\n    const pack = removeUndefined({\n      uuid: id,\n      name,\n      version: Number(version),\n      difficulty: Number(difficulty),\n      creationTime: Date.now(),\n      over18: restriction === '18+',\n      date,\n      authors: authors.join(','),\n      publisher,\n      tags: tags?.join(','),\n      logo,\n      language: language || ''\n    })\n    await saveLocalPack(pack)\n    return true\n  } catch(e) {\n    return { error: e }\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport cx from 'classnames'\nimport Snackbar from '@mui/material/Snackbar'\nimport Slide from '@mui/material/Slide'\nimport Alert from '@mui/material/Alert'\nimport { connect } from 'react-redux'\nimport store from '../../../reducers'\nimport { MdFileUpload } from 'react-icons/md'\nimport Dropzone from 'react-dropzone'\nimport { parse as parsePackGenerator } from 'localStorage/packGenerator'\n\nconst SlideTransition = props => <Slide {...props} direction=\"right\" />\n\nfunction Upload(props) {\n  const [entered, setEntered] = React.useState(false)\n  const [content, setContent] = React.useState([])\n\n  const handleDrop = acceptedFiles => {\n    setEntered(false)\n    if(!acceptedFiles) { return }\n    for (let pack of acceptedFiles) {\n      let previousState = props.dashboard?.uploading ?? []\n      const id = Date.now()\n      props.dispatch({ type: 'dashboard/setUploading', uploading: previousState.concat({ id, name: pack.name }) })\n      parsePackGenerator(pack).then(result => {\n        if(result.error) {\n          const error = {\n            noContentXML: 'Не найден файл content.xml в паке. Возможно, архив поврежден или неправильно создан, например, с абсолютными путями вместо относительных.'\n          }[result.error]\n          const date = Date.now()\n          setContent(content.concat({ date, text: `Ошибка при загрузке пака «${pack.name}»: ${error}` }))\n        } else {\n          props.reloadPacks()\n        }\n        props.dispatch({ type: 'dashboard/setUploading', uploading: store.getState().pack?.uploading.filter(pack => id !== pack.id) })\n      })\n    }\n  }\n\n  const handleEnter = () => setEntered(true)\n  const handleLeave = () => setEntered(false)\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      setContent(content.filter(c => c.date >= Date.now()-1000*5))\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [content])\n\n  return (\n    <>\n      <Dropzone\n        onDragEnter={handleEnter}\n        onDragLeave={handleLeave}\n        onDrop={handleDrop}\n        accept={['.siq']}\n      >\n        {({getRootProps, getInputProps}) => (\n          <div className={cx(\n            [styles.packBase, styles.newPack, styles.upload],\n            { [styles.dragOver]: entered }\n          )} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span><MdFileUpload /> Загрузить файл пака</span>\n          </div>\n        )}\n      </Dropzone>\n      <div className={cx(styles.backdrop, { [styles.visible]: entered })} />\n      <Snackbar\n        open={content.length}\n        onClose={() => setContent([])}\n        TransitionComponent={SlideTransition}\n      >\n        <Alert severity=\"error\" className={styles.alert}>\n          {content.map((c, i) => <p key={i}>{c.text}</p>)}\n        </Alert>\n      </Snackbar>\n    </>\n  )\n}\n\nUpload.propTypes = {\n  dashboard: PropTypes.object,\n  dispatch: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default connect(state => ({ dashboard: state.dashboard }))(Upload)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Menu from '@mui/material/Menu'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\n\nexport const ContextMenuActions = React.createContext({})\nfunction ContextMenu(props) {\n  const [items, setItems] = React.useState()\n\n  const contextMenu = {\n    open(e, items) {\n      if(props.menu?.position) return true\n      else e.preventDefault()\n      setItems(items)\n      props.dispatch({ type: 'menu/setPosition', position: [e.clientX, e.clientY] })\n      return false\n    }\n  }\n\n  const close = e => {\n    e?.preventDefault()\n    props.dispatch({ type: 'menu/setPosition', position: null })\n  }\n\n  const handleSelect = action => e => {\n    e.stopPropagation()\n    action()\n    close()\n  }\n\n  return (\n    <>\n      <ContextMenuActions.Provider value={contextMenu}>\n        {props.children}\n      </ContextMenuActions.Provider>\n      {\n        ReactDOM.createPortal(\n          <Menu\n            open={props.menu?.position}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={props.menu?.position && { top: props.menu.position[1], left: props.menu.position[0] }}\n            onClose={close}\n          >\n            {items?.map((item, i) =>\n              <MenuItem onClick={handleSelect(item.action)} key={i}>\n                <ListItemIcon>\n                  {item.icon}\n                </ListItemIcon>\n                <ListItemText>{item.name}</ListItemText>\n              </MenuItem>\n            )}\n          </Menu>,\n          document.body\n        )\n      }\n    </>\n  )\n}\n\nContextMenu.displayName = 'ContextMenu'\nContextMenu.propTypes = {\n  dispatch: PropTypes.func,\n  menu: PropTypes.array,\n  name: PropTypes.string,\n  children: PropTypes.func,\n}\n\nexport default connect(state => ({ menu: state.menu }))(ContextMenu)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@mui/material/Button'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport Checkbox from '@mui/material/Checkbox'\nimport FormControlLabel from '@mui/material/FormControlLabel'\n\nlet okCallback\nconst ConfirmationDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [text, setText] = React.useState()\n  const [confirmText, setConfirmText] = React.useState('')\n  const [checkboxText, setCheckboxText] = React.useState('')\n  const [checkboxValue, setCheckboxValue] = React.useState(true)\n\n  const handleAction = result => {\n    setOpen(false)\n    okCallback({ confirmed: result, checked: checkboxValue })\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    open(text, confirmText, checkboxText) {\n      return new Promise(resolve => {\n        okCallback = resolve\n        setOpen(true)\n        setText(text)\n        setConfirmText(confirmText)\n        setCheckboxText(checkboxText)\n      })\n    }\n  }))\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      onClose={() => handleAction(false)}\n    >\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {text && <p>{text}</p>}\n          {props.children}\n          {checkboxText && <FormControlLabel control={\n            <Checkbox\n              defaultChecked\n              value={checkboxValue}\n              onChange={e => setCheckboxValue(e.target.checked)}\n            />\n          } label={checkboxText} />}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={() => handleAction(false)} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={() => handleAction(true)} color=\"primary\">\n          {confirmText ?? 'Продолжить'}\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node\n}\nConfirmationDialog.displayName = 'ConfirmationDialog'\nexport default ConfirmationDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ConfirmationDialog from 'components/ConfirmationDialog'\nimport { deleteFilesOfPack } from 'localStorage/fileStorage'\nimport { deleteLocalPack } from 'localStorage/localPacks'\nimport { useHistory } from 'react-router-dom'\n\nconst DeleteConfirmationDialog = React.forwardRef((props, ref) => {\n  const confirmationDialogRef = React.useRef()\n  const history = useHistory()\n\n  React.useImperativeHandle(ref, () => ({\n    async confirmPackDeletion(packUUID) {\n      const { confirmed, checked } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить пак? Он будет удален безвозвратно.',\n          'Удалить',\n          'Удалить все связанные медиафайлы'\n        )\n      const deleteFiles = checked\n      if(confirmed) {\n        deleteFiles && await deleteFilesOfPack(packUUID)\n        await deleteLocalPack(packUUID)\n        history.push('/')\n      }\n      return confirmed\n    },\n\n    async confirmRoundDeletion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить раунд? Все вопросы также будут удалены.', 'Удалить')\n      return confirmed\n    }\n  }))\n\n  return (\n    <ConfirmationDialog ref={confirmationDialogRef}></ConfirmationDialog>\n  )\n})\n\nDeleteConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nDeleteConfirmationDialog.displayName = 'DeleteConfirmationDialog'\nexport default DeleteConfirmationDialog\n","import React from 'react'\nimport Button from '@mui/material/Button'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport TextField from '@mui/material/TextField'\n\nconst RenameDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => () => {})\n  const [subject, setSubject] = React.useState('')\n  const [oldName, setOldName] = React.useState('')\n  const [value, setValue] = React.useState('')\n\n  React.useImperativeHandle(ref, () => ({\n    askToRename(callback, subject, oldName) {\n      setCallback(() => callback)\n      setSubject(subject)\n      setOldName(oldName)\n      setValue(oldName)\n      setOpen(true)\n    }\n  }))\n\n  const handleCancel = () => {\n    setOpen(false)\n    callback()\n  }\n\n  const handleRename = () => {\n    setOpen(false)\n    callback(value)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth='xs'\n      open={open}\n      onClose={handleCancel}\n    >\n      <DialogTitle>Переименовать {subject}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label='Новое имя'\n          placeholder={oldName}\n          variant='outlined'\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          style={{ marginTop: 15 }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={handleRename} color=\"primary\" disabled={!value.length}>\n          Переименовать\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nRenameDialog.displayName = 'RenameDialog'\n\nexport default RenameDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport { MdDelete } from 'react-icons/md'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { BiRename } from 'react-icons/bi'\nimport { formatDate } from '../../../utils'\nimport { componentsPropTypes } from '../../../consts'\nimport PackImage from './index'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport { DashboardContext } from '../index'\nimport RenameDialog from 'components/RenameDialog'\nimport { loadLocalPack, saveLocalPack } from 'localStorage/localPacks'\n\nPack.propTypes = { pack: PropTypes.shape(componentsPropTypes.pack) }\nexport default function Pack(props) {\n  const confDialogRef = React.useRef()\n  const renameDialog = React.useRef()\n  const dashboardActions = React.useContext(DashboardContext)\n  const creationTime = formatDate(new Date(props.pack.creationTime))\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Переименовать', icon: <BiRename />, action: () => handleRenamePack() },\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeletePack() }\n    ])\n  }\n\n  const handleDeletePack = async () => {\n    if(await confDialogRef.current.confirmPackDeletion(props.pack.uuid))\n      dashboardActions.reloadPacks()\n  }\n\n  const handleRenamePack = async () => {\n    const newName = await new Promise(resolve =>\n      renameDialog.current.askToRename(resolve, 'пак', props.pack.name)\n    )\n    if(newName !== undefined){\n      let pack = await loadLocalPack(props.pack.uuid)\n      pack = { ...pack, name: newName }\n      saveLocalPack(pack)\n      dashboardActions.reloadPacks()\n    }\n  }\n\n  return (\n    <>\n      <div\n        className={[styles.packBase, styles.pack].join(' ')}\n        onContextMenu={handleOpenMenu}\n      >\n        <PackImage src={props.pack.logo} />\n        <div className={styles.info}>\n          <span className={styles.name}>{props.pack.name}</span>\n          <span className={styles.time}>Создано: {creationTime}</span>\n        </div>\n      </div>\n      <div onClick={e => e.stopPropagation()}>\n        <DeleteConfirmationDialog ref={confDialogRef} />\n        <RenameDialog ref={renameDialog} />\n      </div>\n    </>\n  )\n}\n","import React from 'react'\nimport styles from '../styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { BsPlus } from 'react-icons/bs'\nimport Skeleton from '@mui/material/Skeleton'\nimport { componentsPropTypes } from '../../../consts'\nimport { getFile } from 'localStorage/fileStorage'\nexport { default as Upload } from './Upload'\nexport { default as Pack } from './Pack'\n\nexport function Create() {\n  return (\n    <div className={[styles.packBase, styles.newPack].join(' ')}>\n      <span><BsPlus /> Создать новый пак</span>\n    </div>\n  )\n}\n\nLoading.propTypes = { name: PropTypes.string }\nexport function Loading(props) {\n  return (\n    <div className={[styles.packBase, styles.loading].join(' ')}>\n      <Skeleton variant='rectangular' width='100%' height='100%' className={styles.skeleton} />\n      { props.name && <span>Загрузка «{props.name}»</span> }\n    </div>\n  )\n}\n\nPackImage.propTypes = { src: componentsPropTypes.pack.thumbnail }\nexport default function PackImage(props) {\n  const [src, setSrc] = React.useState()\n\n  React.useEffect(() => {\n    let cleanup = () => {}\n    if(props.src) {\n      (async () => {\n        const file = await getFile(props.src)\n        const src = URL.createObjectURL(file.blob)\n        cleanup = () => URL.revokeObjectURL(src)\n        setSrc(src)\n      })()\n    } else {\n      setSrc()\n    }\n    return () => cleanup(src)\n  }, [props.src])\n\n  return (\n    <div className={styles.pictureContainer}>\n      {src\n        ? <img src={src} className={styles.thumbnail} />\n        : <div className={styles.thumbnail} />\n      }\n    </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { componentsPropTypes } from '../../consts.js'\nimport { Create, Upload, Loading, Pack } from './packTypes'\nimport { Link } from 'react-router-dom'\nimport { loadLocalPacks } from '../../localStorage/localPacks'\nimport { connect } from 'react-redux'\n\nexport default function Dashboard() {\n  return (\n    <LocalPacks />\n  )\n}\n\nexport const DashboardContext = React.createContext({})\nexport const LocalPacks = connect(state => ({ dashboard: state.dashboard }))(props => {\n  const [savedLocalPacks, setSavedLocalPacks] = React.useState()\n\n  const loadPacks = async () => {\n    const packsUUID = await loadLocalPacks()\n    const packs = packsUUID\n      .sort((a,b) => a.creationTime - b.creationTime)\n    setSavedLocalPacks(packs)\n  }\n\n  React.useEffect(() => loadPacks(), [])\n\n  const contextActions = {\n    reloadPacks: () => loadPacks()\n  }\n\n  return (\n    <div>\n      <DashboardContext.Provider value={contextActions}>\n        <div className={styles.packsList}>\n          <PackBase type='create' />\n          <PackBase type='upload' reloadPacks={loadPacks} />\n          { props.dashboard?.uploading?.reverse().map(({ name }, i) => <PackBase type='loading' name={name} key={i} />) }\n          { savedLocalPacks\n            ? savedLocalPacks.map(pack => <PackBase type='pack' key={pack.uuid} pack={pack} />)\n            : new Array(5).fill().map((_, i) => <PackBase type='loading' key={i} />)\n          }\n        </div>\n      </DashboardContext.Provider>\n    </div>\n  )\n})\n\nPackBase.propTypes = PackSwitch.propTypes = {\n  type: PropTypes.oneOf(['create', 'upload', 'pack', 'loading']),\n  pack: PropTypes.shape(componentsPropTypes.pack),\n  name: PropTypes.string,\n  reloadPacks: PropTypes.func\n}\n\nfunction PackBase(props) {\n  return (\n    ['loading', 'upload'].includes(props.type)\n      ? <PackSwitch {...props} />\n      : <Link to={props.type === 'pack' ? `/pack/${props.pack.uuid}` : `${props.type}`}><PackSwitch {...props} /></Link>\n  )\n}\n\nfunction PackSwitch(props) {\n  return (\n    {\n      'create': <Create />,\n      'upload': <Upload reloadPacks={props.reloadPacks} />,\n      'loading': <Loading name={props.name} />,\n      'pack': <Pack pack={props.pack} />\n    }[props.type]\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport IconButton from '@mui/material/IconButton'\nimport { ImGithub } from 'react-icons/im'\nimport { AiOutlineInfoCircle } from 'react-icons/ai'\nimport AppBar from '@mui/material/AppBar'\nimport Toolbar from '@mui/material/Toolbar'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport Dialog from '@mui/material/Dialog'\nimport DialogActions from '@mui/material/DialogActions'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\n\nexport default function Navigation() {\n  const [infoShown, setInfoShown] = React.useState(false)\n\n  return (\n    <AppBar position='static' style={{ zIndex: 4 }}>\n      <Toolbar color='primary'>\n        <div className={styles.logoContainer}>\n          <Link to='/' className={styles.logo}>\n            <Typography variant='h6' component='div'>\n              SIPacker\n            </Typography>\n          </Link>\n        </div>\n        <div>\n          <a href='https://github.com/VityaSchel/SIPacker' target='_blank' rel='noreferrer'>\n            <IconButton>\n              <ImGithub />\n            </IconButton>\n          </a>\n          <IconButton onClick={() => setInfoShown(true)}>\n            <AiOutlineInfoCircle />\n          </IconButton>\n        </div>\n        <Dialog\n          open={infoShown}\n          onClose={() => setInfoShown(false)}\n        >\n          <DialogTitle>\n            Автор приложения\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <p>Веб-приложение создано VityaSchel в 2021 году для игры SiGame как кроссплатформенная замена SIQuester.</p>\n              <p>Все свои идеи и предложения излагайте в пул-реквестах или хотя бы во вкладке Issues, а не в моих лс.</p>\n              <p>\n                <a\n                  href='https://github.com/VladimirKhil/SI/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0-.siq'\n                  className='onHover'\n                >\n                  Спецификация формата .siq\n                </a>\n              </p>\n              <p>\n                Большая благодарность Владимиру Хилю за то, что не игнорил мои вопросы во время разработки этого сайта\n                (привет разработчикам мафии онлайн и мафии го)\n              </p>\n              <p>\n                Также хочу пожелать удачи и легкой\n                службы <a\n                  href='https://vk.com/id245297843'\n                  target='_blank'\n                  rel=\"noreferrer\"\n                  className='onHover'\n                >Роме Кучину</a>, который своим комментарием натолкнул меня на идею создания этого сайта, но не может\n                работать со мной по причине Я в армии.\n              </p>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setInfoShown(false)}>ОК</Button>\n          </DialogActions>\n        </Dialog>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport { v4 as uuidv4 } from 'uuid'\nimport { useHistory } from 'react-router-dom'\nimport { saveLocalPack } from '../../localStorage/localPacks'\nimport dayjs from 'dayjs'\nimport { format } from '../../consts.js'\n\nexport default function NewPack() {\n  const [packName, setPackName] = React.useState('')\n  const history = useHistory()\n\n  const createPack = async () => {\n    const uuid = uuidv4()\n    const pack = {\n      uuid,\n      name: packName,\n      date: dayjs().format('DD.MM.YYYY'),\n      creationTime: Date.now(),\n      language: '',\n      version: format.latestVersion,\n      difficulty: 5,\n      rounds: []\n    }\n    await saveLocalPack(pack)\n    history.push(`/pack/${uuid}`)\n  }\n\n  const handleCheckSubmit = e => {\n    if(e.key === 'Enter') createPack()\n  }\n\n  const examples = ['Вопросы от славян', 'Игры, музыка и многое другое', 'Кинопак', 'Аниме и прочий буллщит', 'Мемная Солянка']\n\n  return (\n    <div className={styles.container}>\n      <TextField\n        label='Название пака'\n        variant='outlined'\n        value={packName}\n        onChange={e => setPackName(e.target.value)}\n        className={styles.field}\n        placeholder={examples[Math.floor(Math.random()*examples.length)]}\n        onKeyUp={handleCheckSubmit}\n        autoFocus\n      />\n      <Button\n        variant='contained'\n        onClick={() => createPack()}\n        disabled={!packName.length}\n      >Создать</Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Breadcrumbs from '@mui/material/Breadcrumbs'\nimport Typography from '@mui/material/Typography'\nimport { useLocation } from 'react-router'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes, uuidRegex } from '../../consts'\nimport { mapPackState } from '../../utils'\nimport { settings, rounds, question } from './pathRegexps.json'\n\nPackBreadcrumbs.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackBreadcrumbs(props) {\n  const linkStyles = [styles.link, 'onHover', 'noDefaults'].join(' ')\n  const route = useLocation()\n  const [path, setPath] = React.useState([])\n\n  React.useEffect(() => {\n    const page = route.pathname.split(new RegExp(`/pack/${uuidRegex}`), 2)[1]\n    const parts = page.split('/')\n\n    const crumbs = {\n      dashboard: { to: '/', name: 'Паки' },\n      currentPack: { to: `/pack/${props.pack.uuid}`, name: props.pack.name },\n      settings: { to: `/pack/${props.pack.uuid}/settings`, name: 'Настройки' },\n      rounds: { to: `/pack/${props.pack.uuid}/rounds/${parts[2]}`, name: `Раунд ${parts[2]}` },\n      theme: { name: `Тема ${parts[4]}` },\n      questions: { to: `/pack/${props.pack.uuid}/rounds/${parts[2]}/themes/${parts[4]}/questions/${parts[6]}`, name: `Вопрос за ${parts[6]}` }\n    }\n\n    const paths = {\n      default: [crumbs.dashboard, crumbs.currentPack],\n      [settings]: [crumbs.dashboard, crumbs.currentPack, crumbs.settings],\n      [rounds]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds],\n      [question]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds, crumbs.theme, crumbs.questions],\n    }\n\n    for(let [pathRegex, path] of Object.entries(paths)){\n      if(new RegExp(`^${pathRegex}/?$`).test(page)){\n        return setPath(path)\n      }\n    }\n    return setPath(paths.default)\n  }, [route, props.pack])\n\n  return (\n    <Breadcrumbs>\n      {path.map(({ to, name }, i) => {\n        if(to && i !== path.length-1) {\n          return <Link to={to} className={linkStyles} key={i}>\n            {name}\n          </Link>\n        } else {\n          return <Typography color={i === path.length-1 ? 'text.primary' : 'text.secondary'} key={i}>{name}</Typography>\n        }\n      })}\n    </Breadcrumbs>\n  )\n}\n\nexport default connect(mapPackState)(PackBreadcrumbs)\n","import React from 'react'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport MuiDialog from '@mui/material/Dialog'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport Zoom from '@mui/material/Zoom'\nimport DialogActions from '@mui/material/DialogActions'\nimport Button from '@mui/material/Button'\nimport { generate, check } from 'localStorage/packGenerator'\nimport { saveAs } from 'file-saver'\nimport { slugify } from 'transliteration'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Zoom ref={ref} {...props} />\n})\n\nconst SavingDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [errors, setErrors] = React.useState([])\n  const [pack, setPack] = React.useState()\n\n  React.useImperativeHandle(ref, () => ({\n    save(pack) {\n      setOpen(true)\n      setPack(pack)\n    }\n  }))\n\n  React.useEffect(() => pack?.uuid && startProcessing(), [pack])\n\n  const startProcessing = async () => {\n    const errors = await check(pack)\n    setErrors(errors)\n    if(errors.length) return\n\n    setTimeout(bundlePack, 500)\n  }\n\n  const bundlePack = async () => {\n    const zipInBlob = await generate(pack)\n    saveAs(zipInBlob, slugify(pack.name))\n    setOpen(false)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      TransitionComponent={Transition}\n      onClose={() => errors.length && setOpen(false)}\n    >\n      <DialogTitle>Генерация архива</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          { !errors.length ? <>\n            <p>Производится генерация файла пака. Это может занять несколько секунд, в зависимости от количества медиа-файлов.</p>\n            <LinearProgress color='primary' />\n          </> : <>\n            <p>Исправьте следующие ошибки и перезапустите процесс генерации пака:</p>\n            <ul>\n              { errors.map(error => <li key={error}>{error}</li>) }\n            </ul>\n          </> }\n        </DialogContentText>\n      </DialogContent>\n      { errors.length &&\n        <DialogActions>\n          <Button autoFocus onClick={() => setOpen(false)}>\n            Закрыть\n          </Button>\n        </DialogActions>\n      }\n    </MuiDialog>\n  )\n})\n\nSavingDialog.displayName = 'ConfirmationDialog'\nexport default SavingDialog\n","import React from 'react'\nimport { useLocation, useHistory, Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../../consts'\nimport IconButton from '@mui/material/IconButton'\nimport { MdSettings, MdDelete, MdFileDownload } from 'react-icons/md'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport SavingDialog from './SavingDialog'\nimport { mapPackState } from '../../../utils'\nimport { root, rounds, question } from '../pathRegexps.json'\n\nPackToolbar.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackToolbar(props) {\n  const confirmationDialogRef = React.useRef()\n  const savingDialogRef = React.useRef()\n  const history = useHistory()\n  const { pathname } = useLocation()\n\n  const handleSave = () => savingDialogRef.current.save(props.pack)\n  const handleDeletePack = () => {\n    confirmationDialogRef.current.confirmPackDeletion(props.pack.uuid)\n  }\n\n  const handleDeleteRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    const pack = { ...props.pack }\n    const roundIndex = parseInt(pathname.split(`/pack/${props.pack.uuid}/rounds/`, 2)[1])\n    pack.rounds.splice(roundIndex - 1, 1)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}`)\n  }\n\n  const handleDeleteQuestion = async () => {\n\n  }\n\n  const buttons = props.pack && {\n    [root]: [\n      [handleSave, <MdFileDownload key='download' />],\n      [`/pack/${props.pack.uuid}/settings`, <MdSettings key='settings' />],\n      [handleDeletePack, <MdDelete key='delete' />, styles.delete]\n    ],\n    [rounds]: [\n      [handleDeleteRound, <MdDelete key='delete' />, styles.delete]\n    ],\n    [question]: [\n      [handleDeleteQuestion, <MdDelete key='delete' />, styles.delete]\n    ]\n  }\n\n  const path = pathname.split(`/pack/${props.pack.uuid}`, 2)[1]\n  const pageToolbar = Object.entries(buttons).find(\n    ([regex, toolbar]) => new RegExp(`^${regex}/?$`).test(path) && toolbar\n  )\n\n  return (\n    <>\n      <div className={styles.buttons}>\n        {pageToolbar && pageToolbar[1].map(([action, icon, styles], i) => <>\n          {\n            typeof action === 'string'\n              ? <Link to={action} className={styles} key={i}>\n                <IconButton>\n                  {icon}\n                </IconButton>\n              </Link>\n              : <IconButton className={styles} onClick={action} key={i}>\n                {icon}\n              </IconButton>\n          }\n        </>)}\n      </div>\n      <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      <SavingDialog ref={savingDialogRef} />\n    </>\n  )\n}\n\nexport default connect(mapPackState)(PackToolbar)\n","import PropTypes from 'prop-types'\nimport { Draggable } from 'react-beautiful-dnd'\nimport Card from '@mui/material/Card'\nimport styles from './styles.module.scss'\n\nfunction getStyle(style) {\n  if (style.transform) {\n    const axisLockY =\n      'translate(0px' +\n      style.transform.slice(\n        style.transform.indexOf(','),\n        style.transform.length\n      )\n    return {\n      ...style,\n      transform: axisLockY\n    }\n  }\n  return style\n}\n\nItem.propTypes = {\n  index: PropTypes.number,\n  draggableId: PropTypes.string,\n  className: PropTypes.string,\n  children: PropTypes.func,\n  tag: PropTypes.string,\n}\n\nexport default function Item(props) {\n  return (\n    <Draggable\n      draggableId={String(props.draggableId)}\n      index={props.index}\n    >\n      {provided =>\n        <Card\n          className={[props.className, styles.item].join(' ')}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          style={getStyle(provided.draggableProps.style)}\n        >\n          {props.children(provided)}\n        </Card>\n      }\n    </Draggable>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDragHandle } from 'react-icons/md'\n\nHandle.propTypes = { provided: PropTypes.object }\nexport default function Handle(props) {\n  return (\n    <div\n      className={styles.handle}\n      {...props.provided.dragHandleProps}\n    >\n      <MdDragHandle />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport CardContent from '@mui/material/CardContent'\nimport CardActionArea from '@mui/material/CardActionArea'\nimport { darkTheme } from '../../../../App'\nimport { Link } from 'react-router-dom'\nimport { MdDelete } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport TextField from '@mui/material/TextField'\nimport Item from 'components/ItemsList/Item'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport Typography from '@mui/material/Typography'\nimport Handle from 'components/ItemsList/Handle'\n\nRound.propTypes = ItemContent.propTypes = {\n  draggableId: PropTypes.string,\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  editing: PropTypes.bool,\n  setEditing: PropTypes.func,\n  handleRemoveRound: PropTypes.func,\n  roundNamesTextInput: PropTypes.arrayOf(PropTypes.string),\n  handleRoundNameChange: PropTypes.func\n}\n\nexport default function Round(props) {\n  const confirmationDialogRef = React.useRef()\n\n  const handleRemoveRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    props.handleRemoveRound(props.index)\n  }\n\n  return (\n    <Item {...props} className={styles.cardOfRound}>\n      {(provided) => !props.editing\n        ? <Link to={`/pack/${props.pack.uuid}/rounds/${props.index+1}`} className={styles.link}>\n          <CardActionArea>\n            <ItemContent {...props} />\n          </CardActionArea>\n        </Link>\n        : <div className={styles.item}>\n          <Handle provided={provided} />\n          <ItemContent {...props} />\n          <Toolbar handleRemoveRound={handleRemoveRound} />\n          <DeleteConfirmationDialog ref={confirmationDialogRef} />\n        </div>\n      }\n    </Item>\n  )\n}\n\nfunction ItemContent(props) {\n  const round = props.item\n\n  return (\n    <CardContent style={{ paddingBottom: darkTheme.spacing(2) }} className={styles.flex1}>\n      {\n        props.editing\n          ? <TextField\n            value={props.roundNamesTextInput[props.index]}\n            label='Название раунда'\n            variant='outlined'\n            onChange={e => props.handleRoundNameChange(e, props.index)}\n            size='small'\n            className={styles.inputField}\n          />\n          : <Typography variant='body2' color='text.secondary' className={styles.flex2}>\n            Раунд {props.index+1}. {round.name}\n          </Typography>\n      }\n    </CardContent>\n  )\n}\n\nToolbar.propTypes = { handleRemoveRound: PropTypes.func }\nfunction Toolbar(props) {\n  return (\n    <IconButton onClick={props.handleRemoveRound} className={styles.delete}>\n      <MdDelete />\n    </IconButton>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdCancel, MdAdd, MdDone } from 'react-icons/md'\nimport cx from 'classnames'\nimport Button from '@mui/material/Button'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormControl from '@mui/material/FormControl'\nimport OutlinedInput from '@mui/material/OutlinedInput'\nimport InputAdornment from '@mui/material/InputAdornment'\nimport IconButton from '@mui/material/IconButton'\n\nAddItem.propTypes = {\n  onAdd: PropTypes.func,\n  inputLabel: PropTypes.string,\n  buttonLabel: PropTypes.string,\n  className: PropTypes.string\n}\nexport default function AddItem(props) {\n  const [addingItem, setAddingItem] = React.useState(false)\n\n  return (\n    <div className={[styles.addItem, props.className].join(' ')}>\n      <ItemName\n        setAddingItem={setAddingItem}\n        handleAddItem={props.onAdd}\n        className={cx(styles.button, { [styles.expand]: addingItem })}\n        addingItem={addingItem}\n        label={props.inputLabel}\n      />\n      <div className={cx([styles.button, styles.addButtonOuter], { [styles.expand]: !addingItem })}>\n        <Button\n          variant='contained'\n          startIcon={<MdAdd />}\n          onClick={() => setAddingItem(true)}\n          className={styles.addButton}\n        >{props.buttonLabel}</Button>\n      </div>\n    </div>\n  )\n}\n\nItemName.propTypes = {\n  setAddingItem: PropTypes.func,\n  handleAddItem: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  className: PropTypes.string,\n  addingItem: PropTypes.bool,\n  label: PropTypes.string\n}\n\nfunction ItemName(props) {\n  const [value, setValue] = React.useState('')\n  const outlinedInput = React.useRef()\n\n  const handleDone = () => {\n    props.setAddingItem(false)\n    if(value.length) {\n      props.handleAddItem(value)\n      setValue('')\n    }\n  }\n\n  React.useEffect(() => {\n    props.addingItem && outlinedInput.current.focus()\n  }, [props.addingItem])\n\n  return (\n    <FormControl variant='outlined' className={props.className}>\n      <InputLabel size=\"small\">{props.label}</InputLabel>\n      <OutlinedInput\n        label={props.label}\n        size='small'\n        type='text'\n        value={value}\n        onChange={e => setValue(e.target.value)}\n        onKeyDown={e => e.key === 'Enter' && handleDone()}\n        style={{ paddingRight: 0 }}\n        inputRef={outlinedInput}\n        endAdornment={\n          <InputAdornment position='end'>\n            <IconButton onClick={handleDone}>\n              {!value.length ? <MdCancel /> : <MdDone />}\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\nimport Typography from '@mui/material/Typography'\nimport listStyles from './styles.module.scss'\n\nItemsList.propTypes = {\n  droppableId: PropTypes.string,\n  droppableClassName: PropTypes.string,\n  draggableProps: PropTypes.object,\n  list: PropTypes.array,\n  itemComponent: PropTypes.func,\n  useIdAsKey: PropTypes.bool,\n  noItemsLabel: PropTypes.string,\n  onDragEnd: PropTypes.func\n}\n\nexport default function ItemsList(props) {\n  const [itemsMap, setItemsMap] = React.useState({ map: new WeakMap(), length: 0 })\n\n  return (\n    <DragDropContext onDragEnd={props.onDragEnd}>\n      <Droppable droppableId={props.droppableId}>\n        {provided => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className={props.droppableClassName}\n          >\n            {(() => {\n              const children = props.list.length\n                ? props.list.map((item, i) => {\n                  const oid = object => {\n                    if(!itemsMap.map.has(object)) itemsMap.map.set(object, ++itemsMap.length)\n                    return itemsMap.map.get(object)\n                  }\n\n                  return (\n                    <props.itemComponent\n                      key={props.useIdAsKey ? item.id : oid(item)}\n                      index={i}\n                      draggableId={props.useIdAsKey ? item.id : oid(item)}\n                      item={item}\n                      {...props.draggableProps}\n                    />\n                  )\n                })\n                : <Typography\n                  variant='body1'\n                  gutterBottom\n                  className={listStyles.noItems}\n                >{props.noItemsLabel}</Typography>\n              setItemsMap(itemsMap)\n              return children\n            })()}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport IconButton from '@mui/material/IconButton'\nimport { MdEdit, MdDone } from 'react-icons/md'\nimport Typography from '@mui/material/Typography'\n\nEditingToolbar.propTypes = {\n  showButton: PropTypes.boolean,\n  editing: PropTypes.boolean,\n  onSwitch: PropTypes.func,\n  heading: PropTypes.string\n}\nexport default function EditingToolbar(props) {\n  return (\n    <div className={styles.toolbar}>\n      <h2 className={styles.text}>{props.heading}</h2>\n      {props.showButton && props.editing && <>\n        <Typography color='text.secondary' className={styles.hint}>\n          Все изменения сохраняются автоматически\n        </Typography>\n      </>}\n      {props.showButton && <IconButton onClick={props.onSwitch}>{props.editing ? <MdDone /> : <MdEdit />}</IconButton>}\n    </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport Round from './Round'\nimport AddItem from 'components/ItemsList/AddItem'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport ItemsList from 'components/ItemsList'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../../utils'\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n  return result\n}\n\nexport default connect(mapPackState)(function RoundsList(props) {\n  const [rounds, setRounds] = React.useState(props.pack.rounds)\n  const [editing, setEditing] = React.useState(false)\n  const pack = props.pack\n\n  const handleAddRound = async name => {\n    let packRounds = [...pack.rounds]\n    packRounds.push({ name, themes: [] })\n    updateRounds(packRounds)\n  }\n\n  const handleRemoveRound = index => {\n    let packRounds = [...pack.rounds]\n    packRounds.splice(index, 1)\n    updateRounds(packRounds)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(rounds, result.source.index, result.destination.index)\n    updateRounds(items)\n  }\n\n  const handleSwitchEditing = () => {\n    setEditing(!editing)\n  }\n\n  const handleRoundNameChange = (e, index) => {\n    const namesList = [...rounds]\n    namesList[index].name = e.target.value\n    updateRounds(namesList)\n  }\n\n  const updateRounds = async items => {\n    setRounds(items)\n    let newPack = { ...pack, rounds: items }\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const names = rounds.map(pack => pack.name)\n\n  return (\n    <div className={styles.rounds}>\n      <EditingToolbar\n        showButton={Boolean(rounds.length)}\n        onSwitch={handleSwitchEditing}\n        editing={editing}\n        heading='Раунды пака'\n      />\n      <ItemsList\n        onDragEnd={onDragEnd}\n        droppableId='rounds'\n        droppableClassName={styles.droppable}\n        itemComponent={Round}\n        draggableProps={{\n          pack, editing,\n          handleRemoveRound: handleRemoveRound,\n          handleRoundNameChange: handleRoundNameChange,\n          roundNamesTextInput: names\n        }}\n        list={rounds}\n        noItemsLabel='Еще нет раундов'\n      />\n      <AddItem\n        onAdd={handleAddRound}\n        inputLabel='Название раунда'\n        buttonLabel='Добавить раунд'\n      />\n    </div>\n  )\n})\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { MdKeyboardArrowRight } from 'react-icons/md'\nimport cx from 'classnames'\nimport { mapPackState } from '../../../../utils'\n\nCheckList.propTypes = { pack: PropTypes.object }\nfunction CheckList(props) {\n  const hasAtLeast1Question = Boolean(\n    props.pack.rounds.some(round =>\n      round.themes.some(theme =>\n        theme.questions.length\n      )\n    )\n  )\n  const hasAtLeast1Theme = Boolean(\n    props.pack.rounds.some(round =>\n      round.themes.length\n    )\n  )\n  const has5ThemesInEachRound = props.pack.rounds.length && Boolean(\n    props.pack.rounds.every(round =>\n      round.themes.length >= 5\n    )\n  )\n  const hasAtLeast25Questions = Boolean(\n    props.pack.rounds.reduce(\n      (prev, round) => prev+round.themes.reduce(\n        (prev, theme) => prev+theme.questions.length, 0\n      ), 0\n    ) >= 25\n  )\n  const hasQuestionWithAuction = Boolean(\n    props.pack.rounds.some(\n      round => round.themes.some(\n        theme => theme.questions.some(\n          question => question.type === 'auction'\n        )\n      )\n    )\n  )\n  const hasQuestionWithBagCat = Boolean(\n    props.pack.rounds.some(\n      round => round.themes.some(\n        theme => theme.questions.some(\n          question => question.type === 'bagcat'\n        )\n      )\n    )\n  )\n\n  const items = {\n    required: [\n      { name: 'Добавить авторов пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.authors) },\n      { name: 'Установить язык пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.language) },\n      { name: 'Создать раунд', link: '/pack/%packUUID%/', done: Boolean(props.pack.rounds.length) },\n      { name: 'Создать тему', link: props.pack.rounds.length && '/pack/%packUUID%/rounds/1', done: hasAtLeast1Theme },\n      { name: 'Создать вопрос', link:\n        props.pack.rounds.length &&\n        props.pack.rounds[0].questions?.length &&\n        '/pack/%packUUID%/rounds/1/1',\n      done: hasAtLeast1Question }\n      //Установить равное колво вопросов во всех темах одного раунда\n    ],\n    optional: [\n      { name: 'Добавить иконку пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.icon) },\n      { name: 'Добавить теги пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.tags) },\n      { name: 'Добавить не менее 5 тем в каждом раунде', done: has5ThemesInEachRound },\n      { name: 'Добавить не менее 25 вопросов всего', done: hasAtLeast25Questions },\n      { name: 'Добавить вопрос со ставкой', done: hasQuestionWithAuction },\n      { name: 'Добавить вопрос Кот в мешке', done: hasQuestionWithBagCat },\n      { name: 'Сжать файлы, чтобы размер каждого был менее 1 МБ' }\n    ]\n  }\n  const filterItems = f => f.filter(item => item.done !== undefined)\n  const reducer = (progress, point) => progress+Number(point.done)\n  const progress = filterItems(items.required).reduce(reducer, 0) + filterItems(items.optional).reduce(reducer, 0)\n  const max = filterItems(items.required).length + filterItems(items.optional).length\n\n  return (\n    <div className={styles.container}>\n      <Typography variant='h6' className={styles.text}>Чеклист:</Typography>\n      <div className={styles.progress}>\n        <LinearProgress variant='determinate' value={progress/max*100} className={styles.progressBar} />\n        <Typography variant='subtitle1' color='text.secondary'>Выполнено: {progress} из {max}</Typography>\n      </div>\n      <ol className={styles.list}>\n        <Items starting>{items.required}</Items>\n        <div className={styles.caption}>\n          <span className={styles.line} />\n          <Typography variant='overline' className={styles.text}>Можно публиковать пак</Typography>\n          <span className={styles.line} />\n        </div>\n        <Items ending>{items.optional}</Items>\n      </ol>\n    </div>\n  )\n}\n\nfunction Items(props) {\n  return (\n    props.children.map((item, i) => <Item\n      key={i}\n      first={props.starting && i === 0}\n      last={props.ending && i === props.children.length-1}\n    >{item}</Item>)\n  )\n}\n\nMarker.propTypes = { first: PropTypes.bool, last: PropTypes.bool }\nItem.propTypes = { children: PropTypes.node, ...Marker.propTypes }\nfunction Item(props) {\n  const location = useLocation()\n  const path = location.pathname.split('/').filter(String)\n  const packUUID = path[1]\n  const link = props.children.link && props.children.link.replace('%packUUID%', packUUID)\n\n  return (\n    <li className={props.children.done && styles.done}>\n      <Marker first={props.first} last={props.last} />\n      { link\n        ? <Link to={link} className={styles.link}>\n          <span>{props.children.name}</span>\n          <MdKeyboardArrowRight/>\n        </Link>\n        : <span>{props.children.name}</span>\n      }\n    </li>\n  )\n}\n\nfunction Marker(props) {\n  return (\n    <span className={styles.marker}>\n      <span className={cx(styles.lineBefore, { [styles.hidden]: props.first })}/>\n      <span className={styles.bullet}/>\n      <span className={cx(styles.lineAfter, { [styles.hidden]: props.last })}></span>\n    </span>\n  )\n}\n\nexport default connect(mapPackState)(CheckList)\n","import styles from './styles.module.scss'\nimport RoundsList from './List/'\nimport CheckList from './CheckList/'\n\nexport default function Rounds() {\n  return (\n    <div className={styles.roundsPage}>\n      <RoundsList />\n      <CheckList />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdFilterList, MdDelete } from 'react-icons/md'\nimport Stack from '@mui/material/Stack'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Typography from '@mui/material/Typography'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { deleteFilesOfPack, getDeletedPacks } from 'localStorage/fileStorage'\n\nFilters.propTypes = {\n  packs: PropTypes.arrayOf(PropTypes.string),\n  checkboxes: PropTypes.arrayOf(PropTypes.bool),\n  onChange: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default function Filters(props) {\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleChange = (e, i) => {\n    const checkboxes = [...props.checkboxes]\n    checkboxes[i] = { ...checkboxes[i], checked: e.target.checked }\n    props.onChange(checkboxes)\n  }\n\n  const handleOpenMenu = uuid => e => {\n    contextMenuActions.open(\n      e,\n      [\n        {\n          name: 'Удалить',\n          icon: <MdDelete />,\n          action: async () => {\n            if(uuid === null) {\n              const deletedPacks = await getDeletedPacks()\n              await Promise.all(\n                deletedPacks.map(\n                  async packUUID => await deleteFilesOfPack(packUUID)\n                )\n              )\n            } else {\n              await deleteFilesOfPack(uuid)\n            }\n            props.reloadPacks()\n          }\n        }\n      ]\n    )\n  }\n\n  return (\n    <Stack className={styles.filters}>\n      <div className={styles.text}>\n        <MdFilterList />\n        <Typography variant='overline' color='text.secondary'>\n          Фильтры\n        </Typography>\n      </div>\n      {props.packs.map((pack, i) =>\n        <FormControlLabel\n          key={i}\n          control={\n            <Checkbox\n              checked={Boolean(props.checkboxes[i]?.checked)}\n              onChange={e => handleChange(e, i)}\n            />\n          }\n          className={styles.checkbox}\n          label={pack === null ? 'Удаленные паки' : pack.name}\n          onContextMenu={handleOpenMenu(pack === null ? null : pack.uuid)}\n        />\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport IconButton from '@mui/material/IconButton'\nimport { MdInfoOutline, MdDelete } from 'react-icons/md'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport Button from '@mui/material/Button'\nimport filesize from 'filesize'\nimport { symbols } from 'components/ImageField'\nimport { formatDate } from '../../utils'\nimport { deleteFile } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nFile.propTypes = {\n  file: PropTypes.object,\n  handleSelect: PropTypes.func,\n  onRemove: PropTypes.func\n}\n\nexport default function File(props) {\n  const [fileSrc, setFileSrc] = React.useState()\n  const [infoDialogueOpen, setInfoDialogueOpen] = React.useState(false)\n  const [removing, setRemoving] = React.useState(false)\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  React.useEffect(() => {\n    const src = URL.createObjectURL(props.file.miniature)\n    setFileSrc(src)\n    return () => URL.revokeObjectURL(src)\n  }, [props.file.miniature])\n\n  const handleSelect = () => props.handleSelect(props.file.fileURI)\n\n  const handleShowInfo = e => {\n    e.stopPropagation()\n    setInfoDialogueOpen(true)\n  }\n\n  const handleCloseInfo = e => {\n    if(removing) return false\n    e.stopPropagation()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleDeleteFile = async () => {\n    const fileURI = props.file.fileURI\n    setRemoving(true)\n    await deleteFile(fileURI)\n    store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI })\n    setRemoving(false)\n    props.onRemove()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeleteFile() }\n    ])\n  }\n\n  return (\n    <>\n      <Grid\n        item xs={4} md={6} sm={12}\n        className={styles.item}\n        onClick={handleSelect}\n        onContextMenu={handleOpenMenu}\n      >\n        <div className={styles.itemInner}>\n          <IconButton\n            className={styles.button}\n            size='small'\n            onClick={handleShowInfo}\n          >\n            <MdInfoOutline />\n          </IconButton>\n          <div className={styles.preview}>\n            <img src={fileSrc} className={styles.foreground} />\n            <img src={fileSrc} className={styles.background} />\n          </div>\n          <div className={styles.fileName}>{props.file.fileName}</div>\n        </div>\n      </Grid>\n      <Dialog\n        open={infoDialogueOpen}\n        onClose={handleCloseInfo}\n      >\n        <DialogTitle className={styles.title}>Информация о файле {props.file.filename}</DialogTitle>\n        <DialogContent>\n          <p>Размер файла: <b>{filesize(props.file.blob.size, { symbols })}</b></p>\n          <p>Дата добавления: <b>{formatDate(new Date(props.file.addedAt))}</b></p>\n          <Button\n            variant='contained'\n            className={styles.delete}\n            onClick={handleDeleteFile}\n            disabled={removing}\n          >Удалить файл</Button>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport { getRecent } from 'localStorage/fileStorage'\nimport File from './File'\nimport Typography from '@mui/material/Typography'\n\nList.propTypes = {\n  packs: PropTypes.array,\n  handleSelect: PropTypes.func\n}\n\nexport default function List(props) {\n  const [files, setFiles] = React.useState([])\n\n  React.useEffect(() => { mapFiles() }, [props.packs])\n\n  const mapFiles = async () => {\n    const files = await getRecent(Object.keys(props.packs))\n    const mappedFiles = []\n    let packSwitchUUID\n    for (let file of files) {\n      if(packSwitchUUID !== file.packUUID){\n        packSwitchUUID = file.packUUID\n        mappedFiles.push({\n          packName: props.packs[packSwitchUUID],\n          files: [file]\n        })\n      } else {\n        mappedFiles[mappedFiles.length - 1].files.push(file)\n      }\n    }\n    setFiles(mappedFiles)\n  }\n\n  return (\n    <div className={styles.list}>\n      <div className={styles.content}>\n        {\n          files.length\n            ? files.map((packGroup, i) => <div key={i}>\n              <div className={styles.packDivider}>\n                {packGroup.packName\n                  ? <>Пак <b>{packGroup.packName}</b></>\n                  : <>Удаленный пак</>\n                }\n              </div>\n              <Grid container spacing={2} className={styles.grid}>\n                {packGroup.files.map((file, j) =>\n                  <File\n                    file={file}\n                    key={`${i}_${j}`}\n                    handleSelect={props.handleSelect}\n                    onRemove={mapFiles}\n                  />\n                )}\n              </Grid>\n            </div>)\n            : <div className={styles.noFilesYet}>\n              <Typography className={styles.hint}>Файлы не найдены</Typography>\n              <Typography className={styles.hint}>Попробуйте изменить фильтры</Typography>\n              <Typography className={styles.hint}>Загрузите файлы во вкладке Загрузка</Typography>\n            </div>\n        }\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dropzone from 'react-dropzone'\nimport styles from './styles.module.scss'\nimport { MdFileUpload, MdDone } from 'react-icons/md'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { saveFile, allowedFileTypes } from 'localStorage/fileStorage'\nimport Button from '@mui/material/Button'\n\nUpload.propTypes = {\n  packUUID: PropTypes.string,\n  setTab: PropTypes.func\n}\n\nexport default function Upload(props) {\n  const [uploading, setUploading] = React.useState(false)\n  const [uploadingFileIndex, setUploadingFileIndex] = React.useState()\n  const [filesListLength, setFilesListLength] = React.useState()\n  const [errors, setErrors] = React.useState([])\n  const [uploaded, setUploaded] = React.useState(false)\n\n  const handleDrop = async files => {\n    setUploaded(false)\n    setUploading(true)\n    setFilesListLength(files.length)\n    const errors = []\n    let hasErrors = false\n    for (let fileIndex in files) {\n      setUploadingFileIndex(Number(fileIndex)+1)\n      const file = files[fileIndex]\n      file.filename = file.name\n      try {\n        await saveFile(file, props.packUUID)\n      } catch(e) {\n        console.error(e)\n        hasErrors = true\n        setErrors(errors.concat({ filename: file.name, errorMessage: e }))\n      }\n    }\n    setUploaded(true)\n    if(!hasErrors) {\n      setUploading(false)\n      props.setTab('added')\n    }\n  }\n\n  return (\n    !uploading\n      ? <Dropzone\n        onDropAccepted={handleDrop}\n        accept={allowedFileTypes}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <div className={styles.dropzone} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span className={styles.flex}><MdFileUpload /> Загрузить медиа-файл</span>\n            <span className={styles.supportedTypes}>\n              <span>Поддерживаемые типы файлов:</span>\n              <span>Фото: png, jpeg, gif</span>\n              <span>Аудио: mp3, wav, ogg</span>\n              <span>Видео: mp4</span>\n            </span>\n          </div>\n        )}\n      </Dropzone>\n      : <div className={styles.uploadingFiles}>\n        <div className={styles.uploadingScreen}>\n          <div className={styles.uploadingCaption}>\n            { !uploaded\n              ? <>\n                <CircularProgress size={20} thickness={10} />\n                <span className={styles.caption}>Загрузка файла {uploadingFileIndex} из {filesListLength}</span>\n              </>\n              : <>\n                <MdDone />\n                <span className={styles.caption}>{errors.length < filesListLength ? 'Файлы загружены' : 'Операция завершена'}</span>\n              </>\n            }\n          </div>\n          {Boolean(errors.length) && <div className={styles.errors}>\n            <span>Ошибки во время загрузки файлов:</span>\n            {errors.map((error, i) => <span key={i}>Файл «{error.filename}»: {\n              {\n                'File with such hash already exist': 'Такой файл уже загружен в этот пак'\n              }[error.errorMessage]\n            }</span>)}\n          </div>}\n          {uploaded && <Button variant='contained' onClick={() => setUploading(false)}>ОК</Button>}\n        </div>\n      </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport IconButton from '@mui/material/IconButton'\nimport DialogContent from '@mui/material/DialogContent'\nimport { MdClose } from 'react-icons/md'\nimport { emptyFunc } from '../../utils'\nimport Filters from './Filters'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nimport { getDeletedPacks } from 'localStorage/fileStorage'\nimport List from './List'\nimport Tabs from '@mui/material/Tabs'\nimport Tab from '@mui/material/Tab'\nimport Upload from './Upload'\n\nconst FileStorage = React.forwardRef((props, ref) => {\n  const [tab, setTab] = React.useState('added')\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => emptyFunc)\n  const [packs, setPacks] = React.useState([])\n  const [packUUID, setPackUUID] = React.useState([])\n  const [checkboxes, setCheckboxes] = React.useState([])\n\n  const handleClose = () => {\n    setOpen(false)\n    setCallback(() => emptyFunc)\n  }\n\n  const handleSelect = selectedFile => {\n    handleClose()\n    setTimeout(() => callback(selectedFile), 1)\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    async open(packUUID, callback) {\n      setCallback(() => callback)\n      await loadPacks()\n      setOpen(true)\n      setPackUUID(packUUID)\n    }\n  }))\n\n  const loadPacks = async () => {\n    const packs = await loadLocalPacks()\n    const deletedPacks = await getDeletedPacks()\n    if(deletedPacks.length) packs.push(null)\n    setPacks(packs)\n    setCheckboxes(\n      packs.map(\n        pack => {\n          const deletedPack = pack === null\n          const packUUID = deletedPack ? null : pack.uuid\n          const checked = checkboxes.find(({ uuid }) => uuid === packUUID)?.checked\n          return (\n            {\n              uuid: packUUID,\n              checked: checked !== undefined\n                ? Boolean(checked)\n                : !deletedPack\n            }\n          )\n        }\n      )\n    )\n  }\n\n  const filteredPacks = Object.fromEntries(checkboxes\n    .filter(cb => cb.checked)\n    .map(checkedPack => ([checkedPack.uuid,\n      checkedPack.uuid === null\n        ? 'Удаленные паки'\n        : packs.find(pack => pack.uuid === checkedPack.uuid)?.name\n    ])\n    )\n  )\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n    >\n      <DialogTitle className={styles.title}>\n        <span>Хранилище файлов</span>\n        <IconButton\n          onClick={handleClose}\n          className={styles.close}\n          sx={{ color: theme => theme.palette.grey[500] }}\n        >\n          <MdClose />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent className={styles.dialog}>\n        <Tabs\n          value={tab} variant='fullWidth'\n          onChange={(_, tab) => setTab(tab)}\n          textColor='inherit'\n          className={styles.tabs}\n        >\n          <Tab label='Добавленные' value='added' />\n          <Tab label='Загрузить' value='upload' />\n        </Tabs>\n        {\n          tab === 'added' &&\n          <div className={styles.files}>\n            <Filters\n              packs={packs}\n              checkboxes={checkboxes}\n              onChange={setCheckboxes}\n              reloadPacks={loadPacks}\n            />\n            <List\n              packs={filteredPacks}\n              handleSelect={handleSelect}\n            />\n          </div>\n        }\n        {\n          tab === 'upload' &&\n          <div className={styles.upload}>\n            <Upload packUUID={packUUID} setTab={setTab} />\n          </div>\n        }\n      </DialogContent>\n    </Dialog>\n  )\n})\n\nFileStorage.displayName = 'FileStorage'\nexport default FileStorage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport { getFile } from 'localStorage/fileStorage'\nimport filesize from 'filesize'\nexport const symbols = { B: 'Б', kB: 'кБ', MB: 'МБ', GB: 'ГБ', TB: 'ТБ', PB: 'ПБ', EB: 'ЭБ', ZB: 'ЗБ', YB: 'ЙБ' }\nimport FileStorage from 'components/FileStorage'\nimport { connect } from 'react-redux'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { MdErrorOutline } from 'react-icons/md'\nimport store from 'reducers/index'\n\nImageField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  name: PropTypes.string,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func,\n  onChange: PropTypes.func,\n}\n\nfunction ImageField(props) {\n  const [src, setSrc] = React.useState({})\n  const [srcUrl, setSrcUrl] = React.useState(null)\n  const [noFile, setNoFile] = React.useState(false)\n  const fileStorage = React.useRef()\n\n  React.useEffect(() => {\n    if(!src.fileURI) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: src.fileURI, callback: () => setNoFile(true) })\n  }, [setNoFile])\n\n  React.useEffect(() => {\n    const fileURI = props.value\n    let cleanup = () => {}\n    setSrcUrl()\n    if(fileURI) {\n      (async () => {\n        const file = await getFile(fileURI)\n        if(!file) return setNoFile(true)\n\n        setNoFile(false)\n\n        const blob = file.miniature\n        const name = file.fileName\n        const size = blob.size\n        setSrc({ name, size })\n\n        const url = URL.createObjectURL(blob)\n        setSrcUrl(url)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: file.fileURI, callback: () => setNoFile(true) })\n\n        cleanup = () => {\n          URL.revokeObjectURL(url)\n          store.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: file.fileURI })\n        }\n      })()\n    } else {\n      setSrc({})\n      setSrcUrl(null)\n    }\n    return () => cleanup()\n  }, [props.value])\n\n  const handleClick = async () => {\n    let result = await new Promise(resolve => fileStorage.current.open(props.pack.uuid, resolve))\n    if(!result) { return }\n    props.onChange(result)\n  }\n\n  const handleClear = () => {\n    setNoFile(false)\n    props.onChange(undefined)\n  }\n\n  return (\n    <div className={styles.container}>\n      <Typography\n        variant='body'\n        color='text.primary'\n        gutterBottom\n        className={styles.label}\n      >{props.label}:</Typography>\n      <div className={styles.preview}>\n        { srcUrl === null\n          ? <Placeholder onClick={handleClick} />\n          : noFile\n            ? <FileMissingIcon onClick={handleClick} />\n            : srcUrl !== undefined\n              ? <Image src={src} srcUrl={srcUrl} label={props.label} onClick={handleClick} />\n              : <Loading />\n        }\n        <div className={styles.info}>\n          { noFile\n            ? <FileMissing />\n            : src.size\n              ? <FileInfo src={src} />\n              : <FileNotSelected />\n          }\n          <Button\n            variant='contained'\n            onClick={handleClear}\n            disabled={!srcUrl && !noFile}\n          >Очистить поле</Button>\n        </div>\n      </div>\n      <FileStorage ref={fileStorage} />\n    </div>\n  )\n}\n\nPlaceholder.propTypes = FileMissingIcon.propTypes = { onClick: PropTypes.func }\nfunction Placeholder({ onClick }) {\n  return (\n    <div className={styles.placeholder} onClick={onClick}>\n      <span>Нажмите, чтобы выбрать</span>\n    </div>\n  )\n}\n\nfunction FileMissingIcon({ onClick }) {\n  return (\n    <div className={styles.fileMissing} onClick={onClick}>\n      <MdErrorOutline className={styles.icon} />\n    </div>\n  )\n}\n\nfunction FileMissing() {\n  return (\n    <span>\n      Файл не найден. Вероятно, вы выбрали его, но затем удалили из хранилища файлов.\n    </span>\n  )\n}\n\nFileInfo.propTypes = { src: PropTypes.object }\nfunction FileInfo({ src }) {\n  return (\n    <>\n      <span>Название файла: {src.name}</span>\n      <span>Размер файла: {filesize(src.size, { symbols })}</span>\n    </>\n  )\n}\n\nfunction FileNotSelected() {\n  return (\n    <>\n      <span>Файл не выбран</span>\n      <span>Выберете файл, нажав на кнопку левее.</span>\n    </>\n  )\n}\n\nfunction Loading() {\n  return (\n    <div className={styles.loading}>\n      <CircularProgress />\n    </div>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.object,\n  srcUrl: PropTypes.string,\n  onClick: PropTypes.func,\n  label: PropTypes.string\n}\nfunction Image({ src, srcUrl, onClick, label }) {\n  return (\n    <img\n      src={srcUrl}\n      alt={srcUrl ? `Изображение для поля ${label} с именем «${src.name}»` : ''}\n      onClick={onClick}\n      className={styles.image}\n    />\n  )\n}\n\nexport default connect(state => ({ pack: state.pack, fileRendering: state.fileRendering }))(ImageField)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport TextField from '@mui/material/TextField'\nimport Autocomplete from '@mui/material/Autocomplete'\nimport MenuItem from '@mui/material/MenuItem'\nimport Select from '@mui/material/Select'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormHelperText from '@mui/material/FormHelperText'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Slider from '@mui/material/Slider'\nimport styles from './styles.module.scss'\nimport ImageField from 'components/ImageField'\n\nconst formikMuiErrors = (formik, name) => ({\n  error: formik.touched[name] && Boolean(formik.errors[name]),\n  helperText: formik.touched[name] && formik.errors[name]\n})\n\nFormikTextField.propTypes =\nFormikAutocomplete.propTypes =\nFormikCheckbox.propTypes =\nFormikImageField.propTypes =\n{\n  name: PropTypes.string,\n  formik: PropTypes.object\n}\n\nexport function FormikTextField(props) {\n  const { name, formik, ...fieldProps } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <TextField\n      name={name}\n      value={formik.values[name]}\n      onChange={handleChange}\n      {...formikMuiErrors(formik, name)}\n      {...fieldProps}\n    />\n  )\n}\n\n\nexport function FormikAutocomplete(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = (_, value) => {\n    formik.setFieldValue(name, value.map(v => v.replaceAll(',', '') || '.').join(','))\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  let value = formik.values[name].split(',')\n  if(value.length === 1 && value[0] === '') value = []\n\n  const handleKeyDown = e => {\n    if(e.key === 'Enter') {\n      e.preventDefault()\n    }\n  }\n\n  return (\n    <Autocomplete\n      {...field}\n      multiple\n      options={[]}\n      value={value}\n      getOptionLabel={(option) => option}\n      freeSolo clearOnBlur={true}\n      onChange={handleChange}\n      renderInput={props => (\n        <TextField\n          {...field}\n          {...props}\n          {...formikMuiErrors(formik, name)}\n          placeholder='Нажмите Enter, чтобы добавить'\n          onKeyDown={handleKeyDown}\n        />\n      )}\n    />\n  )\n}\n\nFormikSelect.propTypes = { ...FormikTextField.propTypes, options: PropTypes.object }\nexport function FormikSelect(props) {\n  const { formik, name, options, ...field } = props\n  const error = { error: formik.touched[name] && Boolean(formik.errors[name]) }\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel {...error}>{props.label}</InputLabel>\n      <Select\n        {...field}\n        name={name}\n        value={formik.values[name]}\n        onChange={handleChange}\n        {...error}\n      >\n        {Object.entries(options).map(([id, label]) => <MenuItem value={id} key={id}>{label}</MenuItem>)}\n      </Select>\n      <FormHelperText error>{formik.touched[name] && formik.errors[name]}</FormHelperText>\n    </FormControl>\n  )\n}\n\nexport function FormikCheckbox(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          name={name}\n          checked={formik.values[name]}\n          onChange={handleChange}\n        />\n      }\n      {...field}\n    />\n  )\n}\n\nFormikSlider.propTypes = {\n  ...FormikTextField.propTypes,\n  defaultValue: PropTypes.number,\n}\nexport function FormikSlider(props) {\n  const { formik, name, ...field } = props\n  const [value, setValue] = React.useState(formik.values[name])\n\n  const handleChange = e => {\n    setValue(e.target.value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  React.useEffect(() => formik.setFieldValue(name, value), [value])\n\n  return (\n    <div className={styles.slider}>\n      <span>{field.label}</span>\n      <Slider\n        name={name}\n        value={value}\n        onChange={handleChange}\n        valueLabelDisplay='auto'\n        marks\n        {...field}\n      />\n    </div>\n  )\n}\n\nexport function FormikImageField(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = fileURI => {\n    formik.setFieldValue(name, fileURI)\n    let touched\n    if(fileURI !== undefined) {\n      touched = { ...formik.touched, [name]: true }\n    } else {\n      const formikTouched = { ...formik.touched }\n      delete formikTouched[name]\n      touched = formikTouched\n    }\n    formik.setTouched(touched)\n  }\n\n  return (\n    <ImageField\n      {...field}\n      value={formik.values[name]}\n      onChange={handleChange}\n    />\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport * as yup from 'yup'\nimport { componentsPropTypes, format } from '../../../consts'\nimport {\n  FormikTextField,\n  FormikAutocomplete,\n  FormikSelect,\n  FormikCheckbox,\n  FormikSlider,\n  FormikImageField\n} from 'components/FormikField'\nimport { connect } from 'react-redux'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport { useHistory, Prompt } from 'react-router-dom'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { mapPackState } from '../../../utils'\n\nconst schema = {\n  logo: yup\n    .string('Добавьте логотип пака'),\n  name: yup\n    .string('Введите название пака')\n    .required('Заполните поле названия'),\n  authors: yup\n    .string('Введите ваш никнейм')\n    .required('Заполните поле автора'),\n  publisher: yup\n    .string('Введите издателя'),\n  difficulty: yup\n    .number('Выберете сложность пака')\n    .positive()\n    .min(1)\n    .max(10)\n    .integer('Число должно быть целым')\n    .required('Заполните поле сложности'),\n  comment: yup\n    .string('Введите комментарий'),\n  tags: yup\n    .string('Введите теги'),\n  language: yup\n    .string('Введите язык пака')\n    .required('Заполните поле язык'),\n  over18: yup\n    .bool('Введите ограничения пака')\n}\nconst validationSchema = yup.object(schema)\n\nSettings.propTypes = {\n  pack: PropTypes.shape(componentsPropTypes),\n  dispatch: PropTypes.func\n}\n\nfunction Settings(props) {\n  const initialValues = {}\n  Object.keys(schema).forEach(key => initialValues[key] = props.pack[key] || '')\n  const [submitting, setSubmitting] = React.useState(false)\n  const history = useHistory()\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema: validationSchema,\n    onSubmit: async (values) => {\n      setSubmitting(true)\n      let pack = { ...props.pack, ...values }\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}`)\n    },\n  })\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormikTextField\n          name='name'\n          formik={formik}\n          label='Название'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='authors'\n          formik={formik}\n          label='Авторы'\n          disabled={submitting}\n        />\n        <FormikImageField\n          name='logo'\n          formik={formik}\n          label='Логотип'\n        />\n        <FormikTextField\n          name='publisher'\n          formik={formik}\n          label='Издатель пака (необязательно)'\n          disabled={submitting}\n        />\n        <FormikSlider\n          name='difficulty'\n          label='Сложность'\n          formik={formik}\n          disabled={submitting}\n          step={1} min={1} max={10}\n        />\n        <FormikSelect\n          name='language'\n          formik={formik}\n          label='Язык пака'\n          options={{\n            '': 'Не указано',\n            'ru-RU': 'Русский (ru-RU)',\n            'en-US': 'Английский (en-US)'\n          }}\n          disabled={submitting}\n        />\n        <FormikTextField\n          name='comment'\n          formik={formik}\n          label='Описание (необязательно)'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='tags'\n          formik={formik}\n          label='Теги (необязательно)'\n          disabled={submitting}\n        />\n        <FormikCheckbox\n          name='over18'\n          formik={formik}\n          label='Добавить метку 18+'\n          disabled={submitting}\n        />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={submitting}\n        >\n          Сохранить\n        </Button>\n      </form>\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n      <div className={styles.info}>\n        <ul>\n          <li>Версия XML для описания формата: <span>{format.xmlVersion}</span></li>\n          <li>Кодировка текста в формате: <span>{format.encoding}</span></li>\n          <li>Версия формата: <span>{props.pack.version}</span></li>\n          <li>UUID: <span>{props.pack.uuid}</span></li>\n          <li>Дата создания: <span>{props.pack.date}</span></li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Settings)\n","import Typography from '@mui/material/Typography'\nimport styles from './styles.module.scss'\n\nexport default function NotFound404() {\n  return (\n    <div className={styles.centered}>\n      <Typography variant='h1'>Страница не найдена</Typography>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport TableBody from '@mui/material/TableBody'\nimport Paper from '@mui/material/Paper'\nimport ButtonBase from '@mui/material/ButtonBase'\nimport { useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\n\nRoundTable.propTypes = { themes: PropTypes.array }\nexport default function RoundTable(props) {\n  const { url } = useRouteMatch()\n\n  return (\n    <TableContainer\n      component={Paper}\n      className={styles.table}\n    >\n      <Table>\n        <TableBody>\n          {props.themes.map((row, i) => (\n            <TableRow\n              key={i}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            >\n              <TableCell component='th' scope='row' style={{ minWidth: '30%' }}>{row.name}</TableCell>\n              {\n                row.questions.length\n                  ? row.questions.map((question, j) =>\n                    <TableCell key={j} className={styles.tableCell}>\n                      <Link to={`${url}/themes/${i+1}/questions/${question.price}`}>\n                        <ButtonBase className={styles.buttonBase}>\n                          {question.price}\n                        </ButtonBase>\n                      </Link>\n                    </TableCell>)\n                  : <TableCell align='right'>\n                    <span className={styles.noItemsYet}>Еще нет вопросов</span>\n                  </TableCell>\n              }\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableBody from '@mui/material/TableBody'\nimport TableHead from '@mui/material/TableHead'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport { MdImage, MdDone, MdMusicNote, MdVideocam, MdAdd } from 'react-icons/md'\nimport { useHistory, useRouteMatch } from 'react-router'\nimport Button from '@mui/material/Button'\nimport { connect } from 'react-redux'\nimport { mapPackState, questionTypes } from '../../../utils'\n\n\nItemContent.propTypes = {\n  themeIndex: PropTypes.number,\n  theme: PropTypes.object,\n  pack: PropTypes.object\n}\n\nfunction ItemContent(props) {\n  const history = useHistory()\n  const route = useRouteMatch()\n\n  const sortedQuestions = props.theme.questions.sort((a,b) => a.price - b.price)\n\n  const questionType = type => questionTypes[type] || type\n\n  const handleOpenQuestion = price => () => {\n    history.push(`${route.url}/themes/${props.themeIndex+1}/questions/${price}`)\n  }\n\n  return (\n    <>\n      <TableContainer>\n        <Table sx={{ minWidth: 650 }}>\n          <TableHead>\n            <TableRow>\n              <TableCell>Цена</TableCell>\n              <Cell wp={10}>Текст</Cell>\n              <Cell wp={9}>Ответ</Cell>\n              <Cell wp={4}>Вид вопроса</Cell>\n              <Cell wp={1}><MdImage /></Cell>\n              <Cell wp={1}><MdMusicNote /></Cell>\n              <Cell wp={1}><MdVideocam /></Cell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {sortedQuestions.map((question, i) => (\n              <TableRow\n                key={i}\n                className={styles.tableRow}\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                hover\n                onClick={handleOpenQuestion(question.price)}\n              >\n                <TableCell component='th' scope='row'>{question.price}</TableCell>\n                <Cell wp={10}>{question.text}</Cell>\n                <Cell wp={10}>{question.answer}</Cell>\n                <Cell wp={3}>{questionType(question.type)}</Cell>\n                <Cell wp={1}>{question.image && <MdDone />}</Cell>\n                <Cell wp={1}>{question.audio && <MdDone />}</Cell>\n                <Cell wp={1}>{question.movie && <MdDone />}</Cell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Button\n        color='primary'\n        startIcon={<MdAdd />}\n      >Создать вопрос</Button>\n    </>\n  )\n}\n\nCell.propTypes = { wp: PropTypes.number, children: PropTypes.node }\nfunction Cell(props) {\n  return (\n    <TableCell align='right' style={{ width: props.wp/26*100+'%' }}>{props.children}</TableCell>\n  )\n}\n\nexport default connect(mapPackState)(ItemContent)\n","import PropTypes from 'prop-types'\n\nconst ClickIsolator = props => (\n  <div onClick={e => e.stopPropagation()} {...props}>{props.children}</div>\n)\n\nClickIsolator.propTypes = { children: PropTypes.any }\nClickIsolator.displayName = 'ClickIsolator'\nexport default ClickIsolator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport ItemContent from './Questions'\nimport Item from 'components/ItemsList/Item'\nimport { connect } from 'react-redux'\nimport { MdDelete, MdExpandMore } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport ClickIsolator from 'components/ClickIsolator'\nimport { mapPackState } from '../../../utils'\nimport Handle from 'components/ItemsList/Handle'\n\nTheme.propTypes = {\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  expandId: PropTypes.number,\n  setExpand: PropTypes.func,\n  draggableId: PropTypes.string,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.string,\n}\n\nfunction Theme(props) {\n  const theme = props.item\n  const expand = props.draggableId === props.expandId\n  const [themeName, setThemeName] = React.useState(theme.name)\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.handleRemoveTheme(props.index)\n  }\n\n  const handleChangeThemeName = e => {\n    const newThemeName = e.target.value\n    setThemeName(newThemeName)\n    props.handleChangeThemeName(props.index, newThemeName)\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={theme.id.toString()}\n    >\n      {(provided) => <Accordion\n        expanded={expand}\n        onChange={(_, isExpand) => props.setExpand(isExpand ? theme.id : undefined)}\n      >\n        <AccordionSummary\n          expandIcon={<MdExpandMore />}\n        >\n          <div className={styles.toolbar}>\n            <Handle provided={provided} />\n            <ClickIsolator className={styles.name}>\n              <TextField\n                value={themeName}\n                label='Название темы'\n                variant='outlined'\n                onChange={handleChangeThemeName}\n                size='small'\n                fullWidth\n              />\n            </ClickIsolator>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <ItemContent theme={theme} themeIndex={props.index} />\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n\nexport default connect(mapPackState)(Theme)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport AddItem from 'components/ItemsList/AddItem'\nimport ItemsList from 'components/ItemsList'\nimport Theme from './Theme'\n\nThemesEditing.propTypes = {\n  onDragEnd: PropTypes.func,\n  themes: PropTypes.array,\n  expand: PropTypes.bool,\n  setExpand: PropTypes.func,\n  setEditing: PropTypes.func,\n  handleAddTheme: PropTypes.func,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.func\n}\nexport default function ThemesEditing(props) {\n  return (\n    <>\n      <ItemsList\n        droppableId='themes'\n        onDragEnd={props.onDragEnd}\n        list={props.themes}\n        draggableProps={{\n          setExpand: props.setExpand,\n          handleRemoveTheme: props.handleRemoveTheme,\n          handleChangeThemeName: props.handleChangeThemeName,\n          expandId: props.expand\n        }}\n        noItemsLabel='Еще нет созданных тем'\n        itemComponent={Theme}\n        useIdAsKey={true}\n      />\n      <AddItem\n        onAdd={props.handleAddTheme}\n        inputLabel='Название темы'\n        buttonLabel='Добавить тему'\n        className={styles.addTheme}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { uuidRegex } from '../../../consts'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport clone from 'just-clone'\nimport NotFound404 from 'components/NotFound404'\nimport RoundTable from './RoundTable'\nimport ThemesEditing from './ThemesEditing'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../utils'\n\nRoundThemes.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundThemes(props) {\n  const [themes, setThemes] = React.useState([])\n  const [found, setFound] = React.useState()\n  const route = useLocation()\n  const roundIndex = route.pathname.split(new RegExp(`/pack/${uuidRegex}/rounds/`), 2)[1]\n  const [expand, setExpand] = React.useState()\n  let [editing, setEditing] = React.useState(false)\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const round = props.pack.rounds[roundIndex-1]\n  React.useEffect(() => {\n    if(round) setFound(true)\n    else setFound(false)\n  }, [])\n\n  const handleAddTheme = async name => {\n    let roundThemes = [...themes]\n    roundThemes.push({ name, id: Date.now(), questions: [{\n      price: 100,\n      text: 'Сколько у вити чела игр в сторах?',\n      answer: '3',\n      type: 'simple'\n    },\n    {\n      price: 200,\n      image: 'ihskdab,jsakjd',\n      answer: 'Stigfinnare',\n      type: 'auction'\n    }] })\n    updateThemes(roundThemes)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(themes, result.source.index, result.destination.index)\n    updateThemes(items)\n  }\n\n  const updateThemes = async items => {\n    setThemes(items)\n    const newPack = clone(props.pack)\n    newPack.rounds[roundIndex-1].themes = items\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const handleRemoveTheme = index => {\n    let roundThemes = [...themes]\n    roundThemes.splice(index, 1)\n    updateThemes(roundThemes)\n  }\n\n  const handleChangeThemeName = (index, newName) => {\n    let roundThemes = [...themes]\n    roundThemes[index].name = newName\n    updateThemes(roundThemes)\n  }\n\n  React.useEffect(() => {\n    round && setThemes(round.themes)\n  }, [])\n\n  return (\n    found !== undefined && (\n      found\n        ? <div>\n          <EditingToolbar\n            showButton={true}\n            onSwitch={() => setEditing(!editing)}\n            editing={editing}\n            heading={`Темы и вопросы раунда ${round.name}`}\n          />\n          {themes.length && !editing\n            ? <RoundTable\n              themes={themes}\n            />\n            : <ThemesEditing\n              themes={themes}\n              onDragEnd={onDragEnd}\n              expand={expand}\n              setExpand={setExpand}\n              setEditing={setEditing}\n              handleAddTheme={handleAddTheme}\n              handleRemoveTheme={handleRemoveTheme}\n              handleChangeThemeName={handleChangeThemeName}\n            />\n          }\n        </div>\n        : <NotFound404 />\n    )\n  )\n}\n\nexport default connect(mapPackState)(RoundThemes)\n","export const questionPriceHint = <p>\n  <b>Стоимость вопроса</b> — это число очков, обычно кратное 100, которое получает игрок\n  в случае правильного ответа и теряет в случае неправильного ответа (за исключением ответа на Вопрос без риска).\n  Это число отображается в таблице раунда.\n</p>\n\nexport const questionTypesHint = <>\n  <p>\n    <b>Обычный</b> — Этот вопрос задаётся, затем у всех игроков есть время, чтобы подумать и нажать на кнопку.\n    Нажавший раньше остальных отвечает. В случае верного ответа стоимость вопроса прибавляется к счёту\n    игрока, в случае неверного - стоимость вопроса снимается со счёта игрока. В случае неверного ответа\n    кнопку снова могут жать не отвечавшие игроки.\n  </p>\n  <p>\n    <b>Аукцион</b> — При розыгрыше этого вопроса игроки последовательно, в порядке возрастания сумм (но начиная\n    с того, кому вопрос достался), делают ставки, перекрывая ставки оппонентов. Минимальная ставка равна\n    номинальной стоимости вопроса. Можно сказать «Пас» и выйти из торгов. Можно пойти «ва-банк» —\n    поставить всё на кон. Ва-банк перекрывает все простые ставки, но пойти ва-банк можно только\n    перекрывая по сумме предыдущую ставку. Тот, кто поставит больше остальных, будет единилично\n    играть этот вопрос без возможности отказаться. Стоимость вопроса равна стоимости ставки играющего.\n  </p>\n  <p>\n    <b>С секретом</b> — Тот, кому достался вопрос, обязан передать его другом игроку, и последний обязан\n    ответить на полученный вопрос. Вопрос имеет собственную тему и стоимость, неизвестную до отдачи.\n  </p>\n  <p>\n    <b>Кот в мешке</b> — На этот вопрос отвечает 1 человек. Отвечающего назначает открывший вопрос игрок.\n    У вопроса имеется собственная тема и стоимость.\n  </p>\n  <p>\n    <b>Без риска</b> — На этот вопрос отвечает только игрок, открывший его. В случае правильного ответа\n    он зарабатывает сумму, равную удвоенному номиналу вопроса. В случае неверного ответа он ничего не теряет.\n  </p>\n</>\n\nexport const realPriceHint = 'Раннее указанная стоимость отображается в таблице с темами, в то время как настоящая стоимость влияет на счет игроков после ответа. Это поле действует лишь для вопросов с секретом и кот в мешке'\n\nexport const bagcatRealPriceTypeHint = <>\n  <p>\n    У вопроса Кот в мешке существует «настоящая стоимость», которая влияет на счет игроков после ответа, в отличии\n    от обычной стоимости, которая отображается в таблице раунда.\n  </p>\n  <p>\n    Настоящая стоимость для каждого вопроса может быть фиксированной или определяться в течение игры. Если вы выберете\n    <b>фиксированную настоящую стоимость</b>, вам необходимо будет указать ее ниже.\n  </p>\n  <p>\n    Во втором случае, настоящая стоимость выбирается игроком, на выбор которому дается два варианта: наименьшая и\n    наибольшая стоимость из всех вопросов в раунде.\n  </p>\n  <p>\n    Третий вариант это когда настоящая стоимость вопроса выбирается игроком в заданном вам интервале с заданным вами шагом.\n    Если шаг не указан, выбирать можно только крайние значения\n  </p>\n</>\n\nexport const scenarioHint = <p>\n  У каждого вопроса есть <b>сценарий</b> — порядок действий, выполняемый при выборе вопроса.\n  Большинству вопросов достаточно одного события в сценарии — текста, изображения, аудио или видео,\n  тем не менее, вы можете добавить до 100 событий в один сценарий.\n</p>\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { GrCircleQuestion } from 'react-icons/gr'\nimport Tooltip from '@mui/material/Tooltip'\nimport IconButton from '@mui/material/IconButton'\n\nWithHint.propTypes = { hint: PropTypes.node, children: PropTypes.node }\nexport default function WithHint(props) {\n  return (\n    <div className={styles.hint}>\n      {props.children}\n      <Tooltip title={props.hint}>\n        <IconButton>\n          <GrCircleQuestion />\n        </IconButton>\n      </Tooltip>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport {\n  FormikTextField,\n  FormikSelect,\n  FormikCheckbox\n} from 'components/FormikField'\nimport { questionTypes } from '../../../../utils'\nimport { questionPriceHint, questionTypesHint, realPriceHint, bagcatRealPriceTypeHint } from './hints'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\n\nFormFields.propTypes = {\n  formik: PropTypes.object,\n  submitting: PropTypes.bool\n}\nexport default function FormFields({ formik, submitting }) {\n  const fieldProps = {\n    formik, disabled: submitting\n  }\n\n  const numberFieldProps = {\n    ...fieldProps,\n    type: 'number',\n    InputProps: { inputProps: { min: 0, max: 4294967295 } }\n  }\n\n  return (\n    <>\n      <Typography variant='h6'>Информация о вопросе</Typography>\n      <WithHint hint={questionPriceHint}>\n        <FormikTextField name='price' label='Стоимость' {...fieldProps} />\n      </WithHint>\n      <WithHint hint={questionTypesHint}>\n        <FormikSelect name='type' label='Тип вопроса' options={questionTypes} {...fieldProps} />\n      </WithHint>\n      {formik.values.type === 'cat' && <WithHint hint={realPriceHint}>\n        <FormikTextField name='realprice' label='Натоящая стоимость вопроса' {...fieldProps} />\n      </WithHint>}\n      {formik.values.type === 'bagcat' && <>\n        <WithHint hint={bagcatRealPriceTypeHint}>\n          <FormikSelect\n            name='questionPriceType'\n            label='Как определяется стоимость вопроса'\n            options={{\n              'fixed': 'Фиксирована вами',\n              'minMax': 'Выбором игрока из минимума и максимума стоимостей вопросов в раунде',\n              'byPlayer': 'Игроком в фиксированном вами интервале и шагом'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n        {formik.values.questionPriceType === 'fixed' && <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='Натоящая стоимость вопроса' {...numberFieldProps} />\n        </WithHint>}\n        {formik.values.questionPriceType === 'byPlayer' && <WithHint hint={realPriceHint}>\n          <div className={styles.grouped}>\n            <FormikTextField name='realpriceFrom' label='От' {...numberFieldProps} />\n            <FormikTextField name='realpriceTo' label='До' {...numberFieldProps} />\n            <FormikTextField name='realpriceStep' label='Шаг' {...numberFieldProps} />\n          </div>\n        </WithHint>}\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <FormikCheckbox name='transferToSelf' label='Можно отдать вопрос себе' {...fieldProps} />\n        <WithHint hint={<p>Если выбран вариант <b>Никогда</b>, то вопрос не задаётся, игроку просто перечисляется его стоимость</p>}>\n          <FormikSelect\n            name='detailsDisclosure'\n            label='Когда узнается стоимость вопроса'\n            options={{\n              'before': 'До передачи вопроса',\n              'after': 'После передачи вопроса',\n              'never': 'Никогда'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n      </>}\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDelete, MdExpandMore, MdImage, MdMusicNote, MdVideocam, MdShortText, MdRecordVoiceOver } from 'react-icons/md'\nimport Item from 'components/ItemsList/Item'\nimport Handle from 'components/ItemsList/Handle'\nimport Typography from '@mui/material/Typography'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport Slider from '@mui/material/Slider'\nimport Decimal from 'decimal.js'\nimport ImageField from 'components/ImageField'\n\nScenarioEvent.propTypes = {\n  index: PropTypes.number,\n  item: PropTypes.object,\n  onDelete: PropTypes.func,\n  draggableId: PropTypes.number,\n  formik: PropTypes.object,\n}\n\nexport default function ScenarioEvent(props) {\n  const [duration, setDuration] = React.useState(3)\n  const [imageFieldValue, setImageFieldValue] = React.useState()\n  const formatTime = time => `${time.toFixed(1)} cек.`\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.onDelete(props.index)\n  }\n\n  // 0.1 - 1.0 with step 0.1\n  // 1.0 - 10.0 with step 0.5\n  // 10.0 - 180.0 with step 1\n  const step0_1 = new Array(1/0.1).fill().map((_, i) => new Decimal(0.1).times(i+1).toNumber())\n  const step0_5 = new Array((10-1)/0.5).fill().map((_, i) => 1+(i+1)*0.5)\n  const step1 = new Array((30-10)/1).fill().map((_, i) => 10+1+i)\n  const step5 = new Array((60-30)/5).fill().map((_, i) => 30+(i+1)*5)\n  const durationMarks = [...step0_1, ...step0_5, ...step1, ...step5].map((value, i) => ({ _label: value, value: i }))\n\n  const closestToMarks = (duration, marks) => {\n    marks = marks.map(({ _label }) => _label)\n    for(let i = 0; i < marks.length; i++) {\n      if(marks[i] <= duration && marks[i+1] > duration) {\n        return i\n      }\n    }\n    return duration\n  }\n\n  const hasLabel = (marks, value) => marks.map(({ _label }) => _label).includes(value)\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={props.draggableId.toString()}\n    >\n      {(provided) => <Accordion>\n        <AccordionSummary expandIcon={<MdExpandMore />}>\n          <div className={styles.item}>\n            <Handle provided={provided} />\n            <Typography variant='body1' className={styles.itemType}>\n              {{\n                'image': 'Изображение',\n                'voice': 'Аудио',\n                'video': 'Видео',\n                'text': 'Текст',\n                'say': 'Слово ведущего'\n              }[props.item.type] ?? `Событие «${props.item.type}»`}\n              <span className={styles.spacing} />\n              {{\n                'image': <MdImage />,\n                'voice': <MdMusicNote />,\n                'video': <MdVideocam />,\n                'text': <MdShortText />,\n                'say': <MdRecordVoiceOver />\n              }[props.item.type]}\n            </Typography>\n            <Typography variant='body2' color='text.secondary'>\n              {formatTime(props.item.duration)}\n            </Typography>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <div className={styles.details}>\n            <div className={styles.duration}>\n              <Slider\n                defaultValue={durationMarks.find(({ _label }) => _label === 3).value}\n                step={null}\n                marks={durationMarks}\n                min={durationMarks[0].value}\n                max={durationMarks[durationMarks.length - 1].value}\n                valueLabelDisplay={hasLabel(durationMarks, duration) ? 'on' : 'off'}\n                valueLabelFormat={i => durationMarks[i]._label}\n                value={closestToMarks(duration, durationMarks)}\n                onChange={e => setDuration(durationMarks[e.target.value]._label)}\n              />\n              <TextField\n                label='Время'\n                variant='outlined'\n                size='small'\n                type='number'\n                InputProps={{ inputProps: { min: 0.1, step: 0.1 } }}\n                className={styles.time}\n                value={duration}\n                onChange={e => setDuration(Number(e.target.value))}\n              />\n            </div>\n            {{\n              'text': <TextField\n                label='Введите текст'\n                multiline\n                rows={4}\n                fullWidth\n              />,\n              'image': <ImageField\n                value={imageFieldValue}\n                onChange={setImageFieldValue}\n                label='Изображение'\n              />\n            }[props.item.type]}\n          </div>\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport ItemsList from 'components/ItemsList'\nimport MenuItem from '@mui/material/MenuItem'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport Select from '@mui/material/Select'\nimport IconButton from '@mui/material/IconButton'\nimport ScenarioEvent from './ScenarioEvent'\nimport { MdAdd } from 'react-icons/md'\nimport { scenarioHint } from './hints'\nimport WithHint from './WithHint'\n\nScenario.propTypes = { formik: PropTypes.object }\nexport default function Scenario({ formik }) {\n  const [scenario, setScenario] = React.useState([])\n  const [newEventValue, setNewEventValue] = React.useState('')\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(scenario, result.source.index, result.destination.index)\n    setScenario(items)\n  }\n\n  const handleAddEvent = () => {\n    setNewEventValue()\n    setScenario([...scenario, { type: newEventValue, duration: 3 }])\n  }\n\n  const handleDelete = index => {\n    const newScenario = [...scenario]\n    newScenario.splice(index, 1)\n    setScenario(newScenario)\n  }\n\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'>Сценарий</Typography>\n      </WithHint>\n      <ItemsList\n        droppableId='scenario'\n        onDragEnd={onDragEnd}\n        list={scenario}\n        draggableProps={{\n          onDelete: handleDelete, formik\n        }}\n        noItemsLabel='Сценарий пуст'\n        itemComponent={ScenarioEvent}\n      />\n      {scenario.length < 100 &&\n        <div className={styles.addEvent}>\n          <FormControl fullWidth>\n            <InputLabel>Добавить событие</InputLabel>\n            <Select\n              name={name}\n              value={newEventValue}\n              onChange={e => setNewEventValue(e.target.value)}\n              label='Добавить событие'\n              displayEmpty={true}\n            >\n              <MenuItem value='text'>Текст на экране</MenuItem>\n              <MenuItem value='say'>Слово ведущего</MenuItem>\n              <MenuItem value='image'>Изображение</MenuItem>\n              <MenuItem value='voice'>Аудио</MenuItem>\n              <MenuItem value='video'>Видео</MenuItem>\n            </Select>\n          </FormControl>\n          <IconButton onClick={handleAddEvent} disabled={!newEventValue}>\n            <MdAdd />\n          </IconButton>\n        </div>}\n      <Typography variant='body2' color='text.secondary'>\n        Все изменения в сценарии сохраняются автоматически\n      </Typography>\n    </div>\n  )\n}\n","import React from 'react'\nimport * as yup from 'yup'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport { useHistory, Prompt } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport FormFields from './FormFields'\nimport Scenario from './Scenario'\n\nconst priceSchema = yup\n  .number()\n  .integer()\n  .min(1, 'Стоимость вопроса должна быть больше 0')\n  .max(4294967295) // max of uint32\nconst validationSchema = yup.object({\n  price: priceSchema.required('Выберете стоимость вопроса'),\n  realprice: priceSchema,\n  type: yup\n    .string()\n    .required('Выберете тип вопроса'),\n  transferToSelf: yup.bool(),\n  detailsDisclosure: yup.string(),\n  realpriceFrom: yup.number(),\n  realpriceTo: yup.number(),\n  realpriceStep: yup.number(),\n  scenario: yup\n    .array()\n    .of(yup.object().shape({ type: yup.string() }))\n    .min(1)\n    .max(100)\n})\n\nexport default function QuestionContent() {\n  const history = useHistory()\n  const [submitting, setSubmitting] = React.useState(false)\n\n  const initialValues = {}\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema: validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      setSubmitting(true)\n      console.log(values)\n      // let pack = { ...props.pack, ...values }\n      // await saveLocalPack(pack)\n      // props.dispatch({ type: 'pack/load', pack })\n      // history.push(`/pack/${pack.uuid}`)\n    },\n  })\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormFields formik={formik} submitting={submitting} />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={submitting}\n          className={styles.submit}\n        >\n          Сохранить\n        </Button>\n      </form>\n      <Scenario formik={formik} submitting={submitting} />\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useParams } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { mapPackState } from '../../../utils'\nimport NotFound404 from 'components/NotFound404'\nimport QuestionContent from './QuestionContent'\n\nQuestion.propTypes = {\n  pack: PropTypes.object,\n}\nfunction Question(props) {\n  const [notFound, setNotFound] = React.useState()\n  const [question, setQuestion] = React.useState()\n  const params = useParams()\n\n  React.useEffect(() => {\n    const pack = props.pack\n    if(!pack) return setNotFound(true)\n    const round = pack.rounds[params.roundIndex-1]\n    if(!round) return setNotFound(true)\n    const theme = round.themes[params.themeIndex-1]\n    if(!theme) return setNotFound(true)\n    const question = theme.questions.find(({ price }) => price === Number(params.questionPrice))\n    if(!question) return setNotFound(true)\n    setQuestion(question)\n    setNotFound(false)\n  }, [params])\n\n  return (\n    notFound !== undefined &&\n    notFound\n      ? <NotFound404 />\n      : <QuestionContent data={question} />\n  )\n}\n\nexport default connect(mapPackState)(Question)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport PackBreadcrumbs from './PackBreadcrumbs'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../consts'\nimport PackToolbar from './PackToolbar/'\nimport Rounds from './Rounds'\nimport Settings from './Settings/'\nimport { Switch, Route, useRouteMatch } from 'react-router-dom'\nimport RoundThemes from './RoundThemes'\nimport NotFound404 from 'components/NotFound404'\nimport Question from './Question'\nimport { mapPackState } from '../../utils'\n\nPackPageContainer.propTypes = {\n  children: PropTypes.node,\n  pack: componentsPropTypes.pack,\n  toolbar: PropTypes.string\n}\n\nfunction PackPageContainer(props) {\n  const { path } = useRouteMatch()\n\n  return (\n    props.pack\n    && (props.pack === 'notFound'\n      ? <NotFound404 />\n      : <div className={styles.container}>\n        <div className={styles.toolbar}>\n          <PackBreadcrumbs />\n          <PackToolbar />\n        </div>\n        <Switch>\n          <Route exact path={path}>\n            <Rounds />\n          </Route>\n          <Route path={`${path}/settings`}>\n            <Settings />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex/themes/:themeIndex/questions/:questionPrice`}>\n            <Question />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex`}>\n            <RoundThemes />\n          </Route>\n          <Route path='*'><NotFound404 /></Route>\n        </Switch>\n      </div>)\n  )\n}\n\nexport default connect(mapPackState)(PackPageContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useLocation } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { loadLocalPack } from '../../localStorage/localPacks'\n\nContainer.propTypes = {\n  children: PropTypes.node,\n  dispatch: PropTypes.func\n}\nfunction Container(props) {\n  const route = useLocation()\n\n  React.useEffect(() => {\n    routeChanged(route.pathname.split('/').filter(String))\n  }, [route])\n\n  const routeChanged = async pathParts => {\n    if(pathParts[0] === 'pack') {\n      const packUUID = pathParts[1]\n      const pack = await loadLocalPack(packUUID)\n      props.dispatch({ type: 'pack/load', pack: pack ?? 'notFound' })\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default connect(null)(Container)\n","import {\n  Router,\n  Switch,\n  Route\n} from 'react-router-dom'\nimport Dashboard from './routes/Dashboard'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport Navigation from './components/Navigation/index.js'\nimport NewPack from './routes/NewPack'\nimport Pack from './routes/Pack'\nimport sipackerStore from './reducers'\nimport { Provider } from 'react-redux'\nimport Container from './components/Container'\nimport 'dayjs/locale/ru'\nimport { history } from './utils'\nimport NotFound404 from 'components/NotFound404'\nimport ContextMenuProvider from 'components/ContextMenu'\n\nexport const darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#4248fb'\n    }\n  },\n})\n\nexport default function App() {\n  return (\n    <Provider store={sipackerStore}>\n      <ThemeProvider theme={darkTheme}>\n        <Router history={history}>\n          <ContextMenuProvider>\n            <Container>\n              <Navigation />\n              <Switch>\n                <Route exact path='/'>\n                  <Dashboard />\n                </Route>\n                <Route path='/create'>\n                  <NewPack />\n                </Route>\n                <Route path={['/pack/:packUUID', '/pack/:packUUID/*']}>\n                  <Pack />\n                </Route>\n                <Route path='*'><NotFound404 /></Route>\n              </Switch>\n            </Container>\n          </ContextMenuProvider>\n        </Router>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1W5Un\",\"name\":\"styles_name__2RB5S\",\"delete\":\"styles_delete__2ihaf\",\"addTheme\":\"styles_addTheme__1hwa9\",\"table\":\"styles_table__3es8F\",\"tableCell\":\"styles_tableCell__1cve7\",\"buttonBase\":\"styles_buttonBase__2kQLq\",\"heading\":\"styles_heading__1IQEt\",\"noItemsYet\":\"styles_noItemsYet__BxKD2\",\"tableRow\":\"styles_tableRow__2jH6j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rounds\":\"styles_rounds__1ZZ2U\",\"heading\":\"styles_heading__-ydFv\",\"cardOfRound\":\"styles_cardOfRound__2AkoD\",\"item\":\"styles_item__3E1HY\",\"delete\":\"styles_delete__24Jnc\",\"link\":\"styles_link__B9CM5\",\"flex1\":\"styles_flex1__3-SY4\",\"inputField\":\"styles_inputField__38y2T\",\"droppable\":\"styles_droppable__25geG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__OqZ1N\",\"label\":\"styles_label__VxlIK\",\"preview\":\"styles_preview__2qqOY\",\"image\":\"styles_image__29S6D\",\"placeholder\":\"styles_placeholder__1vE4B\",\"loading\":\"styles_loading__1wm-5\",\"fileMissing\":\"styles_fileMissing__3t61m\",\"icon\":\"styles_icon__345-2\",\"info\":\"styles_info__1nl83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addItem\":\"styles_addItem__3dCij\",\"addButton\":\"styles_addButton__3g9mJ\",\"button\":\"styles_button__3ZegY\",\"expand\":\"styles_expand__2-jSs\",\"addButtonOuter\":\"styles_addButtonOuter__1y9QO\"};"],"sourceRoot":""}