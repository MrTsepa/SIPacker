{"version":3,"sources":["routes/Pack/styles.module.scss","routes/Pack/PackToolbar/styles.module.scss","components/ItemsList/styles.module.scss","components/EditingToolbar/styles.module.scss","routes/Pack/Settings/styles.module.scss","components/Navigation/styles.module.scss","routes/NewPack/styles.module.scss","components/FileStorage/styles.module.scss","routes/Pack/Rounds/styles.module.scss","components/ItemsList/Item/styles.module.scss","components/FormikField/styles.module.scss","components/NotFound404/styles.module.scss","components/Container/styles.module.scss","routes/Dashboard/styles.module.scss","routes/Pack/Question/QuestionContent/styles.module.scss","routes/Pack/Rounds/CheckList/styles.module.scss","consts.js","localStorage/indexeddb.js","localStorage/localPacks.js","localStorage/fileStorage/hashFile.js","localStorage/fileStorage/saveFile.js","localStorage/fileStorage/index.js","reducers/fileRendering.js","reducers/index.js","reducers/packReducer.js","reducers/dashboardReducer.js","reducers/menuReducer.js","utils.js","localStorage/packGenerator/parser.js","localStorage/packGenerator/index.js","routes/Dashboard/packTypes/Upload.js","components/ContextMenu/index.js","components/ConfirmationDialog/index.js","components/ConfirmationDialog/DeleteConfirmationDialog.js","components/RenameDialog/index.js","routes/Dashboard/packTypes/Pack.js","routes/Dashboard/packTypes/index.js","routes/Dashboard/index.js","components/Navigation/index.js","routes/NewPack/index.js","routes/Pack/PackBreadcrumbs/index.js","routes/Pack/PackToolbar/SavingDialog.js","routes/Pack/PackToolbar/index.js","components/ItemsList/Item/index.js","components/ItemsList/Handle.js","routes/Pack/Rounds/List/Round.js","components/ItemsList/AddItem/index.js","components/ItemsList/index.js","components/EditingToolbar/index.js","routes/Pack/Rounds/List/index.js","routes/Pack/Rounds/CheckList/index.js","routes/Pack/Rounds/index.js","components/FileStorage/Filters.js","components/FileStorage/File.js","components/FileStorage/List.js","components/FileStorage/Upload.js","components/FileStorage/index.js","components/ImageField/index.js","components/FormikField/index.js","routes/Pack/Settings/index.js","components/NotFound404/index.js","routes/Pack/RoundThemes/RoundTable.js","routes/Pack/RoundThemes/Questions.js","components/ClickIsolator.js","routes/Pack/RoundThemes/Theme.js","routes/Pack/RoundThemes/ThemesEditing.js","routes/Pack/RoundThemes/index.js","routes/Pack/Question/QuestionContent/hints.js","routes/Pack/Question/QuestionContent/WithHint.js","routes/Pack/Question/QuestionContent/FormFields.js","routes/Pack/Question/QuestionContent/ScenarioEvent.js","routes/Pack/Question/QuestionContent/Scenario.js","routes/Pack/Question/QuestionContent/NoScenario.js","routes/Pack/Question/QuestionContent/validation.js","routes/Pack/Question/QuestionContent/index.js","routes/Pack/Question/index.js","routes/Pack/index.js","components/Container/index.js","App.js","index.js","routes/Pack/RoundThemes/styles.module.scss","routes/Pack/Rounds/List/styles.module.scss","components/ImageField/styles.module.scss","components/ItemsList/AddItem/styles.module.scss"],"names":["module","exports","format","PropTypes","shape","uuid","string","name","creationTime","number","date","thumbnail","formatDefaults","xmlJS","js2xml","_declaration","_attributes","version","encoding","Types","xmlns","Default","Extension","ContentType","compact","uuidRegex","init","db","Dexie","stores","packs","join","files","loadLocalPack","packUUID","a","get","pack","loadLocalPacks","toArray","saveLocalPack","put","deleteLocalPack","delete","hashFile","file","Promise","resolve","reject","blobSlice","File","prototype","slice","mozSlice","webkitSlice","chunkSize","chunks","Math","ceil","size","spark","SparkMD5","ArrayBuffer","fileReader","FileReader","currentChunk","onload","e","append","target","result","loadNext","end","onerror","start","readAsArrayBuffer","call","mimeTypes","image","audio","video","allowedFileTypes","saveFile","blob","includes","type","filename","hash","where","length","Object","entries","find","some","fileURI","nanoid","fileObject","fileName","addedAt","Date","now","generateMiniature","miniature","img","document","createElement","src","URL","createObjectURL","width","height","min","newWidth","newHeight","canvas","drawTransparentPattern","getContext","drawImage","toBlob","revokeObjectURL","getFile","getPacksIDs","packIDs","map","getDeletedPacks","existingPacks","allPacks","filter","deleteFile","equals","getRecent","filters","splice","indexOf","deletedPacks","push","anyOf","limit","offset","reverse","sortBy","deleteFilesOfPack","primaryKeys","bulkDelete","removeFileURI","state","newState","changeProperty","propertyName","newValue","createStore","combineReducers","action","dashboard","uploading","fileRendering","callback","menu","position","removeUndefined","object","fromEntries","undefined","history","createBrowserHistory","emptyFunc","formatDate","dateTime","Intl","DateTimeFormat","year","month","day","hour","minute","seconds","mapPackState","questionTypes","initValues","schema","initialValues","fields","keys","defaultValues","forEach","key","JSZip","loadAsync","zip","contentXML","error","async","packContent","content","xml2js","mapText","array","elements","t","text","packageTag","n","property","attributes","id","difficulty","restriction","publisher","logo","language","infoTag","authors","tags","Number","over18","bom","packErrors","check","errors","generate","texts","folder","declaration","tag","author","comment","rounds","round","themes","theme","questions","question","price","generateAsync","compression","zipInBlob","SlideTransition","props","Slide","direction","connect","React","useState","entered","setEntered","setContent","useEffect","interval","setInterval","c","clearInterval","onDragEnter","onDragLeave","onDrop","acceptedFiles","previousState","dispatch","concat","parsePackGenerator","then","noContentXML","reloadPacks","store","getState","accept","getRootProps","getInputProps","className","cx","styles","packBase","newPack","upload","dragOver","backdrop","visible","Snackbar","open","onClose","TransitionComponent","Alert","severity","alert","i","ContextMenuActions","createContext","ContextMenu","items","setItems","contextMenu","preventDefault","clientX","clientY","close","Provider","value","children","ReactDOM","createPortal","Menu","anchorReference","anchorPosition","top","left","item","MenuItem","onClick","stopPropagation","ListItemIcon","icon","ListItemText","body","displayName","okCallback","ConfirmationDialog","forwardRef","ref","setOpen","setText","confirmText","setConfirmText","checkboxText","setCheckboxText","checkboxValue","setCheckboxValue","handleAction","confirmed","checked","useImperativeHandle","maxWidth","DialogTitle","title","DialogContent","DialogContentText","FormControlLabel","control","Checkbox","defaultChecked","onChange","label","DialogActions","Button","autoFocus","color","DeleteConfirmationDialog","confirmationDialogRef","useRef","useHistory","confirmPackDeletion","current","deleteFiles","confirmRoundDeletion","RenameDialog","setCallback","subject","setSubject","oldName","setOldName","setValue","askToRename","handleCancel","TextField","placeholder","variant","style","marginTop","disabled","Pack","confDialogRef","renameDialog","dashboardActions","useContext","DashboardContext","contextMenuActions","handleDeletePack","handleRenamePack","newName","onContextMenu","PackImage","info","time","Create","Loading","loading","Skeleton","skeleton","setSrc","cleanup","pictureContainer","Dashboard","LocalPacks","savedLocalPacks","setSavedLocalPacks","loadPacks","packsUUID","sort","b","contextActions","packsList","PackBase","Array","fill","_","PackSwitch","to","Navigation","infoShown","setInfoShown","AppBar","zIndex","Toolbar","logoContainer","Typography","component","href","rel","IconButton","Dialog","NewPack","packName","setPackName","createPack","uuidv4","dayjs","examples","container","field","floor","random","onKeyUp","linkStyles","link","route","useLocation","path","setPath","page","pathname","split","RegExp","parts","crumbs","currentPack","settings","paths","default","pathRegex","test","Breadcrumbs","Transition","Zoom","SavingDialog","setErrors","setPack","save","startProcessing","setTimeout","bundlePack","saveAs","slugify","autoBom","LinearProgress","Boolean","savingDialogRef","handleDeleteRound","roundIndex","parseInt","handleDeleteQuestion","buttons","root","pageToolbar","regex","toolbar","getStyle","transform","axisLockY","Item","draggableId","String","index","provided","Card","innerRef","draggableProps","Handle","handle","dragHandleProps","Round","handleRemoveRound","cardOfRound","editing","ItemContent","CardActionArea","CardContent","paddingBottom","darkTheme","spacing","flex1","roundNamesTextInput","handleRoundNameChange","inputField","flex2","AddItem","addingItem","setAddingItem","addItem","ItemName","handleAddItem","onAdd","button","expand","inputLabel","addButtonOuter","startIcon","addButton","buttonLabel","outlinedInput","handleDone","focus","FormControl","InputLabel","OutlinedInput","onKeyDown","paddingRight","inputRef","endAdornment","InputAdornment","ItemsList","WeakMap","itemsMap","setItemsMap","onDragEnd","droppableId","droppableProps","droppableClassName","list","oid","has","set","itemComponent","useIdAsKey","gutterBottom","listStyles","noItems","noItemsLabel","EditingToolbar","heading","showButton","hint","onSwitch","setRounds","setEditing","handleAddRound","packRounds","updateRounds","names","destination","startIndex","endIndex","from","removed","reorder","source","droppable","namesList","Items","first","starting","last","ending","replace","done","Marker","marker","lineBefore","hidden","bullet","lineAfter","hasAtLeast1Question","hasAtLeast1Theme","has5ThemesInEachRound","every","hasAtLeast25Questions","reduce","prev","hasQuestionWithAuction","hasQuestionWithBagCat","required","optional","filterItems","f","reducer","progress","point","max","progressBar","caption","line","Rounds","roundsPage","Filters","Stack","checkboxes","handleChange","checkbox","all","fileSrc","setFileSrc","infoDialogueOpen","setInfoDialogueOpen","removing","setRemoving","handleDeleteFile","onRemove","Grid","xs","md","sm","handleSelect","itemInner","preview","foreground","background","filesize","symbols","List","setFiles","mapFiles","mappedFiles","packSwitchUUID","packGroup","packDivider","grid","j","noFilesYet","Upload","setUploading","uploadingFileIndex","setUploadingFileIndex","filesListLength","setFilesListLength","uploaded","setUploaded","handleDrop","hasErrors","fileIndex","console","errorMessage","setTab","uploadingFiles","uploadingScreen","uploadingCaption","CircularProgress","thickness","onDropAccepted","dropzone","flex","supportedTypes","FileStorage","tab","setPacks","setPackUUID","setCheckboxes","handleClose","deletedPack","filteredPacks","cb","checkedPack","sx","palette","grey","dialog","Tabs","textColor","tabs","Tab","selectedFile","B","kB","MB","GB","TB","PB","EB","ZB","YB","Placeholder","FileMissingIcon","fileMissing","FileMissing","FileInfo","FileNotSelected","Image","srcUrl","alt","setSrcUrl","noFile","setNoFile","fileStorage","url","handleClick","formikMuiErrors","formik","helperText","FormikTextField","fieldProps","values","setTouched","touched","FormikAutocomplete","handleKeyDown","Autocomplete","multiple","options","getOptionLabel","option","freeSolo","clearOnBlur","setFieldValue","renderInput","FormikSelect","fullWidth","Select","FormHelperText","FormikCheckbox","FormikSlider","slider","Slider","requestAnimationFrame","valueLabelDisplay","marks","FormikImageField","formikTouched","validationSchema","yup","positive","integer","submitting","setSubmitting","useFormik","validateOnChange","validateOnBlur","onSubmit","useBeforeunload","event","handleSubmit","form","step","when","message","NotFound404","centered","RoundTable","useRouteMatch","TableContainer","Paper","table","Table","TableBody","row","TableRow","border","TableCell","scope","minWidth","tableCell","ButtonBase","buttonBase","align","Cell","wp","sortedQuestions","questionURL","themeIndex","cell1","TableHead","hover","tableRow","correctAnswers","answer","incorrectAnswers","strikethrough","movie","colSpan","ClickIsolator","expandId","themeName","setThemeName","handleDelete","handleRemoveTheme","handleChangeThemeName","newThemeName","toString","Accordion","expanded","isExpand","setExpand","AccordionSummary","expandIcon","AccordionDetails","ThemesEditing","Theme","handleAddTheme","addTheme","setThemes","found","setFound","roundThemes","updateThemes","clone","questionPriceHint","questionTypesHint","realPriceHint","bagcatRealPriceTypeHint","scenarioHint","WithHint","Tooltip","FormFields","numberFieldProps","InputProps","inputProps","questionPriceType","grouped","ScenarioEvent","duration","setDuration","eventData","setEventData","onDelete","onChangeDuration","scenarioEvent","scenario","data","eventDuration","onChangeData","step0_1","Decimal","times","toNumber","step0_5","step1","step5","durationMarks","_label","closestToMarks","itemType","Fade","in","toFixed","details","defaultValue","valueLabelFormat","multiline","rows","imageField","setScenario","newEventValue","setNewEventValue","scenarioUpdateTimeout","setScenarioUpdateTimeout","params","useParams","questionPrice","findIndex","clearTimeout","scenarioUpdateQueue","updateQuestionScenario","newScenario","addEvent","displayEmpty","NoScenario","priceSchema","realprice","transferToSelf","detailsDisclosure","realpriceFrom","realpriceTo","realpriceStep","ensure","newQuestion","delta","newDelta","findRegularity","getNextPrice","validate","checkRealPrice","checkNumber","noValueError","zeroError","isSubmitting","submit","isValidating","notFound","setNotFound","setQuestion","exact","routeChanged","pathParts","createTheme","mode","primary","main","App","sipackerStore","ThemeProvider","basename","process","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e22eb6a3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"styles_link__iWnvj\",\"toolbar\":\"styles_toolbar__viJ4P\",\"container\":\"styles_container__3KW9G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__Srfpa\",\"delete\":\"styles_delete__1GXPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noItems\":\"styles_noItems__19dBE\",\"handle\":\"styles_handle__DHO5p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1dso8\",\"text\":\"styles_text__16Cv2\",\"hint\":\"styles_hint__2upGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1vfWp\",\"form\":\"styles_form__LUKmR\",\"info\":\"styles_info__1RrDx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"styles_navigation__b3eL_\",\"logoContainer\":\"styles_logoContainer__3hxi2\",\"logo\":\"styles_logo__Triy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Npq2\",\"field\":\"styles_field__1Q5KE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__3sESC\",\"dialog\":\"styles_dialog__2HYt8\",\"tabs\":\"styles_tabs__3oGTF\",\"files\":\"styles_files__gJLVp\",\"filters\":\"styles_filters__1TEOe\",\"text\":\"styles_text__3q7xF\",\"checkbox\":\"styles_checkbox__2-7wb\",\"list\":\"styles_list__QxZ1P\",\"content\":\"styles_content__3DAbo\",\"packDivider\":\"styles_packDivider__1eh-l\",\"grid\":\"styles_grid__2YaAc\",\"item\":\"styles_item__3OyXq\",\"itemInner\":\"styles_itemInner__j4sTM\",\"preview\":\"styles_preview__2vnda\",\"foreground\":\"styles_foreground__3OtLE\",\"background\":\"styles_background__2v4Hw\",\"fileName\":\"styles_fileName__Y6Kge\",\"button\":\"styles_button__2BATH\",\"noFilesYet\":\"styles_noFilesYet__1Hcst\",\"hint\":\"styles_hint__1anpH\",\"upload\":\"styles_upload__i5SMD\",\"dropzone\":\"styles_dropzone__7zJs4\",\"flex\":\"styles_flex__1oz2f\",\"supportedTypes\":\"styles_supportedTypes__UNDK8\",\"uploadingFiles\":\"styles_uploadingFiles__3pQjA\",\"uploadingScreen\":\"styles_uploadingScreen__3l-EZ\",\"uploadingCaption\":\"styles_uploadingCaption__2Thca\",\"caption\":\"styles_caption__3MYtC\",\"errors\":\"styles_errors__3zZJK\",\"delete\":\"styles_delete__GzwCF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"roundsPage\":\"styles_roundsPage__2xjXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"styles_item__2_EzC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"styles_slider__2_T4D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centered\":\"styles_centered__23ouW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2xIAm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"packsList\":\"styles_packsList__3_FVk\",\"hoverUnfocused\":\"styles_hoverUnfocused__QnvyG\",\"packBase\":\"styles_packBase__1LyE6\",\"hoverFocused\":\"styles_hoverFocused__3wnZX\",\"loading\":\"styles_loading__3SVRQ\",\"pack\":\"styles_pack__P7r43\",\"info\":\"styles_info__2vfvj\",\"visibilityDelay\":\"styles_visibilityDelay__2WqMA\",\"newPack\":\"styles_newPack__SHDep\",\"skeleton\":\"styles_skeleton__2LQD-\",\"upload\":\"styles_upload__nOCvw\",\"thumbnail\":\"styles_thumbnail__1aU0y\",\"pictureContainer\":\"styles_pictureContainer__3Ksvb\",\"name\":\"styles_name__10d11\",\"time\":\"styles_time___bQuG\",\"backdrop\":\"styles_backdrop__2CHGI\",\"visible\":\"styles_visible__zmC7_\",\"alert\":\"styles_alert__1bU9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__10MD0\",\"hint\":\"styles_hint__2rDGF\",\"grouped\":\"styles_grouped__2K5-H\",\"addEvent\":\"styles_addEvent__3LcHk\",\"item\":\"styles_item__22gS9\",\"itemType\":\"styles_itemType__12yvw\",\"spacing\":\"styles_spacing__AWfQV\",\"details\":\"styles_details__2X22Q\",\"duration\":\"styles_duration__1EfuX\",\"time\":\"styles_time__CfIYV\",\"submit\":\"styles_submit__39tBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3R_IO\",\"list\":\"styles_list__V6atM\",\"done\":\"styles_done__T3LaX\",\"marker\":\"styles_marker__1v4R9\",\"lineBefore\":\"styles_lineBefore__3FZJa\",\"lineAfter\":\"styles_lineAfter__2tf62\",\"hidden\":\"styles_hidden__QZJee\",\"bullet\":\"styles_bullet__3qHV-\",\"link\":\"styles_link__3mTg0\",\"caption\":\"styles_caption__3cP02\",\"line\":\"styles_line__JJEXr\",\"text\":\"styles_text__1tFeb\",\"progress\":\"styles_progress__2qcQG\",\"progressBar\":\"styles_progressBar__1AayW\"};","import PropTypes from 'prop-types'\nimport xmlJS from 'xml-js'\n\nexport const componentsPropTypes = {\n  pack: PropTypes.shape({\n    uuid: PropTypes.string,\n    name: PropTypes.string,\n    creationTime: PropTypes.number,\n    date: PropTypes.string,\n    thumbnail: PropTypes.string\n  })\n}\n\nexport const format = {\n  xmlVersion: '1.0',\n  encoding: 'utf-8',\n  latestVersion: 4\n}\n\nexport const formatDefaults = {\n  contentTypes: xmlJS.js2xml({\n    _declaration: {\n      _attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    Types: {\n      _attributes: {\n        xmlns: 'http://schemas.openxmlformats.org/package/2006/content-types',\n      },\n      Default: {\n        _attributes: {\n          Extension: 'xml',\n          ContentType: 'si/xml'\n        }\n      }\n    }\n  }, { compact: true })\n}\n\nexport const uuidRegex = '\\\\b[0-9a-f]{8}\\\\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\\\\b[0-9a-f]{12}\\\\b'\n","import Dexie from 'dexie'\n\nexport const init = () => {\n  const db = new Dexie('sipacker')\n  db.version(1).stores({\n    packs: [\n      'uuid'\n      // also: name, version, over18, date, publisher, difficulty, logo, language, tags, authors, comment\n    ].join(', '),\n    files: [\n      'fileURI',\n      'type',\n      'hash',\n      'packUUID',\n      'addedAt'\n      // also: filename, blob\n    ].join(', ')\n  })\n  return db\n}\n","import { init } from './indexeddb'\n\nexport async function loadLocalPack(packUUID) {\n  const db = init()\n  let pack = await db.packs.get(packUUID)\n  return pack ?? null\n}\n\nexport async function loadLocalPacks() {\n  const db = init()\n  const packs = await db.packs.toArray()\n  return packs\n}\n\nexport async function saveLocalPack(pack) {\n  const db = init()\n  await db.packs.put(pack)\n}\n\nexport async function deleteLocalPack(packUUID) {\n  const db = init()\n  await db.packs.delete(packUUID)\n}\n","import SparkMD5 from 'spark-md5'\n\nexport default function hashFile(file) {\n  return new Promise((resolve, reject) => {\n    // from https://github.com/satazor/js-spark-md5#hash-a-file-incrementally\n    const blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\n    const chunkSize = 1024*1024*2\n    const chunks = Math.ceil(file.size / chunkSize)\n    const spark = new SparkMD5.ArrayBuffer()\n    const fileReader = new FileReader()\n\n    let currentChunk = 0\n\n    fileReader.onload = e => {\n      spark.append(e.target.result)\n      currentChunk++\n\n      if (currentChunk < chunks) {\n        loadNext()\n      } else {\n        resolve(spark.end())\n      }\n    }\n\n    fileReader.onerror = () => reject('Unable to hash file')\n\n    const loadNext = () => {\n      const start = currentChunk * chunkSize\n      const end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize\n\n      fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n    }\n\n    loadNext()\n  })\n}\n","import hashFile from './hashFile'\nimport { nanoid } from 'nanoid'\nimport { init } from '../indexeddb'\nimport drawTransparentPattern from 'checkerboardjs'\n\nconst mimeTypes = {\n  image: ['image/png', 'image/jpeg'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg'],\n  video: ['video/mpeg']\n}\nexport const allowedFileTypes = [...mimeTypes.image, ...mimeTypes.audio, ...mimeTypes.video]\nexport async function saveFile(blob, packUUID) {\n  if(!allowedFileTypes.includes(blob.type)) { throw 'Mime-type is not supported' }\n  if(!blob.filename) { throw 'Blob instance must have filename propery' }\n\n  const db = init()\n  const hash = await hashFile(blob)\n\n  let results = await db.files.where({ packUUID, hash }).toArray()\n  if(results.length) throw 'File with such hash already exist'\n\n  const type = Object.entries(mimeTypes).find(\n    ([,mimeType]) => mimeType.some(type => type === blob.type)\n  )[0]\n\n  const fileURI = nanoid()\n  const fileObject = {\n    fileURI,\n    type,\n    blob,\n    fileName: blob.filename,\n    hash,\n    packUUID,\n    addedAt: Date.now()\n  }\n\n  switch(type) {\n    case 'image':\n      fileObject.miniature = await generateMiniature(blob)\n      break\n  }\n\n  await db.files.put(fileObject)\n  return fileURI\n}\n\nconst maxSize = 100\nasync function generateMiniature(blob) {\n  const img = document.createElement('img')\n  const src = URL.createObjectURL(blob)\n  img.src = src\n  await new Promise(resolve => img.onload = resolve)\n  const { width, height } = img\n  const size = Math.min(width, height, maxSize)\n  let newWidth = size, newHeight = size\n  if(width > height) newHeight = newWidth*height/ width\n  else newWidth = newHeight*width/height\n\n  const canvas = document.createElement('canvas')\n  canvas.width = newWidth\n  canvas.height = newHeight\n  drawTransparentPattern(canvas)\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n  const miniature = await new Promise(resolve => canvas.toBlob(resolve))\n  URL.revokeObjectURL(src)\n  return miniature\n}\n","import { init } from '../indexeddb'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nexport { allowedFileTypes, saveFile } from './saveFile'\n\nexport async function getFile(fileURI) {\n  const db = init()\n  let file = await db.files.get(fileURI)\n  return file ?? null\n}\n\nexport async function getPacksIDs() {\n  const db = init()\n  const packIDs = await db.files.toArray()\n  return packIDs.map(({ packUUID }) => packUUID)\n}\n\nexport async function getDeletedPacks() {\n  let existingPacks = await loadLocalPacks()\n  existingPacks = existingPacks.map(({ uuid }) => uuid)\n  const allPacks = await getPacksIDs()\n  return allPacks.filter(pack => !existingPacks.includes(pack))\n}\n\nexport async function deleteFile(fileURI) {\n  const db = init()\n  await db.files.where('fileURI').equals(fileURI).delete()\n}\n\nconst size = 20\nexport async function getRecent(filters) {\n  const db = init()\n  if(filters.includes('null')){\n    filters.splice(filters.indexOf('null'), 1)\n    const deletedPacks = await getDeletedPacks()\n    filters.push(...deletedPacks)\n  }\n  const files = await db.files.where('packUUID').anyOf(filters)\n    .limit(size)\n    .offset(0)\n    .reverse()\n    .sortBy('addedAt')\n  return files\n}\n\nexport async function deleteFilesOfPack(packUUID) {\n  const db = init()\n  const files = await db.files.where({ packUUID }).primaryKeys()\n  await db.files.bulkDelete(files)\n}\n","export default function fileRenderingReducer(state = {}, action) {\n  switch (action.type) {\n    case 'fileRendering/fileRenderingStarted':\n      return state[action.fileURI] ? { ...state } :  { ...state, [action.fileURI]: action.callback }\n    case 'fileRendering/fileRenderingStopped':\n      return removeFileURI(state, action.fileURI)\n    case 'fileRendering/fileUnlinked':\n      const callback = state[action.fileURI]\n      callback && callback()\n      return removeFileURI(state, action.fileURI)\n    case 'fileRendering/setFileUnlinkCallback':\n      return changeProperty(state, action.fileURI, action.callback)\n    default:\n      return state\n  }\n}\n\nfunction removeFileURI(state, fileURI) {\n  const newState = { ...state }\n  delete newState[fileURI]\n  return newState\n}\n\nfunction changeProperty(state, propertyName, newValue) {\n  const newState = { ...state }\n  newState[propertyName] = newValue\n  return newState\n}\n","import { combineReducers, createStore } from 'redux'\nimport packReducer from './packReducer'\nimport dashboardReducer from './dashboardReducer'\nimport fileRenderingReducer from './fileRendering'\nimport menuReducer from './menuReducer'\n\nexport default createStore(combineReducers({\n  pack: packReducer,\n  dashboard: dashboardReducer,\n  fileRendering: fileRenderingReducer,\n  menu: menuReducer\n}))\n","export default function packReducer(state = null, action) {\n  switch (action.type) {\n    case 'pack/load':\n      return action.pack\n    default:\n      return state\n  }\n}\n","export default function dashboardReducer(state = null, action) {\n  switch (action.type) {\n    case 'dashboard/setUploading':\n      return { ...state, uploading: action.uploading }\n    default:\n      return state\n  }\n}\n","export default function menuReducer(state = null, action) {\n  switch (action.type) {\n    case 'menu/setPosition':\n      return { ...state, position: action.position }\n    default:\n      return state\n  }\n}\n","import { createBrowserHistory } from 'history'\n\nexport const removeUndefined = object => Object.fromEntries(Object.entries(object).filter(([, val]) => val !== undefined))\n\nexport const history = createBrowserHistory()\n\nexport const emptyFunc = () => {}\n\nexport const formatDate = dateTime => new Intl.DateTimeFormat('ru-RU', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  seconds: 'numeric'\n}).format(dateTime)\n\nexport const mapPackState = state => ({ pack: state.pack })\n\nexport const questionTypes = {\n  'simple': 'Обычный',\n  'auction': 'Со ставкой (Аукцион)',\n  'cat': 'С секретом',\n  'bagcat': 'Кот в мешке',\n  'sponsored': 'Без риска'\n}\n\nexport const initValues = (schema, object) => {\n  const initialValues = object ?? {}\n  const fields = Object.keys(schema.fields)\n  const defaultValues = {\n    'number': 0,\n    'string': '',\n    'boolean': false\n  }\n  fields.forEach(key => initialValues[key] = object ? object[key] : defaultValues[schema.fields[key].type])\n  return initialValues\n}\n","import JSZip from 'jszip'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { removeUndefined } from 'utils'\nimport xmlJS from 'xml-js'\n\nexport default async function parse(blob) {\n  try {\n    const zip = await JSZip.loadAsync(blob)\n    const contentXML = zip.files['content.xml']\n    if(!contentXML) { return { error: 'noContentXML' }}\n    const packContent = await contentXML.async('string')\n    const content = xmlJS.xml2js(packContent)\n\n    const n = (object, property) => {\n      const target = object.elements.filter(e => e.name === property)\n      return target && target[0]\n    }\n\n    const mapText = array => {\n      if(!array) { return undefined }\n      return array.elements.map(t => t.elements[0].text)\n    }\n\n    const packageTag = n(content, 'package')\n    const { id, name, version, difficulty, restriction, date, publisher, logo, language } = packageTag.attributes\n    const infoTag = n(packageTag, 'info')\n    const authors = mapText(n(infoTag, 'authors'))\n    const tags = mapText(n(packageTag, 'tags'))\n\n    const pack = removeUndefined({\n      uuid: id,\n      name,\n      version: Number(version),\n      difficulty: Number(difficulty),\n      creationTime: Date.now(),\n      over18: restriction === '18+',\n      date,\n      authors: authors.join(','),\n      publisher,\n      tags: tags?.join(','),\n      logo,\n      language: language || ''\n    })\n    await saveLocalPack(pack)\n    return true\n  } catch(e) {\n    return { error: e }\n  }\n}\n","import JSZip from 'jszip'\nimport { format, formatDefaults } from 'consts'\nimport xmlJS from 'xml-js'\nimport FileResolver from './fileResolver'\nexport { default as parse } from './parser'\n\nconst bom = '\\uFEFF'\n\nconst packErrors = {\n  noAuthor: 'Добавьте как минимум одного автора в настройках пака',\n  noLanguage: 'Установите язык вопросов в настройках пака'\n}\nexport async function check(pack) {\n  let errors = []\n  if(!pack.authors) errors.push(packErrors.noAuthor)\n  if(!pack.language) errors.push(packErrors.noLanguage)\n\n  return errors\n}\n\nexport async function generate(pack) {\n  const zip = new JSZip()\n  zip.file('[Content_Types].xml', bom+formatDefaults.contentTypes)\n\n  const texts = zip.folder('Texts')\n  texts.file('authors.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Authors />')\n  texts.file('sources.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Sources />')\n\n  // const files = new FileResolver(zip)\n\n  const packContent = {\n    declaration: {\n      attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    elements: [\n      // {\n      //   type: 'comment',\n      //   comment: 'This package was generated using SIPacker — free open-source online tool for generating SIGame packs. Feel free to leave feedback on https://github.com/VityaSchel/SIPacker'\n      // },\n      {\n        type: 'element',\n        name: 'package',\n        attributes: {\n          xmlns: 'http://vladimirkhil.com/ygpackage3.0.xsd',\n          id: pack.uuid,\n          name: pack.name,\n          version: pack.version,\n          restriction: pack.over18 ? '18+' : undefined,\n          date: pack.date,\n          publisher: pack.publisher,\n          difficulty: pack.difficulty,\n          // logo: await files.resolve(pack.logo),\n          language: pack.language,\n          // generator: 'sipacker'\n        },\n        elements: [\n          ...pack.tags ? [\n            {\n              type: 'element',\n              name: 'tags',\n              elements: pack.tags.map(tag => (\n                {\n                  type: 'element',\n                  name: 'tag',\n                  elements: [{ type: 'text', text: tag }]\n                }\n              ))\n            }\n          ] : [],\n          {\n            type: 'element',\n            name: 'info',\n            elements: [\n              {\n                type: 'element',\n                name: 'authors',\n                elements: pack.authors.map(author => (\n                  {\n                    type: 'element',\n                    name: 'author',\n                    elements: [{ type: 'text', text: author }]\n                  }\n                ))\n              },\n              ...pack.comment ? [\n                {\n                  type: 'element',\n                  name: 'comments',\n                  elements: [\n                    {\n                      type: 'text',\n                      text: pack.comment\n                    }\n                  ]\n                }\n              ] : []\n            ]\n          },\n          {\n            type: 'element',\n            name: 'rounds',\n            elements: pack.rounds.map(round => (\n              {\n                type: 'element',\n                name: 'round',\n                attributes: {\n                  name: round.name\n                },\n                elements: [\n                  {\n                    type: 'element',\n                    name: 'themes',\n                    elements: round.themes.map(theme => (\n                      {\n                        type: 'element',\n                        name: 'theme',\n                        attributes: {\n                          name: theme.name\n                        },\n                        elements: [\n                          {\n                            type: 'element',\n                            name: 'questions',\n                            elements: theme.questions.map(question => (\n                              {\n                                type: 'element',\n                                name: 'question',\n                                attributes: {\n                                  price: question.price\n                                },\n                                elements: [\n                                  {\n                                    type: 'element',\n                                    name: 'scenario',\n                                    elements: [\n                                      {\n                                        type: 'element',\n                                        name: 'atom',\n                                        elements: [{ type: 'text', text: 'Чехия' }]\n                                      }\n                                    ]\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'right',\n                                    elements: [\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: 'Прага' }]\n                                      }\n                                    ]\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'wrong',\n                                    elements: [\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: 'Самара' }]\n                                      },\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: 'Москва' }]\n                                      }\n                                    ]\n                                  }\n                                ]\n                              }\n                            ))\n                          }\n                        ]\n                      }\n                    ))\n                  }\n                ]\n              }\n            ))\n          }\n        ]\n      }\n    ]\n  }\n  const content = xmlJS.js2xml(packContent)\n  zip.file('content.xml', bom+content)\n  const zipInBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE' })\n  return zipInBlob\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport cx from 'classnames'\nimport Snackbar from '@mui/material/Snackbar'\nimport Slide from '@mui/material/Slide'\nimport Alert from '@mui/material/Alert'\nimport { connect } from 'react-redux'\nimport store from '../../../reducers'\nimport { MdFileUpload } from 'react-icons/md'\nimport Dropzone from 'react-dropzone'\nimport { parse as parsePackGenerator } from 'localStorage/packGenerator'\n\nconst SlideTransition = props => <Slide {...props} direction=\"right\" />\n\nfunction Upload(props) {\n  const [entered, setEntered] = React.useState(false)\n  const [content, setContent] = React.useState([])\n\n  const handleDrop = acceptedFiles => {\n    setEntered(false)\n    if(!acceptedFiles) { return }\n    for (let pack of acceptedFiles) {\n      let previousState = props.dashboard?.uploading ?? []\n      const id = Date.now()\n      props.dispatch({ type: 'dashboard/setUploading', uploading: previousState.concat({ id, name: pack.name }) })\n      parsePackGenerator(pack).then(result => {\n        if(result.error) {\n          const error = {\n            noContentXML: 'Не найден файл content.xml в паке. Возможно, архив поврежден или неправильно создан, например, с абсолютными путями вместо относительных.'\n          }[result.error]\n          const date = Date.now()\n          setContent(content.concat({ date, text: `Ошибка при загрузке пака «${pack.name}»: ${error}` }))\n        } else {\n          props.reloadPacks()\n        }\n        props.dispatch({ type: 'dashboard/setUploading', uploading: store.getState().pack?.uploading.filter(pack => id !== pack.id) })\n      })\n    }\n  }\n\n  const handleEnter = () => setEntered(true)\n  const handleLeave = () => setEntered(false)\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      setContent(content.filter(c => c.date >= Date.now()-1000*5))\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [content])\n\n  return (\n    <>\n      <Dropzone\n        onDragEnter={handleEnter}\n        onDragLeave={handleLeave}\n        onDrop={handleDrop}\n        accept={['.siq']}\n      >\n        {({getRootProps, getInputProps}) => (\n          <div className={cx(\n            [styles.packBase, styles.newPack, styles.upload],\n            { [styles.dragOver]: entered }\n          )} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span><MdFileUpload /> Загрузить файл пака</span>\n          </div>\n        )}\n      </Dropzone>\n      <div className={cx(styles.backdrop, { [styles.visible]: entered })} />\n      <Snackbar\n        open={content.length}\n        onClose={() => setContent([])}\n        TransitionComponent={SlideTransition}\n      >\n        <Alert severity=\"error\" className={styles.alert}>\n          {content.map((c, i) => <p key={i}>{c.text}</p>)}\n        </Alert>\n      </Snackbar>\n    </>\n  )\n}\n\nUpload.propTypes = {\n  dashboard: PropTypes.object,\n  dispatch: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default connect(state => ({ dashboard: state.dashboard }))(Upload)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Menu from '@mui/material/Menu'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\n\nexport const ContextMenuActions = React.createContext({})\nfunction ContextMenu(props) {\n  const [items, setItems] = React.useState()\n\n  const contextMenu = {\n    open(e, items) {\n      if(props.menu?.position) return true\n      else e.preventDefault()\n      setItems(items)\n      props.dispatch({ type: 'menu/setPosition', position: [e.clientX, e.clientY] })\n      return false\n    }\n  }\n\n  const close = e => {\n    e?.preventDefault()\n    props.dispatch({ type: 'menu/setPosition', position: null })\n  }\n\n  const handleSelect = action => e => {\n    e.stopPropagation()\n    action()\n    close()\n  }\n\n  return (\n    <>\n      <ContextMenuActions.Provider value={contextMenu}>\n        {props.children}\n      </ContextMenuActions.Provider>\n      {\n        ReactDOM.createPortal(\n          <Menu\n            open={props.menu?.position}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={props.menu?.position && { top: props.menu.position[1], left: props.menu.position[0] }}\n            onClose={close}\n          >\n            {items?.map((item, i) =>\n              <MenuItem onClick={handleSelect(item.action)} key={i}>\n                <ListItemIcon>\n                  {item.icon}\n                </ListItemIcon>\n                <ListItemText>{item.name}</ListItemText>\n              </MenuItem>\n            )}\n          </Menu>,\n          document.body\n        )\n      }\n    </>\n  )\n}\n\nContextMenu.displayName = 'ContextMenu'\nContextMenu.propTypes = {\n  dispatch: PropTypes.func,\n  menu: PropTypes.array,\n  name: PropTypes.string,\n  children: PropTypes.func,\n}\n\nexport default connect(state => ({ menu: state.menu }))(ContextMenu)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@mui/material/Button'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport Checkbox from '@mui/material/Checkbox'\nimport FormControlLabel from '@mui/material/FormControlLabel'\n\nlet okCallback\nconst ConfirmationDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [text, setText] = React.useState()\n  const [confirmText, setConfirmText] = React.useState('')\n  const [checkboxText, setCheckboxText] = React.useState('')\n  const [checkboxValue, setCheckboxValue] = React.useState(true)\n\n  const handleAction = result => {\n    setOpen(false)\n    okCallback({ confirmed: result, checked: checkboxValue })\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    open(text, confirmText, checkboxText) {\n      return new Promise(resolve => {\n        okCallback = resolve\n        setOpen(true)\n        setText(text)\n        setConfirmText(confirmText)\n        setCheckboxText(checkboxText)\n      })\n    }\n  }))\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      onClose={() => handleAction(false)}\n    >\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {text && <p>{text}</p>}\n          {props.children}\n          {checkboxText && <FormControlLabel control={\n            <Checkbox\n              defaultChecked\n              value={checkboxValue}\n              onChange={e => setCheckboxValue(e.target.checked)}\n            />\n          } label={checkboxText} />}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={() => handleAction(false)} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={() => handleAction(true)} color=\"primary\">\n          {confirmText ?? 'Продолжить'}\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node\n}\nConfirmationDialog.displayName = 'ConfirmationDialog'\nexport default ConfirmationDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ConfirmationDialog from 'components/ConfirmationDialog'\nimport { deleteFilesOfPack } from 'localStorage/fileStorage'\nimport { deleteLocalPack } from 'localStorage/localPacks'\nimport { useHistory } from 'react-router-dom'\n\nconst DeleteConfirmationDialog = React.forwardRef((props, ref) => {\n  const confirmationDialogRef = React.useRef()\n  const history = useHistory()\n\n  React.useImperativeHandle(ref, () => ({\n    async confirmPackDeletion(packUUID) {\n      const { confirmed, checked } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить пак? Он будет удален безвозвратно.',\n          'Удалить',\n          'Удалить все связанные медиафайлы'\n        )\n      const deleteFiles = checked\n      if(confirmed) {\n        deleteFiles && await deleteFilesOfPack(packUUID)\n        await deleteLocalPack(packUUID)\n        history.push('/')\n      }\n      return confirmed\n    },\n\n    async confirmRoundDeletion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить раунд? Все вопросы также будут удалены.', 'Удалить')\n      return confirmed\n    }\n  }))\n\n  return (\n    <ConfirmationDialog ref={confirmationDialogRef}></ConfirmationDialog>\n  )\n})\n\nDeleteConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nDeleteConfirmationDialog.displayName = 'DeleteConfirmationDialog'\nexport default DeleteConfirmationDialog\n","import React from 'react'\nimport Button from '@mui/material/Button'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport TextField from '@mui/material/TextField'\n\nconst RenameDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => () => {})\n  const [subject, setSubject] = React.useState('')\n  const [oldName, setOldName] = React.useState('')\n  const [value, setValue] = React.useState('')\n\n  React.useImperativeHandle(ref, () => ({\n    askToRename(callback, subject, oldName) {\n      setCallback(() => callback)\n      setSubject(subject)\n      setOldName(oldName)\n      setValue(oldName)\n      setOpen(true)\n    }\n  }))\n\n  const handleCancel = () => {\n    setOpen(false)\n    callback()\n  }\n\n  const handleRename = () => {\n    setOpen(false)\n    callback(value)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth='xs'\n      open={open}\n      onClose={handleCancel}\n    >\n      <DialogTitle>Переименовать {subject}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label='Новое имя'\n          placeholder={oldName}\n          variant='outlined'\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          style={{ marginTop: 15 }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={handleRename} color=\"primary\" disabled={!value.length}>\n          Переименовать\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nRenameDialog.displayName = 'RenameDialog'\n\nexport default RenameDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport { MdDelete } from 'react-icons/md'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { BiRename } from 'react-icons/bi'\nimport { formatDate } from '../../../utils'\nimport { componentsPropTypes } from '../../../consts'\nimport PackImage from './index'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport { DashboardContext } from '../index'\nimport RenameDialog from 'components/RenameDialog'\nimport { loadLocalPack, saveLocalPack } from 'localStorage/localPacks'\n\nPack.propTypes = { pack: PropTypes.shape(componentsPropTypes.pack) }\nexport default function Pack(props) {\n  const confDialogRef = React.useRef()\n  const renameDialog = React.useRef()\n  const dashboardActions = React.useContext(DashboardContext)\n  const creationTime = formatDate(new Date(props.pack.creationTime))\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Переименовать', icon: <BiRename />, action: () => handleRenamePack() },\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeletePack() }\n    ])\n  }\n\n  const handleDeletePack = async () => {\n    if(await confDialogRef.current.confirmPackDeletion(props.pack.uuid))\n      dashboardActions.reloadPacks()\n  }\n\n  const handleRenamePack = async () => {\n    const newName = await new Promise(resolve =>\n      renameDialog.current.askToRename(resolve, 'пак', props.pack.name)\n    )\n    if(newName !== undefined){\n      let pack = await loadLocalPack(props.pack.uuid)\n      pack = { ...pack, name: newName }\n      saveLocalPack(pack)\n      dashboardActions.reloadPacks()\n    }\n  }\n\n  return (\n    <>\n      <div\n        className={[styles.packBase, styles.pack].join(' ')}\n        onContextMenu={handleOpenMenu}\n      >\n        <PackImage src={props.pack.logo} />\n        <div className={styles.info}>\n          <span className={styles.name}>{props.pack.name}</span>\n          <span className={styles.time}>Создано: {creationTime}</span>\n        </div>\n      </div>\n      <div onClick={e => e.stopPropagation()}>\n        <DeleteConfirmationDialog ref={confDialogRef} />\n        <RenameDialog ref={renameDialog} />\n      </div>\n    </>\n  )\n}\n","import React from 'react'\nimport styles from '../styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { BsPlus } from 'react-icons/bs'\nimport Skeleton from '@mui/material/Skeleton'\nimport { componentsPropTypes } from '../../../consts'\nimport { getFile } from 'localStorage/fileStorage'\nexport { default as Upload } from './Upload'\nexport { default as Pack } from './Pack'\n\nexport function Create() {\n  return (\n    <div className={[styles.packBase, styles.newPack].join(' ')}>\n      <span><BsPlus /> Создать новый пак</span>\n    </div>\n  )\n}\n\nLoading.propTypes = { name: PropTypes.string }\nexport function Loading(props) {\n  return (\n    <div className={[styles.packBase, styles.loading].join(' ')}>\n      <Skeleton variant='rectangular' width='100%' height='100%' className={styles.skeleton} />\n      { props.name && <span>Загрузка «{props.name}»</span> }\n    </div>\n  )\n}\n\nPackImage.propTypes = { src: componentsPropTypes.pack.thumbnail }\nexport default function PackImage(props) {\n  const [src, setSrc] = React.useState()\n\n  React.useEffect(() => {\n    let cleanup = () => {}\n    if(props.src) {\n      (async () => {\n        const file = await getFile(props.src)\n        const src = URL.createObjectURL(file.blob)\n        cleanup = () => URL.revokeObjectURL(src)\n        setSrc(src)\n      })()\n    } else {\n      setSrc()\n    }\n    return () => cleanup(src)\n  }, [props.src])\n\n  return (\n    <div className={styles.pictureContainer}>\n      {src\n        ? <img src={src} className={styles.thumbnail} />\n        : <div className={styles.thumbnail} />\n      }\n    </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { componentsPropTypes } from '../../consts.js'\nimport { Create, Upload, Loading, Pack } from './packTypes'\nimport { Link } from 'react-router-dom'\nimport { loadLocalPacks } from '../../localStorage/localPacks'\nimport { connect } from 'react-redux'\n\nexport default function Dashboard() {\n  return (\n    <LocalPacks />\n  )\n}\n\nexport const DashboardContext = React.createContext({})\nexport const LocalPacks = connect(state => ({ dashboard: state.dashboard }))(props => {\n  const [savedLocalPacks, setSavedLocalPacks] = React.useState()\n\n  const loadPacks = async () => {\n    const packsUUID = await loadLocalPacks()\n    const packs = packsUUID\n      .sort((a,b) => a.creationTime - b.creationTime)\n    setSavedLocalPacks(packs)\n  }\n\n  React.useEffect(() => loadPacks(), [])\n\n  const contextActions = {\n    reloadPacks: () => loadPacks()\n  }\n\n  return (\n    <div>\n      <DashboardContext.Provider value={contextActions}>\n        <div className={styles.packsList}>\n          <PackBase type='create' />\n          <PackBase type='upload' reloadPacks={loadPacks} />\n          { props.dashboard?.uploading?.reverse().map(({ name }, i) => <PackBase type='loading' name={name} key={i} />) }\n          { savedLocalPacks\n            ? savedLocalPacks.map(pack => <PackBase type='pack' key={pack.uuid} pack={pack} />)\n            : new Array(5).fill().map((_, i) => <PackBase type='loading' key={i} />)\n          }\n        </div>\n      </DashboardContext.Provider>\n    </div>\n  )\n})\n\nPackBase.propTypes = PackSwitch.propTypes = {\n  type: PropTypes.oneOf(['create', 'upload', 'pack', 'loading']),\n  pack: PropTypes.shape(componentsPropTypes.pack),\n  name: PropTypes.string,\n  reloadPacks: PropTypes.func\n}\n\nfunction PackBase(props) {\n  return (\n    ['loading', 'upload'].includes(props.type)\n      ? <PackSwitch {...props} />\n      : <Link to={props.type === 'pack' ? `/pack/${props.pack.uuid}` : `${props.type}`}><PackSwitch {...props} /></Link>\n  )\n}\n\nfunction PackSwitch(props) {\n  return (\n    {\n      'create': <Create />,\n      'upload': <Upload reloadPacks={props.reloadPacks} />,\n      'loading': <Loading name={props.name} />,\n      'pack': <Pack pack={props.pack} />\n    }[props.type]\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport IconButton from '@mui/material/IconButton'\nimport { ImGithub } from 'react-icons/im'\nimport { AiOutlineInfoCircle } from 'react-icons/ai'\nimport AppBar from '@mui/material/AppBar'\nimport Toolbar from '@mui/material/Toolbar'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport Dialog from '@mui/material/Dialog'\nimport DialogActions from '@mui/material/DialogActions'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\n\nexport default function Navigation() {\n  const [infoShown, setInfoShown] = React.useState(false)\n\n  return (\n    <AppBar position='static' style={{ zIndex: 4 }}>\n      <Toolbar color='primary'>\n        <div className={styles.logoContainer}>\n          <Link to='/' className={styles.logo}>\n            <Typography variant='h6' component='div'>\n              SIPacker\n            </Typography>\n          </Link>\n        </div>\n        <div>\n          <a href='https://github.com/VityaSchel/SIPacker' target='_blank' rel='noreferrer'>\n            <IconButton>\n              <ImGithub />\n            </IconButton>\n          </a>\n          <IconButton onClick={() => setInfoShown(true)}>\n            <AiOutlineInfoCircle />\n          </IconButton>\n        </div>\n        <Dialog\n          open={infoShown}\n          onClose={() => setInfoShown(false)}\n        >\n          <DialogTitle>\n            Автор приложения\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <p>Веб-приложение создано VityaSchel в 2021 году для игры SiGame как кроссплатформенная замена SIQuester.</p>\n              <p>Все свои идеи и предложения излагайте в пул-реквестах или хотя бы во вкладке Issues, а не в моих лс.</p>\n              <p>\n                <a\n                  href='https://github.com/VladimirKhil/SI/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0-.siq'\n                  className='onHover'\n                >\n                  Спецификация формата .siq\n                </a>\n              </p>\n              <p>\n                Большая благодарность Владимиру Хилю за то, что не игнорил мои вопросы во время разработки этого сайта\n                (привет разработчикам мафии онлайн и мафии го)\n              </p>\n              <p>\n                Также хочу пожелать удачи и легкой\n                службы <a\n                  href='https://vk.com/id245297843'\n                  target='_blank'\n                  rel=\"noreferrer\"\n                  className='onHover'\n                >Роме Кучину</a>, который своим комментарием натолкнул меня на идею создания этого сайта, но не может\n                работать со мной по причине Я в армии.\n              </p>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setInfoShown(false)}>ОК</Button>\n          </DialogActions>\n        </Dialog>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport { v4 as uuidv4 } from 'uuid'\nimport { useHistory } from 'react-router-dom'\nimport { saveLocalPack } from '../../localStorage/localPacks'\nimport dayjs from 'dayjs'\nimport { format } from '../../consts.js'\n\nexport default function NewPack() {\n  const [packName, setPackName] = React.useState('')\n  const history = useHistory()\n\n  const createPack = async () => {\n    const uuid = uuidv4()\n    const pack = {\n      uuid,\n      name: packName,\n      date: dayjs().format('DD.MM.YYYY'),\n      creationTime: Date.now(),\n      language: '',\n      version: format.latestVersion,\n      difficulty: 5,\n      rounds: []\n    }\n    await saveLocalPack(pack)\n    history.push(`/pack/${uuid}`)\n  }\n\n  const handleCheckSubmit = e => {\n    if(e.key === 'Enter') createPack()\n  }\n\n  const examples = ['Вопросы от славян', 'Игры, музыка и многое другое', 'Кинопак', 'Аниме и прочий буллщит', 'Мемная Солянка']\n\n  return (\n    <div className={styles.container}>\n      <TextField\n        label='Название пака'\n        variant='outlined'\n        value={packName}\n        onChange={e => setPackName(e.target.value)}\n        className={styles.field}\n        placeholder={examples[Math.floor(Math.random()*examples.length)]}\n        onKeyUp={handleCheckSubmit}\n        autoFocus\n      />\n      <Button\n        variant='contained'\n        onClick={() => createPack()}\n        disabled={!packName.length}\n      >Создать</Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Breadcrumbs from '@mui/material/Breadcrumbs'\nimport Typography from '@mui/material/Typography'\nimport { useLocation } from 'react-router'\nimport styles from '../styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes, uuidRegex } from 'consts'\nimport { mapPackState } from 'utils'\nimport { settings, rounds, question } from '../pathRegexps.json'\n\nPackBreadcrumbs.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackBreadcrumbs(props) {\n  const linkStyles = [styles.link, 'onHover', 'noDefaults'].join(' ')\n  const route = useLocation()\n  const [path, setPath] = React.useState([])\n\n  React.useEffect(() => {\n    const page = route.pathname.split(new RegExp(`/pack/${uuidRegex}`), 2)[1]\n    const parts = page.split('/')\n\n    const crumbs = {\n      dashboard: { to: '/', name: 'Паки' },\n      currentPack: { to: `/pack/${props.pack.uuid}`, name: props.pack.name },\n      settings: { to: `/pack/${props.pack.uuid}/settings`, name: 'Настройки' },\n      rounds: { to: `/pack/${props.pack.uuid}/rounds/${parts[2]}`, name: `Раунд ${parts[2]}` },\n      theme: { name: `Тема ${parts[4]}` },\n      questions: {\n        to: `/pack/${props.pack.uuid}/rounds/${parts[2]}/themes/${parts[4]}/questions/${parts[6]}`,\n        name: parts[6] === 'add' ? 'Новый вопрос' : `Вопрос за ${parts[6]}`\n      }\n    }\n\n    const paths = {\n      default: [crumbs.dashboard, crumbs.currentPack],\n      [settings]: [crumbs.dashboard, crumbs.currentPack, crumbs.settings],\n      [rounds]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds],\n      [question]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds, crumbs.theme, crumbs.questions],\n    }\n\n    for(let [pathRegex, path] of Object.entries(paths)){\n      if(new RegExp(`^${pathRegex}/?$`).test(page)){\n        return setPath(path)\n      }\n    }\n    return setPath(paths.default)\n  }, [route, props.pack])\n\n  return (\n    <Breadcrumbs>\n      {path.map(({ to, name }, i) => {\n        if(to && i !== path.length-1) {\n          return <Link to={to} className={linkStyles} key={i}>\n            {name}\n          </Link>\n        } else {\n          return <Typography color={i === path.length-1 ? 'text.primary' : 'text.secondary'} key={i}>{name}</Typography>\n        }\n      })}\n    </Breadcrumbs>\n  )\n}\n\nexport default connect(mapPackState)(PackBreadcrumbs)\n","import React from 'react'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport MuiDialog from '@mui/material/Dialog'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport Zoom from '@mui/material/Zoom'\nimport DialogActions from '@mui/material/DialogActions'\nimport Button from '@mui/material/Button'\nimport { generate, check } from 'localStorage/packGenerator'\nimport { saveAs } from 'file-saver'\nimport { slugify } from 'transliteration'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Zoom ref={ref} {...props} />\n})\n\nconst SavingDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [errors, setErrors] = React.useState([])\n  const [pack, setPack] = React.useState()\n\n  React.useImperativeHandle(ref, () => ({\n    save(pack) {\n      setOpen(true)\n      setPack(pack)\n    }\n  }))\n\n  React.useEffect(() => pack?.uuid && startProcessing(), [pack])\n\n  const startProcessing = async () => {\n    const errors = await check(pack)\n    setErrors(errors)\n    if(errors.length) return\n\n    setTimeout(bundlePack, 500)\n  }\n\n  const bundlePack = async () => {\n    const zipInBlob = await generate(pack)\n    saveAs(zipInBlob, `${slugify(pack.name)}.siq`, { autoBom: true })\n    setOpen(false)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      TransitionComponent={Transition}\n      onClose={() => errors.length && setOpen(false)}\n    >\n      <DialogTitle>Генерация архива</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          { !errors.length ? <>\n            <p>Производится генерация файла пака. Это может занять несколько секунд, в зависимости от количества медиа-файлов.</p>\n            <LinearProgress color='primary' />\n          </> : <>\n            <p>Исправьте следующие ошибки и перезапустите процесс генерации пака:</p>\n            <ul>\n              { errors.map(error => <li key={error}>{error}</li>) }\n            </ul>\n          </> }\n        </DialogContentText>\n      </DialogContent>\n      { Boolean(errors.length) &&\n        <DialogActions>\n          <Button autoFocus onClick={() => setOpen(false)}>\n            Закрыть\n          </Button>\n        </DialogActions>\n      }\n    </MuiDialog>\n  )\n})\n\nSavingDialog.displayName = 'ConfirmationDialog'\nexport default SavingDialog\n","import React from 'react'\nimport { useLocation, useHistory, Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../../consts'\nimport IconButton from '@mui/material/IconButton'\nimport { MdSettings, MdDelete, MdFileDownload } from 'react-icons/md'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport SavingDialog from './SavingDialog'\nimport { mapPackState } from '../../../utils'\nimport { root, rounds, question } from '../pathRegexps.json'\n\nPackToolbar.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackToolbar(props) {\n  const confirmationDialogRef = React.useRef()\n  const savingDialogRef = React.useRef()\n  const history = useHistory()\n  const { pathname } = useLocation()\n\n  const handleSave = () => savingDialogRef.current.save(props.pack)\n  const handleDeletePack = () => {\n    confirmationDialogRef.current.confirmPackDeletion(props.pack.uuid)\n  }\n\n  const handleDeleteRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    const pack = { ...props.pack }\n    const roundIndex = parseInt(pathname.split(`/pack/${props.pack.uuid}/rounds/`, 2)[1])\n    pack.rounds.splice(roundIndex - 1, 1)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}`)\n  }\n\n  const handleDeleteQuestion = async () => {\n\n  }\n\n  const buttons = props.pack && {\n    [root]: [\n      [handleSave, <MdFileDownload key='download' />],\n      [`/pack/${props.pack.uuid}/settings`, <MdSettings key='settings' />],\n      [handleDeletePack, <MdDelete key='delete' />, styles.delete]\n    ],\n    [rounds]: [\n      [handleDeleteRound, <MdDelete key='delete' />, styles.delete]\n    ],\n    [question]: [\n      [handleDeleteQuestion, <MdDelete key='delete' />, styles.delete]\n    ]\n  }\n\n  const path = pathname.split(`/pack/${props.pack.uuid}`, 2)[1]\n  const pageToolbar = Object.entries(buttons).find(\n    ([regex, toolbar]) => new RegExp(`^${regex}/?$`).test(path) && toolbar\n  )\n\n  return (\n    <>\n      <div className={styles.buttons}>\n        {pageToolbar && pageToolbar[1].map(([action, icon, styles], i) => <>\n          {\n            typeof action === 'string'\n              ? <Link to={action} className={styles} key={i}>\n                <IconButton>\n                  {icon}\n                </IconButton>\n              </Link>\n              : <IconButton className={styles} onClick={action} key={i}>\n                {icon}\n              </IconButton>\n          }\n        </>)}\n      </div>\n      <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      <SavingDialog ref={savingDialogRef} />\n    </>\n  )\n}\n\nexport default connect(mapPackState)(PackToolbar)\n","import PropTypes from 'prop-types'\nimport { Draggable } from 'react-beautiful-dnd'\nimport Card from '@mui/material/Card'\nimport styles from './styles.module.scss'\n\nfunction getStyle(style) {\n  if (style.transform) {\n    const axisLockY =\n      'translate(0px' +\n      style.transform.slice(\n        style.transform.indexOf(','),\n        style.transform.length\n      )\n    return {\n      ...style,\n      transform: axisLockY\n    }\n  }\n  return style\n}\n\nItem.propTypes = {\n  index: PropTypes.number,\n  draggableId: PropTypes.string,\n  className: PropTypes.string,\n  children: PropTypes.func,\n  tag: PropTypes.string,\n}\n\nexport default function Item(props) {\n  return (\n    <Draggable\n      draggableId={String(props.draggableId)}\n      index={props.index}\n    >\n      {provided =>\n        <Card\n          className={[props.className, styles.item].join(' ')}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          style={getStyle(provided.draggableProps.style)}\n        >\n          {props.children(provided)}\n        </Card>\n      }\n    </Draggable>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDragHandle } from 'react-icons/md'\n\nHandle.propTypes = { provided: PropTypes.object }\nexport default function Handle(props) {\n  return (\n    <div\n      className={styles.handle}\n      {...props.provided.dragHandleProps}\n    >\n      <MdDragHandle />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport CardContent from '@mui/material/CardContent'\nimport CardActionArea from '@mui/material/CardActionArea'\nimport { darkTheme } from '../../../../App'\nimport { Link } from 'react-router-dom'\nimport { MdDelete } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport TextField from '@mui/material/TextField'\nimport Item from 'components/ItemsList/Item'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport Typography from '@mui/material/Typography'\nimport Handle from 'components/ItemsList/Handle'\n\nRound.propTypes = ItemContent.propTypes = {\n  draggableId: PropTypes.string,\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  editing: PropTypes.bool,\n  setEditing: PropTypes.func,\n  handleRemoveRound: PropTypes.func,\n  roundNamesTextInput: PropTypes.arrayOf(PropTypes.string),\n  handleRoundNameChange: PropTypes.func\n}\n\nexport default function Round(props) {\n  const confirmationDialogRef = React.useRef()\n\n  const handleRemoveRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    props.handleRemoveRound(props.index)\n  }\n\n  return (\n    <Item {...props} className={styles.cardOfRound}>\n      {(provided) => !props.editing\n        ? <Link to={`/pack/${props.pack.uuid}/rounds/${props.index+1}`} className={styles.link}>\n          <CardActionArea>\n            <ItemContent {...props} />\n          </CardActionArea>\n        </Link>\n        : <div className={styles.item}>\n          <Handle provided={provided} />\n          <ItemContent {...props} />\n          <Toolbar handleRemoveRound={handleRemoveRound} />\n          <DeleteConfirmationDialog ref={confirmationDialogRef} />\n        </div>\n      }\n    </Item>\n  )\n}\n\nfunction ItemContent(props) {\n  const round = props.item\n\n  return (\n    <CardContent style={{ paddingBottom: darkTheme.spacing(2) }} className={styles.flex1}>\n      {\n        props.editing\n          ? <TextField\n            value={props.roundNamesTextInput[props.index]}\n            label='Название раунда'\n            variant='outlined'\n            onChange={e => props.handleRoundNameChange(e, props.index)}\n            size='small'\n            className={styles.inputField}\n          />\n          : <Typography variant='body2' color='text.secondary' className={styles.flex2}>\n            Раунд {props.index+1}. {round.name}\n          </Typography>\n      }\n    </CardContent>\n  )\n}\n\nToolbar.propTypes = { handleRemoveRound: PropTypes.func }\nfunction Toolbar(props) {\n  return (\n    <IconButton onClick={props.handleRemoveRound} className={styles.delete}>\n      <MdDelete />\n    </IconButton>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdCancel, MdAdd, MdDone } from 'react-icons/md'\nimport cx from 'classnames'\nimport Button from '@mui/material/Button'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormControl from '@mui/material/FormControl'\nimport OutlinedInput from '@mui/material/OutlinedInput'\nimport InputAdornment from '@mui/material/InputAdornment'\nimport IconButton from '@mui/material/IconButton'\n\nAddItem.propTypes = {\n  onAdd: PropTypes.func,\n  inputLabel: PropTypes.string,\n  buttonLabel: PropTypes.string,\n  className: PropTypes.string\n}\nexport default function AddItem(props) {\n  const [addingItem, setAddingItem] = React.useState(false)\n\n  return (\n    <div className={[styles.addItem, props.className].join(' ')}>\n      <ItemName\n        setAddingItem={setAddingItem}\n        handleAddItem={props.onAdd}\n        className={cx(styles.button, { [styles.expand]: addingItem })}\n        addingItem={addingItem}\n        label={props.inputLabel}\n      />\n      <div className={cx([styles.button, styles.addButtonOuter], { [styles.expand]: !addingItem })}>\n        <Button\n          variant='contained'\n          startIcon={<MdAdd />}\n          onClick={() => setAddingItem(true)}\n          className={styles.addButton}\n        >{props.buttonLabel}</Button>\n      </div>\n    </div>\n  )\n}\n\nItemName.propTypes = {\n  setAddingItem: PropTypes.func,\n  handleAddItem: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  className: PropTypes.string,\n  addingItem: PropTypes.bool,\n  label: PropTypes.string\n}\n\nfunction ItemName(props) {\n  const [value, setValue] = React.useState('')\n  const outlinedInput = React.useRef()\n\n  const handleDone = () => {\n    props.setAddingItem(false)\n    if(value.length) {\n      props.handleAddItem(value)\n      setValue('')\n    }\n  }\n\n  React.useEffect(() => {\n    props.addingItem && outlinedInput.current.focus()\n  }, [props.addingItem])\n\n  return (\n    <FormControl variant='outlined' className={props.className}>\n      <InputLabel size=\"small\">{props.label}</InputLabel>\n      <OutlinedInput\n        label={props.label}\n        size='small'\n        type='text'\n        value={value}\n        onChange={e => setValue(e.target.value)}\n        onKeyDown={e => e.key === 'Enter' && handleDone()}\n        style={{ paddingRight: 0 }}\n        inputRef={outlinedInput}\n        endAdornment={\n          <InputAdornment position='end'>\n            <IconButton onClick={handleDone}>\n              {!value.length ? <MdCancel /> : <MdDone />}\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\nimport Typography from '@mui/material/Typography'\nimport listStyles from './styles.module.scss'\n\nItemsList.propTypes = {\n  droppableId: PropTypes.string,\n  droppableClassName: PropTypes.string,\n  draggableProps: PropTypes.object,\n  list: PropTypes.array,\n  itemComponent: PropTypes.func,\n  useIdAsKey: PropTypes.bool,\n  noItemsLabel: PropTypes.string,\n  onDragEnd: PropTypes.func\n}\n\nexport default function ItemsList(props) {\n  const [itemsMap, setItemsMap] = React.useState({ map: new WeakMap(), length: 0 })\n\n  return (\n    <DragDropContext onDragEnd={props.onDragEnd}>\n      <Droppable droppableId={props.droppableId}>\n        {provided => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className={props.droppableClassName}\n          >\n            {(() => {\n              const children = props.list.length\n                ? props.list.map((item, i) => {\n                  const oid = object => {\n                    if(!itemsMap.map.has(object)) itemsMap.map.set(object, ++itemsMap.length)\n                    return itemsMap.map.get(object)\n                  }\n\n                  return (\n                    <props.itemComponent\n                      key={props.useIdAsKey ? item.id : oid(item)}\n                      index={i}\n                      draggableId={props.useIdAsKey ? item.id : oid(item)}\n                      item={item}\n                      {...props.draggableProps}\n                    />\n                  )\n                })\n                : <Typography\n                  variant='body1'\n                  gutterBottom\n                  className={listStyles.noItems}\n                >{props.noItemsLabel}</Typography>\n              setItemsMap(itemsMap)\n              return children\n            })()}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport IconButton from '@mui/material/IconButton'\nimport { MdEdit, MdDone } from 'react-icons/md'\nimport Typography from '@mui/material/Typography'\n\nEditingToolbar.propTypes = {\n  showButton: PropTypes.boolean,\n  editing: PropTypes.boolean,\n  onSwitch: PropTypes.func,\n  heading: PropTypes.string\n}\nexport default function EditingToolbar(props) {\n  return (\n    <div className={styles.toolbar}>\n      <h2 className={styles.text}>{props.heading}</h2>\n      {props.showButton && props.editing && <>\n        <Typography color='text.secondary' className={styles.hint}>\n          Все изменения сохраняются автоматически\n        </Typography>\n      </>}\n      {props.showButton && <IconButton onClick={props.onSwitch}>{props.editing ? <MdDone /> : <MdEdit />}</IconButton>}\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Round from './Round'\nimport AddItem from 'components/ItemsList/AddItem'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport ItemsList from 'components/ItemsList'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../../utils'\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n  return result\n}\n\nRoundsList.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundsList(props) {\n  const [rounds, setRounds] = React.useState([])\n  const [editing, setEditing] = React.useState(false)\n  const pack = props.pack\n\n  React.useEffect(() => setRounds(props.pack.rounds), [props.pack.rounds])\n\n  const handleAddRound = async name => {\n    let packRounds = [...pack.rounds]\n    packRounds.push({ name, themes: [] })\n    updateRounds(packRounds)\n  }\n\n  const handleRemoveRound = index => {\n    let packRounds = [...pack.rounds]\n    packRounds.splice(index, 1)\n    updateRounds(packRounds)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(rounds, result.source.index, result.destination.index)\n    updateRounds(items)\n  }\n\n  const handleSwitchEditing = () => {\n    setEditing(!editing)\n  }\n\n  const handleRoundNameChange = (e, index) => {\n    const namesList = [...rounds]\n    namesList[index].name = e.target.value\n    updateRounds(namesList)\n  }\n\n  const updateRounds = async items => {\n    setRounds(items)\n    let newPack = { ...pack, rounds: items }\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const names = rounds.map(pack => pack.name)\n\n  return (\n    <div className={styles.rounds}>\n      <EditingToolbar\n        showButton={Boolean(rounds.length)}\n        onSwitch={handleSwitchEditing}\n        editing={editing}\n        heading='Раунды пака'\n      />\n      <ItemsList\n        onDragEnd={onDragEnd}\n        droppableId='rounds'\n        droppableClassName={styles.droppable}\n        itemComponent={Round}\n        draggableProps={{\n          pack, editing,\n          handleRemoveRound: handleRemoveRound,\n          handleRoundNameChange: handleRoundNameChange,\n          roundNamesTextInput: names\n        }}\n        list={rounds}\n        noItemsLabel='Еще нет раундов'\n      />\n      <AddItem\n        onAdd={handleAddRound}\n        inputLabel='Название раунда'\n        buttonLabel='Добавить раунд'\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(RoundsList)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { MdKeyboardArrowRight } from 'react-icons/md'\nimport cx from 'classnames'\nimport { mapPackState } from '../../../../utils'\n\nCheckList.propTypes = { pack: PropTypes.object }\nfunction CheckList(props) {\n  const hasAtLeast1Question = Boolean(\n    props.pack.rounds.some(round =>\n      round.themes.some(theme =>\n        theme.questions.length\n      )\n    )\n  )\n  const hasAtLeast1Theme = Boolean(\n    props.pack.rounds.some(round =>\n      round.themes.length\n    )\n  )\n  const has5ThemesInEachRound = props.pack.rounds.length && Boolean(\n    props.pack.rounds.every(round =>\n      round.themes.length >= 5\n    )\n  )\n  const hasAtLeast25Questions = Boolean(\n    props.pack.rounds.reduce(\n      (prev, round) => prev+round.themes.reduce(\n        (prev, theme) => prev+theme.questions.length, 0\n      ), 0\n    ) >= 25\n  )\n  const hasQuestionWithAuction = Boolean(\n    props.pack.rounds.some(\n      round => round.themes.some(\n        theme => theme.questions.some(\n          question => question.type === 'auction'\n        )\n      )\n    )\n  )\n  const hasQuestionWithBagCat = Boolean(\n    props.pack.rounds.some(\n      round => round.themes.some(\n        theme => theme.questions.some(\n          question => question.type === 'bagcat'\n        )\n      )\n    )\n  )\n\n  const items = {\n    required: [\n      { name: 'Добавить авторов пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.authors) },\n      { name: 'Установить язык пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.language) },\n      { name: 'Создать раунд', link: '/pack/%packUUID%/', done: Boolean(props.pack.rounds.length) },\n      { name: 'Создать тему', link: props.pack.rounds.length && '/pack/%packUUID%/rounds/1', done: hasAtLeast1Theme },\n      { name: 'Создать вопрос', link:\n        props.pack.rounds.length &&\n        props.pack.rounds[0].questions?.length &&\n        '/pack/%packUUID%/rounds/1/1',\n      done: hasAtLeast1Question }\n      //Установить равное колво вопросов во всех темах одного раунда\n    ],\n    optional: [\n      { name: 'Добавить иконку пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.icon) },\n      { name: 'Добавить теги пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.tags) },\n      { name: 'Добавить не менее 5 тем в каждом раунде', done: has5ThemesInEachRound },\n      { name: 'Добавить не менее 25 вопросов всего', done: hasAtLeast25Questions },\n      { name: 'Добавить вопрос со ставкой', done: hasQuestionWithAuction },\n      { name: 'Добавить вопрос Кот в мешке', done: hasQuestionWithBagCat },\n      { name: 'Сжать файлы, чтобы размер каждого был менее 1 МБ' }\n    ]\n  }\n  const filterItems = f => f.filter(item => item.done !== undefined)\n  const reducer = (progress, point) => progress+Number(point.done)\n  const progress = filterItems(items.required).reduce(reducer, 0) + filterItems(items.optional).reduce(reducer, 0)\n  const max = filterItems(items.required).length + filterItems(items.optional).length\n\n  return (\n    <div className={styles.container}>\n      <Typography variant='h6' className={styles.text}>Чеклист:</Typography>\n      <div className={styles.progress}>\n        <LinearProgress variant='determinate' value={progress/max*100} className={styles.progressBar} />\n        <Typography variant='subtitle1' color='text.secondary'>Выполнено: {progress} из {max}</Typography>\n      </div>\n      <ol className={styles.list}>\n        <Items starting>{items.required}</Items>\n        <div className={styles.caption}>\n          <span className={styles.line} />\n          <Typography variant='overline' className={styles.text}>Можно публиковать пак</Typography>\n          <span className={styles.line} />\n        </div>\n        <Items ending>{items.optional}</Items>\n      </ol>\n    </div>\n  )\n}\n\nfunction Items(props) {\n  return (\n    props.children.map((item, i) => <Item\n      key={i}\n      first={props.starting && i === 0}\n      last={props.ending && i === props.children.length-1}\n    >{item}</Item>)\n  )\n}\n\nMarker.propTypes = { first: PropTypes.bool, last: PropTypes.bool }\nItem.propTypes = { children: PropTypes.node, ...Marker.propTypes }\nfunction Item(props) {\n  const location = useLocation()\n  const path = location.pathname.split('/').filter(String)\n  const packUUID = path[1]\n  const link = props.children.link && props.children.link.replace('%packUUID%', packUUID)\n\n  return (\n    <li className={props.children.done && styles.done}>\n      <Marker first={props.first} last={props.last} />\n      { link\n        ? <Link to={link} className={styles.link}>\n          <span>{props.children.name}</span>\n          <MdKeyboardArrowRight/>\n        </Link>\n        : <span>{props.children.name}</span>\n      }\n    </li>\n  )\n}\n\nfunction Marker(props) {\n  return (\n    <span className={styles.marker}>\n      <span className={cx(styles.lineBefore, { [styles.hidden]: props.first })}/>\n      <span className={styles.bullet}/>\n      <span className={cx(styles.lineAfter, { [styles.hidden]: props.last })}></span>\n    </span>\n  )\n}\n\nexport default connect(mapPackState)(CheckList)\n","import styles from './styles.module.scss'\nimport RoundsList from './List/'\nimport CheckList from './CheckList/'\n\nexport default function Rounds() {\n  return (\n    <div className={styles.roundsPage}>\n      <RoundsList />\n      <CheckList />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdFilterList, MdDelete } from 'react-icons/md'\nimport Stack from '@mui/material/Stack'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Typography from '@mui/material/Typography'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { deleteFilesOfPack, getDeletedPacks } from 'localStorage/fileStorage'\n\nFilters.propTypes = {\n  packs: PropTypes.arrayOf(PropTypes.string),\n  checkboxes: PropTypes.arrayOf(PropTypes.bool),\n  onChange: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default function Filters(props) {\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleChange = (e, i) => {\n    const checkboxes = [...props.checkboxes]\n    checkboxes[i] = { ...checkboxes[i], checked: e.target.checked }\n    props.onChange(checkboxes)\n  }\n\n  const handleOpenMenu = uuid => e => {\n    contextMenuActions.open(\n      e,\n      [\n        {\n          name: 'Удалить',\n          icon: <MdDelete />,\n          action: async () => {\n            if(uuid === null) {\n              const deletedPacks = await getDeletedPacks()\n              await Promise.all(\n                deletedPacks.map(\n                  async packUUID => await deleteFilesOfPack(packUUID)\n                )\n              )\n            } else {\n              await deleteFilesOfPack(uuid)\n            }\n            props.reloadPacks()\n          }\n        }\n      ]\n    )\n  }\n\n  return (\n    <Stack className={styles.filters}>\n      <div className={styles.text}>\n        <MdFilterList />\n        <Typography variant='overline' color='text.secondary'>\n          Фильтры\n        </Typography>\n      </div>\n      {props.packs.map((pack, i) =>\n        <FormControlLabel\n          key={i}\n          control={\n            <Checkbox\n              checked={Boolean(props.checkboxes[i]?.checked)}\n              onChange={e => handleChange(e, i)}\n            />\n          }\n          className={styles.checkbox}\n          label={pack === null ? 'Удаленные паки' : pack.name}\n          onContextMenu={handleOpenMenu(pack === null ? null : pack.uuid)}\n        />\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport IconButton from '@mui/material/IconButton'\nimport { MdInfoOutline, MdDelete } from 'react-icons/md'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport Button from '@mui/material/Button'\nimport filesize from 'filesize'\nimport { symbols } from 'components/ImageField'\nimport { formatDate } from '../../utils'\nimport { deleteFile } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nFile.propTypes = {\n  file: PropTypes.object,\n  handleSelect: PropTypes.func,\n  onRemove: PropTypes.func\n}\n\nexport default function File(props) {\n  const [fileSrc, setFileSrc] = React.useState()\n  const [infoDialogueOpen, setInfoDialogueOpen] = React.useState(false)\n  const [removing, setRemoving] = React.useState(false)\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  React.useEffect(() => {\n    const src = URL.createObjectURL(props.file.miniature)\n    setFileSrc(src)\n    return () => URL.revokeObjectURL(src)\n  }, [props.file.miniature])\n\n  const handleSelect = () => props.handleSelect(props.file.fileURI)\n\n  const handleShowInfo = e => {\n    e.stopPropagation()\n    setInfoDialogueOpen(true)\n  }\n\n  const handleCloseInfo = e => {\n    if(removing) return false\n    e.stopPropagation()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleDeleteFile = async () => {\n    const fileURI = props.file.fileURI\n    setRemoving(true)\n    await deleteFile(fileURI)\n    store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI })\n    setRemoving(false)\n    props.onRemove()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeleteFile() }\n    ])\n  }\n\n  return (\n    <>\n      <Grid\n        item xs={4} md={6} sm={12}\n        className={styles.item}\n        onClick={handleSelect}\n        onContextMenu={handleOpenMenu}\n      >\n        <div className={styles.itemInner}>\n          <IconButton\n            className={styles.button}\n            size='small'\n            onClick={handleShowInfo}\n          >\n            <MdInfoOutline />\n          </IconButton>\n          <div className={styles.preview}>\n            <img src={fileSrc} className={styles.foreground} />\n            <img src={fileSrc} className={styles.background} />\n          </div>\n          <div className={styles.fileName}>{props.file.fileName}</div>\n        </div>\n      </Grid>\n      <Dialog\n        open={infoDialogueOpen}\n        onClose={handleCloseInfo}\n      >\n        <DialogTitle className={styles.title}>Информация о файле {props.file.filename}</DialogTitle>\n        <DialogContent>\n          <p>Размер файла: <b>{filesize(props.file.blob.size, { symbols })}</b></p>\n          <p>Дата добавления: <b>{formatDate(new Date(props.file.addedAt))}</b></p>\n          <Button\n            variant='contained'\n            className={styles.delete}\n            onClick={handleDeleteFile}\n            disabled={removing}\n          >Удалить файл</Button>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport { getRecent } from 'localStorage/fileStorage'\nimport File from './File'\nimport Typography from '@mui/material/Typography'\n\nList.propTypes = {\n  packs: PropTypes.array,\n  handleSelect: PropTypes.func\n}\n\nexport default function List(props) {\n  const [files, setFiles] = React.useState([])\n\n  React.useEffect(() => { mapFiles() }, [props.packs])\n\n  const mapFiles = async () => {\n    const files = await getRecent(Object.keys(props.packs))\n    const mappedFiles = []\n    let packSwitchUUID\n    for (let file of files) {\n      if(packSwitchUUID !== file.packUUID){\n        packSwitchUUID = file.packUUID\n        mappedFiles.push({\n          packName: props.packs[packSwitchUUID],\n          files: [file]\n        })\n      } else {\n        mappedFiles[mappedFiles.length - 1].files.push(file)\n      }\n    }\n    setFiles(mappedFiles)\n  }\n\n  return (\n    <div className={styles.list}>\n      <div className={styles.content}>\n        {\n          files.length\n            ? files.map((packGroup, i) => <div key={i}>\n              <div className={styles.packDivider}>\n                {packGroup.packName\n                  ? <>Пак <b>{packGroup.packName}</b></>\n                  : <>Удаленный пак</>\n                }\n              </div>\n              <Grid container spacing={2} className={styles.grid}>\n                {packGroup.files.map((file, j) =>\n                  <File\n                    file={file}\n                    key={`${i}_${j}`}\n                    handleSelect={props.handleSelect}\n                    onRemove={mapFiles}\n                  />\n                )}\n              </Grid>\n            </div>)\n            : <div className={styles.noFilesYet}>\n              <Typography className={styles.hint}>Файлы не найдены</Typography>\n              <Typography className={styles.hint}>Попробуйте изменить фильтры</Typography>\n              <Typography className={styles.hint}>Загрузите файлы во вкладке Загрузка</Typography>\n            </div>\n        }\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dropzone from 'react-dropzone'\nimport styles from './styles.module.scss'\nimport { MdFileUpload, MdDone } from 'react-icons/md'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { saveFile, allowedFileTypes } from 'localStorage/fileStorage'\nimport Button from '@mui/material/Button'\n\nUpload.propTypes = {\n  packUUID: PropTypes.string,\n  setTab: PropTypes.func\n}\n\nexport default function Upload(props) {\n  const [uploading, setUploading] = React.useState(false)\n  const [uploadingFileIndex, setUploadingFileIndex] = React.useState()\n  const [filesListLength, setFilesListLength] = React.useState()\n  const [errors, setErrors] = React.useState([])\n  const [uploaded, setUploaded] = React.useState(false)\n\n  const handleDrop = async files => {\n    setUploaded(false)\n    setUploading(true)\n    setFilesListLength(files.length)\n    const errors = []\n    let hasErrors = false\n    for (let fileIndex in files) {\n      setUploadingFileIndex(Number(fileIndex)+1)\n      const file = files[fileIndex]\n      file.filename = file.name\n      try {\n        await saveFile(file, props.packUUID)\n      } catch(e) {\n        console.error(e)\n        hasErrors = true\n        setErrors(errors.concat({ filename: file.name, errorMessage: e }))\n      }\n    }\n    setUploaded(true)\n    if(!hasErrors) {\n      setUploading(false)\n      props.setTab('added')\n    }\n  }\n\n  return (\n    !uploading\n      ? <Dropzone\n        onDropAccepted={handleDrop}\n        accept={allowedFileTypes}\n      >\n        {({ getRootProps, getInputProps }) => (\n          <div className={styles.dropzone} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span className={styles.flex}><MdFileUpload /> Загрузить медиа-файл</span>\n            <span className={styles.supportedTypes}>\n              <span>Поддерживаемые типы файлов:</span>\n              <span>Фото: png, jpeg, gif</span>\n              <span>Аудио: mp3, wav, ogg</span>\n              <span>Видео: mp4</span>\n            </span>\n          </div>\n        )}\n      </Dropzone>\n      : <div className={styles.uploadingFiles}>\n        <div className={styles.uploadingScreen}>\n          <div className={styles.uploadingCaption}>\n            { !uploaded\n              ? <>\n                <CircularProgress size={20} thickness={10} />\n                <span className={styles.caption}>Загрузка файла {uploadingFileIndex} из {filesListLength}</span>\n              </>\n              : <>\n                <MdDone />\n                <span className={styles.caption}>{errors.length < filesListLength ? 'Файлы загружены' : 'Операция завершена'}</span>\n              </>\n            }\n          </div>\n          {Boolean(errors.length) && <div className={styles.errors}>\n            <span>Ошибки во время загрузки файлов:</span>\n            {errors.map((error, i) => <span key={i}>Файл «{error.filename}»: {\n              {\n                'File with such hash already exist': 'Такой файл уже загружен в этот пак'\n              }[error.errorMessage]\n            }</span>)}\n          </div>}\n          {uploaded && <Button variant='contained' onClick={() => setUploading(false)}>ОК</Button>}\n        </div>\n      </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport IconButton from '@mui/material/IconButton'\nimport DialogContent from '@mui/material/DialogContent'\nimport { MdClose } from 'react-icons/md'\nimport { emptyFunc } from '../../utils'\nimport Filters from './Filters'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nimport { getDeletedPacks } from 'localStorage/fileStorage'\nimport List from './List'\nimport Tabs from '@mui/material/Tabs'\nimport Tab from '@mui/material/Tab'\nimport Upload from './Upload'\n\nconst FileStorage = React.forwardRef((props, ref) => {\n  const [tab, setTab] = React.useState('added')\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => emptyFunc)\n  const [packs, setPacks] = React.useState([])\n  const [packUUID, setPackUUID] = React.useState([])\n  const [checkboxes, setCheckboxes] = React.useState([])\n\n  const handleClose = () => {\n    setOpen(false)\n    setCallback(() => emptyFunc)\n  }\n\n  const handleSelect = selectedFile => {\n    handleClose()\n    setTimeout(() => callback(selectedFile), 1)\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    async open(packUUID, callback) {\n      setCallback(() => callback)\n      await loadPacks()\n      setOpen(true)\n      setPackUUID(packUUID)\n    }\n  }))\n\n  const loadPacks = async () => {\n    const packs = await loadLocalPacks()\n    const deletedPacks = await getDeletedPacks()\n    if(deletedPacks.length) packs.push(null)\n    setPacks(packs)\n    setCheckboxes(\n      packs.map(\n        pack => {\n          const deletedPack = pack === null\n          const packUUID = deletedPack ? null : pack.uuid\n          const checked = checkboxes.find(({ uuid }) => uuid === packUUID)?.checked\n          return (\n            {\n              uuid: packUUID,\n              checked: checked !== undefined\n                ? Boolean(checked)\n                : !deletedPack\n            }\n          )\n        }\n      )\n    )\n  }\n\n  const filteredPacks = Object.fromEntries(checkboxes\n    .filter(cb => cb.checked)\n    .map(checkedPack => ([checkedPack.uuid,\n      checkedPack.uuid === null\n        ? 'Удаленные паки'\n        : packs.find(pack => pack.uuid === checkedPack.uuid)?.name\n    ])\n    )\n  )\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n    >\n      <DialogTitle className={styles.title}>\n        <span>Хранилище файлов</span>\n        <IconButton\n          onClick={handleClose}\n          className={styles.close}\n          sx={{ color: theme => theme.palette.grey[500] }}\n        >\n          <MdClose />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent className={styles.dialog}>\n        <Tabs\n          value={tab} variant='fullWidth'\n          onChange={(_, tab) => setTab(tab)}\n          textColor='inherit'\n          className={styles.tabs}\n        >\n          <Tab label='Добавленные' value='added' />\n          <Tab label='Загрузить' value='upload' />\n        </Tabs>\n        {\n          tab === 'added' &&\n          <div className={styles.files}>\n            <Filters\n              packs={packs}\n              checkboxes={checkboxes}\n              onChange={setCheckboxes}\n              reloadPacks={loadPacks}\n            />\n            <List\n              packs={filteredPacks}\n              handleSelect={handleSelect}\n            />\n          </div>\n        }\n        {\n          tab === 'upload' &&\n          <div className={styles.upload}>\n            <Upload packUUID={packUUID} setTab={setTab} />\n          </div>\n        }\n      </DialogContent>\n    </Dialog>\n  )\n})\n\nFileStorage.displayName = 'FileStorage'\nexport default FileStorage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport { getFile } from 'localStorage/fileStorage'\nimport filesize from 'filesize'\nexport const symbols = { B: 'Б', kB: 'кБ', MB: 'МБ', GB: 'ГБ', TB: 'ТБ', PB: 'ПБ', EB: 'ЭБ', ZB: 'ЗБ', YB: 'ЙБ' }\nimport FileStorage from 'components/FileStorage'\nimport { connect } from 'react-redux'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { MdErrorOutline } from 'react-icons/md'\nimport store from 'reducers/index'\n\nImageField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  name: PropTypes.string,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func,\n  onChange: PropTypes.func,\n}\n\nfunction ImageField(props) {\n  const [src, setSrc] = React.useState({})\n  const [srcUrl, setSrcUrl] = React.useState(null)\n  const [noFile, setNoFile] = React.useState(false)\n  const fileStorage = React.useRef()\n\n  React.useEffect(() => {\n    if(!src.fileURI) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: src.fileURI, callback: () => setNoFile(true) })\n  }, [setNoFile])\n\n  React.useEffect(() => {\n    const fileURI = props.value\n    let cleanup = () => {}\n    setSrcUrl()\n    if(fileURI) {\n      (async () => {\n        const file = await getFile(fileURI)\n        if(!file) return setNoFile(true)\n\n        setNoFile(false)\n\n        const blob = file.miniature\n        const name = file.fileName\n        const size = blob.size\n        setSrc({ name, size })\n\n        const url = URL.createObjectURL(blob)\n        setSrcUrl(url)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: file.fileURI, callback: () => setNoFile(true) })\n\n        cleanup = () => {\n          URL.revokeObjectURL(url)\n          store.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: file.fileURI })\n        }\n      })()\n    } else {\n      setSrc({})\n      setSrcUrl(null)\n    }\n    return () => cleanup()\n  }, [props.value])\n\n  const handleClick = async () => {\n    let result = await new Promise(resolve => fileStorage.current.open(props.pack.uuid, resolve))\n    if(!result) { return }\n    props.onChange(result)\n  }\n\n  const handleClear = () => {\n    setNoFile(false)\n    props.onChange(undefined)\n  }\n\n  return (\n    <div className={styles.container}>\n      <Typography\n        variant='body'\n        color='text.primary'\n        gutterBottom\n        className={styles.label}\n      >{props.label}:</Typography>\n      <div className={styles.preview}>\n        { srcUrl === null\n          ? <Placeholder onClick={handleClick} />\n          : noFile\n            ? <FileMissingIcon onClick={handleClick} />\n            : srcUrl !== undefined\n              ? <Image src={src} srcUrl={srcUrl} label={props.label} onClick={handleClick} />\n              : <Loading />\n        }\n        <div className={styles.info}>\n          { noFile\n            ? <FileMissing />\n            : src.size\n              ? <FileInfo src={src} />\n              : <FileNotSelected />\n          }\n          <Button\n            variant='contained'\n            onClick={handleClear}\n            disabled={!srcUrl && !noFile}\n          >Очистить поле</Button>\n        </div>\n      </div>\n      <FileStorage ref={fileStorage} />\n    </div>\n  )\n}\n\nPlaceholder.propTypes = FileMissingIcon.propTypes = { onClick: PropTypes.func }\nfunction Placeholder({ onClick }) {\n  return (\n    <div className={styles.placeholder} onClick={onClick}>\n      <span>Нажмите, чтобы выбрать</span>\n    </div>\n  )\n}\n\nfunction FileMissingIcon({ onClick }) {\n  return (\n    <div className={styles.fileMissing} onClick={onClick}>\n      <MdErrorOutline className={styles.icon} />\n    </div>\n  )\n}\n\nfunction FileMissing() {\n  return (\n    <span>\n      Файл не найден. Вероятно, вы выбрали его, но затем удалили из хранилища файлов.\n    </span>\n  )\n}\n\nFileInfo.propTypes = { src: PropTypes.object }\nfunction FileInfo({ src }) {\n  return (\n    <>\n      <span>Название файла: {src.name}</span>\n      <span>Размер файла: {filesize(src.size, { symbols })}</span>\n    </>\n  )\n}\n\nfunction FileNotSelected() {\n  return (\n    <>\n      <span>Файл не выбран</span>\n      <span>Выберете файл, нажав на кнопку левее.</span>\n    </>\n  )\n}\n\nfunction Loading() {\n  return (\n    <div className={styles.loading}>\n      <CircularProgress />\n    </div>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.object,\n  srcUrl: PropTypes.string,\n  onClick: PropTypes.func,\n  label: PropTypes.string\n}\nfunction Image({ src, srcUrl, onClick, label }) {\n  return (\n    <img\n      src={srcUrl}\n      alt={srcUrl ? `Изображение для поля ${label} с именем «${src.name}»` : ''}\n      onClick={onClick}\n      className={styles.image}\n    />\n  )\n}\n\nexport default connect(state => ({ pack: state.pack, fileRendering: state.fileRendering }))(ImageField)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport TextField from '@mui/material/TextField'\nimport Autocomplete from '@mui/material/Autocomplete'\nimport MenuItem from '@mui/material/MenuItem'\nimport Select from '@mui/material/Select'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormHelperText from '@mui/material/FormHelperText'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Slider from '@mui/material/Slider'\nimport styles from './styles.module.scss'\nimport ImageField from 'components/ImageField'\n\nconst formikMuiErrors = (formik, name) => ({\n  error: Boolean(formik.errors[name]),\n  helperText: formik.errors[name]\n})\n\nFormikTextField.propTypes =\nFormikAutocomplete.propTypes =\nFormikCheckbox.propTypes =\nFormikImageField.propTypes =\n{\n  name: PropTypes.string,\n  formik: PropTypes.object\n}\n\nexport function FormikTextField(props) {\n  const { name, formik, ...fieldProps } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <TextField\n      name={name}\n      value={formik.values[name]}\n      onChange={handleChange}\n      {...formikMuiErrors(formik, name)}\n      {...fieldProps}\n    />\n  )\n}\n\n\nexport function FormikAutocomplete(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = (_, value) => {\n    formik.setFieldValue(name, value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  let value = formik.values[name] ?? []\n  if(value.length === 1 && value[0] === '') value = []\n\n  const handleKeyDown = e => {\n    if(e.key === 'Enter') {\n      e.preventDefault()\n    }\n  }\n\n  return (\n    <Autocomplete\n      {...field}\n      multiple\n      options={[]}\n      value={value}\n      getOptionLabel={(option) => option}\n      freeSolo clearOnBlur={true}\n      onChange={handleChange}\n      renderInput={props => (\n        <TextField\n          {...field}\n          {...props}\n          {...formikMuiErrors(formik, name)}\n          placeholder='Нажмите Enter, чтобы добавить'\n          onKeyDown={handleKeyDown}\n        />\n      )}\n    />\n  )\n}\n\nFormikSelect.propTypes = { ...FormikTextField.propTypes, options: PropTypes.object }\nexport function FormikSelect(props) {\n  const { formik, name, options, ...field } = props\n  const error = { error: Boolean(formik.errors[name]) }\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel {...error}>{props.label}</InputLabel>\n      <Select\n        {...field}\n        name={name}\n        value={formik.values[name]}\n        onChange={handleChange}\n        {...error}\n      >\n        {Object.entries(options).map(([id, label]) => <MenuItem value={id} key={id}>{label}</MenuItem>)}\n      </Select>\n      <FormHelperText error>{formik.errors[name] && formik.errors[name]}</FormHelperText>\n    </FormControl>\n  )\n}\n\nexport function FormikCheckbox(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          name={name}\n          checked={formik.values[name]}\n          onChange={handleChange}\n        />\n      }\n      {...field}\n    />\n  )\n}\n\nFormikSlider.propTypes = {\n  ...FormikTextField.propTypes,\n  defaultValue: PropTypes.number,\n}\nexport function FormikSlider(props) {\n  const { formik, name, ...field } = props\n  const [value, setValue] = React.useState(formik.values[name])\n\n  const handleChange = value => {\n    setValue(value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  React.useEffect(() => formik.setFieldValue(name, value), [value])\n\n  return (\n    <div className={styles.slider}>\n      <span>{field.label}</span>\n      <Slider\n        name={name}\n        value={value}\n        onChange={e => requestAnimationFrame(() => handleChange(e.target.value))}\n        valueLabelDisplay='auto'\n        marks\n        {...field}\n      />\n    </div>\n  )\n}\n\nexport function FormikImageField(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = fileURI => {\n    formik.setFieldValue(name, fileURI)\n    let touched\n    if(fileURI !== undefined) {\n      touched = { ...formik.touched, [name]: true }\n    } else {\n      const formikTouched = { ...formik.touched }\n      delete formikTouched[name]\n      touched = formikTouched\n    }\n    formik.setTouched(touched)\n  }\n\n  return (\n    <ImageField\n      {...field}\n      value={formik.values[name]}\n      onChange={handleChange}\n    />\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport * as yup from 'yup'\nimport { componentsPropTypes, format } from '../../../consts'\nimport {\n  FormikTextField,\n  FormikAutocomplete,\n  FormikSelect,\n  FormikCheckbox,\n  FormikSlider,\n  FormikImageField\n} from 'components/FormikField'\nimport { connect } from 'react-redux'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport { useHistory, Prompt } from 'react-router-dom'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { initValues, mapPackState } from '../../../utils'\n\nconst validationSchema = yup.object({\n  logo: yup\n    .string('Добавьте логотип пака'),\n  name: yup\n    .string('Введите название пака')\n    .required('Заполните поле названия'),\n  authors: yup\n    .array()\n    .min(0, 'Заполните поле автора'),\n  publisher: yup\n    .string('Введите издателя'),\n  difficulty: yup\n    .number('Выберете сложность пака')\n    .positive()\n    .min(1)\n    .max(10)\n    .integer('Число должно быть целым')\n    .required('Заполните поле сложности'),\n  comment: yup\n    .string('Введите комментарий'),\n  tags: yup\n    .array('Введите теги'),\n  language: yup\n    .string('Введите язык пака')\n    .required('Заполните поле язык'),\n  over18: yup\n    .bool('Введите ограничения пака')\n})\n\nSettings.propTypes = {\n  pack: PropTypes.shape(componentsPropTypes),\n  dispatch: PropTypes.func\n}\n\nfunction Settings(props) {\n  const [submitting, setSubmitting] = React.useState(false)\n  const history = useHistory()\n  const initialValues = initValues(validationSchema, props.pack)\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      setSubmitting(true)\n      let pack = { ...props.pack, ...values }\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}`)\n    },\n  })\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormikTextField\n          name='name'\n          formik={formik}\n          label='Название'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='authors'\n          formik={formik}\n          label='Авторы'\n          disabled={submitting}\n        />\n        <FormikImageField\n          name='logo'\n          formik={formik}\n          label='Логотип'\n        />\n        <FormikTextField\n          name='publisher'\n          formik={formik}\n          label='Издатель пака (необязательно)'\n          disabled={submitting}\n        />\n        <FormikSlider\n          name='difficulty'\n          label='Сложность'\n          formik={formik}\n          disabled={submitting}\n          step={1} min={1} max={10}\n        />\n        <FormikSelect\n          name='language'\n          formik={formik}\n          label='Язык пака'\n          options={{\n            '': 'Не указано',\n            'ru-RU': 'Русский (ru-RU)',\n            'en-US': 'Английский (en-US)'\n          }}\n          disabled={submitting}\n        />\n        <FormikTextField\n          name='comment'\n          formik={formik}\n          label='Описание (необязательно)'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='tags'\n          formik={formik}\n          label='Теги (необязательно)'\n          disabled={submitting}\n        />\n        <FormikCheckbox\n          name='over18'\n          formik={formik}\n          label='Добавить метку 18+'\n          disabled={submitting}\n        />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={!Object.keys(formik.touched).length || submitting}\n        >\n          Сохранить\n        </Button>\n      </form>\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n      <div className={styles.info}>\n        <ul>\n          <li>Версия XML для описания формата: <span>{format.xmlVersion}</span></li>\n          <li>Кодировка текста в формате: <span>{format.encoding}</span></li>\n          <li>Версия формата: <span>{props.pack.version}</span></li>\n          <li>UUID: <span>{props.pack.uuid}</span></li>\n          <li>Дата создания: <span>{props.pack.date}</span></li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Settings)\n","import Typography from '@mui/material/Typography'\nimport styles from './styles.module.scss'\n\nexport default function NotFound404() {\n  return (\n    <div className={styles.centered}>\n      <Typography variant='h1'>Страница не найдена</Typography>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport TableBody from '@mui/material/TableBody'\nimport Paper from '@mui/material/Paper'\nimport ButtonBase from '@mui/material/ButtonBase'\nimport { useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Typography from '@mui/material/Typography'\n\nRoundTable.propTypes = { themes: PropTypes.array }\nexport default function RoundTable(props) {\n  const { url } = useRouteMatch()\n\n  return (\n    <TableContainer\n      component={Paper}\n      className={styles.table}\n    >\n      <Table>\n        <TableBody>\n          {props.themes.map((row, i) => (\n            <TableRow\n              key={i}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            >\n              <TableCell component='th' scope='row' style={{ minWidth: '30%' }}>{row.name}</TableCell>\n              {\n                row.questions.length\n                  ? row.questions.map((question, j) =>\n                    <TableCell key={j} className={styles.tableCell}>\n                      <Link to={`${url}/themes/${i+1}/questions/${question.price}`}>\n                        <ButtonBase className={styles.buttonBase}>\n                          {question.price}\n                        </ButtonBase>\n                      </Link>\n                    </TableCell>)\n                  : <TableCell align='right'>\n                    <Typography color='text.secondary' variant='caption'>Еще нет вопросов</Typography>\n                  </TableCell>\n              }\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableBody from '@mui/material/TableBody'\nimport TableHead from '@mui/material/TableHead'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport { MdImage, MdDone, MdMusicNote, MdVideocam, MdAdd } from 'react-icons/md'\nimport { useHistory, useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { connect } from 'react-redux'\nimport { mapPackState, questionTypes } from '../../../utils'\nimport Typography from '@mui/material/Typography'\n\n\nItemContent.propTypes = {\n  themeIndex: PropTypes.number,\n  theme: PropTypes.object,\n  pack: PropTypes.object\n}\n\nfunction ItemContent(props) {\n  const history = useHistory()\n  const route = useRouteMatch()\n\n  const sortedQuestions = props.theme.questions.sort((a,b) => a.price - b.price)\n\n  const questionType = type => questionTypes[type] || type\n\n  const questionURL = `${route.url}/themes/${props.themeIndex+1}/questions`\n  const handleOpenQuestion = price => () => history.push(`${questionURL}/${price}`)\n  const row = { sx: { '&:last-child td, &:last-child th': { border: 0 } } }\n  const cell1 = { component: 'th', scope: 'row' }\n\n  return (\n    <>\n      <TableContainer>\n        <Table sx={{ minWidth: 650 }}>\n          <TableHead>\n            <TableRow>\n              <TableCell>Цена</TableCell>\n              <Cell wp={10}>Текст</Cell>\n              <Cell wp={9}>Ответы</Cell>\n              <Cell wp={4}>Вид вопроса</Cell>\n              <Cell wp={1}><MdImage /></Cell>\n              <Cell wp={1}><MdMusicNote /></Cell>\n              <Cell wp={1}><MdVideocam /></Cell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {sortedQuestions.length\n              ? sortedQuestions.map((question, i) => (\n                <TableRow\n                  key={i}\n                  hover\n                  onClick={handleOpenQuestion(question.price)}\n                  className={styles.tableRow}\n                  {...row}\n                >\n                  <TableCell {...cell1}>{question.price}</TableCell>\n                  <Cell wp={10}>{question.text}</Cell>\n                  <Cell wp={10}>\n                    {question.correctAnswers?.map((answer, i, a) =>\n                      <span key={i}>{answer}{i !== a.length - 1 && ', '}</span>)}\n                    {question.incorrectAnswers?.length && ', '}\n                    {question.incorrectAnswers?.map((answer, i, a) => <>\n                      <span className={styles.strikethrough} key={i}>{answer}</span>\n                      {i !== a.length - 1 && ', '}\n                    </>)}\n                  </Cell>\n                  <Cell wp={3}>{questionType(question.type)}</Cell>\n                  <Cell wp={1}>{question.image && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.audio && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.movie && <MdDone />}</Cell>\n                </TableRow>\n              ))\n              : <TableRow {...row}>\n                <TableCell {...cell1} colSpan={7}>\n                  <Typography color='text.secondary' variant='caption'>Еще нет вопросов</Typography>\n                </TableCell>\n              </TableRow>}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Link to={`${questionURL}/add`}>\n        <Button\n          color='primary'\n          startIcon={<MdAdd />}\n        >Создать вопрос</Button>\n      </Link>\n    </>\n  )\n}\n\nCell.propTypes = { wp: PropTypes.number, children: PropTypes.node }\nfunction Cell(props) {\n  return (\n    <TableCell align='right' style={{ width: props.wp/26*100+'%' }}>{props.children}</TableCell>\n  )\n}\n\nexport default connect(mapPackState)(ItemContent)\n","import PropTypes from 'prop-types'\n\nconst ClickIsolator = props => (\n  <div onClick={e => e.stopPropagation()} {...props}>{props.children}</div>\n)\n\nClickIsolator.propTypes = { children: PropTypes.any }\nClickIsolator.displayName = 'ClickIsolator'\nexport default ClickIsolator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport ItemContent from './Questions'\nimport Item from 'components/ItemsList/Item'\nimport { connect } from 'react-redux'\nimport { MdDelete, MdExpandMore } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport ClickIsolator from 'components/ClickIsolator'\nimport { mapPackState } from '../../../utils'\nimport Handle from 'components/ItemsList/Handle'\n\nTheme.propTypes = {\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  expandId: PropTypes.number,\n  setExpand: PropTypes.func,\n  draggableId: PropTypes.string,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.string,\n}\n\nfunction Theme(props) {\n  const theme = props.item\n  const expand = props.draggableId === props.expandId\n  const [themeName, setThemeName] = React.useState(theme.name)\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.handleRemoveTheme(props.index)\n  }\n\n  const handleChangeThemeName = e => {\n    const newThemeName = e.target.value\n    setThemeName(newThemeName)\n    props.handleChangeThemeName(props.index, newThemeName)\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={theme.id.toString()}\n    >\n      {(provided) => <Accordion\n        expanded={expand}\n        onChange={(_, isExpand) => props.setExpand(isExpand ? theme.id : undefined)}\n      >\n        <AccordionSummary\n          expandIcon={<MdExpandMore />}\n        >\n          <div className={styles.toolbar}>\n            <Handle provided={provided} />\n            <ClickIsolator className={styles.name}>\n              <TextField\n                value={themeName}\n                label='Название темы'\n                variant='outlined'\n                onChange={handleChangeThemeName}\n                size='small'\n                fullWidth\n              />\n            </ClickIsolator>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <ItemContent theme={theme} themeIndex={props.index} />\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n\nexport default connect(mapPackState)(Theme)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport AddItem from 'components/ItemsList/AddItem'\nimport ItemsList from 'components/ItemsList'\nimport Theme from './Theme'\n\nThemesEditing.propTypes = {\n  onDragEnd: PropTypes.func,\n  themes: PropTypes.array,\n  expand: PropTypes.bool,\n  setExpand: PropTypes.func,\n  setEditing: PropTypes.func,\n  handleAddTheme: PropTypes.func,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.func\n}\nexport default function ThemesEditing(props) {\n  return (\n    <>\n      <ItemsList\n        droppableId='themes'\n        onDragEnd={props.onDragEnd}\n        list={props.themes}\n        draggableProps={{\n          setExpand: props.setExpand,\n          handleRemoveTheme: props.handleRemoveTheme,\n          handleChangeThemeName: props.handleChangeThemeName,\n          expandId: props.expand\n        }}\n        noItemsLabel='Еще нет созданных тем'\n        itemComponent={Theme}\n        useIdAsKey={true}\n      />\n      <AddItem\n        onAdd={props.handleAddTheme}\n        inputLabel='Название темы'\n        buttonLabel='Добавить тему'\n        className={styles.addTheme}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { uuidRegex } from '../../../consts'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport clone from 'just-clone'\nimport NotFound404 from 'components/NotFound404'\nimport RoundTable from './RoundTable'\nimport ThemesEditing from './ThemesEditing'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../utils'\n\nRoundThemes.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundThemes(props) {\n  const [themes, setThemes] = React.useState([])\n  const [found, setFound] = React.useState()\n  const route = useLocation()\n  const roundIndex = route.pathname.split(new RegExp(`/pack/${uuidRegex}/rounds/`), 2)[1]\n  const [expand, setExpand] = React.useState()\n  let [editing, setEditing] = React.useState(false)\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const round = props.pack.rounds[roundIndex-1]\n  React.useEffect(() => {\n    if(round) setFound(true)\n    else setFound(false)\n  }, [])\n\n  const handleAddTheme = async name => {\n    let roundThemes = [...themes]\n    roundThemes.push({ name, id: Date.now(), questions: [] })\n    updateThemes(roundThemes)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(themes, result.source.index, result.destination.index)\n    updateThemes(items)\n  }\n\n  const updateThemes = async items => {\n    setThemes(items)\n    const newPack = clone(props.pack)\n    newPack.rounds[roundIndex-1].themes = items\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const handleRemoveTheme = index => {\n    let roundThemes = [...themes]\n    roundThemes.splice(index, 1)\n    updateThemes(roundThemes)\n  }\n\n  const handleChangeThemeName = (index, newName) => {\n    let roundThemes = [...themes]\n    roundThemes[index].name = newName\n    updateThemes(roundThemes)\n  }\n\n  React.useEffect(() => {\n    round && setThemes(round.themes)\n  }, [])\n\n  return (\n    found !== undefined && (\n      found\n        ? <div>\n          <EditingToolbar\n            showButton={Boolean(themes.length)}\n            onSwitch={() => setEditing(!editing)}\n            editing={editing}\n            heading={`Темы и вопросы раунда ${round.name}`}\n          />\n          {themes.length && !editing\n            ? <RoundTable\n              themes={themes}\n            />\n            : <ThemesEditing\n              themes={themes}\n              onDragEnd={onDragEnd}\n              expand={expand}\n              setExpand={setExpand}\n              setEditing={setEditing}\n              handleAddTheme={handleAddTheme}\n              handleRemoveTheme={handleRemoveTheme}\n              handleChangeThemeName={handleChangeThemeName}\n            />\n          }\n        </div>\n        : <NotFound404 />\n    )\n  )\n}\n\nexport default connect(mapPackState)(RoundThemes)\n","export const questionPriceHint = <p>\n  <b>Стоимость вопроса</b> — это число очков, обычно кратное 100, которое получает игрок\n  в случае правильного ответа и теряет в случае неправильного ответа (за исключением ответа на Вопрос без риска).\n  Это число отображается в таблице раунда.\n</p>\n\nexport const questionTypesHint = <>\n  <p>\n    <b>Обычный</b> — Этот вопрос задаётся, затем у всех игроков есть время, чтобы подумать и нажать на кнопку.\n    Нажавший раньше остальных отвечает. В случае верного ответа стоимость вопроса прибавляется к счёту\n    игрока, в случае неверного - стоимость вопроса снимается со счёта игрока. В случае неверного ответа\n    кнопку снова могут жать не отвечавшие игроки.\n  </p>\n  <p>\n    <b>Со ставкой (аукцион)</b> — При розыгрыше этого вопроса игроки последовательно, в порядке возрастания сумм (но начиная\n    с того, кому вопрос достался), делают ставки, перекрывая ставки оппонентов. Минимальная ставка равна\n    номинальной стоимости вопроса. Можно сказать «Пас» и выйти из торгов. Можно пойти «ва-банк» —\n    поставить всё на кон. Ва-банк перекрывает все простые ставки, но пойти ва-банк можно только\n    перекрывая по сумме предыдущую ставку. Тот, кто поставит больше остальных, будет единилично\n    играть этот вопрос без возможности отказаться. Стоимость вопроса равна стоимости ставки играющего.\n  </p>\n  <p>\n    <b>С секретом</b> — Тот, кому достался вопрос, обязан передать его другом игроку, и последний обязан\n    ответить на полученный вопрос. Вопрос имеет собственную тему и стоимость, неизвестную до отдачи.\n  </p>\n  <p>\n    <b>Кот в мешке</b> — На этот вопрос отвечает 1 человек. Отвечающего назначает открывший вопрос игрок.\n    У вопроса имеется собственная тема и стоимость.\n  </p>\n  <p>\n    <b>Без риска</b> — На этот вопрос отвечает только игрок, открывший его. В случае правильного ответа\n    он зарабатывает сумму, равную удвоенному номиналу вопроса. В случае неверного ответа он ничего не теряет.\n  </p>\n</>\n\nexport const realPriceHint = 'Раннее указанная стоимость отображается в таблице с темами, в то время как настоящая стоимость влияет на счет игроков после ответа. Это поле действует лишь для вопросов с секретом и кот в мешке'\n\nexport const bagcatRealPriceTypeHint = <>\n  <p>\n    У вопроса Кот в мешке существует «настоящая стоимость», которая влияет на счет игроков после ответа, в отличии\n    от обычной стоимости, которая отображается в таблице раунда.\n  </p>\n  <p>\n    Настоящая стоимость для каждого вопроса может быть фиксированной или определяться в течение игры. Если вы выберете\n    <b>фиксированную настоящую стоимость</b>, вам необходимо будет указать ее ниже.\n  </p>\n  <p>\n    Во втором случае, настоящая стоимость выбирается игроком, на выбор которому дается два варианта: наименьшая и\n    наибольшая стоимость из всех вопросов в раунде.\n  </p>\n  <p>\n    Третий вариант это когда настоящая стоимость вопроса выбирается игроком в заданном вам интервале с заданным вами шагом.\n    Если шаг не указан, выбирать можно только крайние значения\n  </p>\n</>\n\nexport const scenarioHint = <p>\n  У каждого вопроса есть <b>сценарий</b> — порядок действий, выполняемый при выборе вопроса.\n  Большинству вопросов достаточно одного события в сценарии — текста, изображения, аудио или видео,\n  тем не менее, вы можете добавить до 100 событий в один сценарий.\n</p>\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { GrCircleQuestion } from 'react-icons/gr'\nimport Tooltip from '@mui/material/Tooltip'\nimport IconButton from '@mui/material/IconButton'\n\nWithHint.propTypes = { hint: PropTypes.node, children: PropTypes.node }\nexport default function WithHint(props) {\n  return (\n    <div className={styles.hint}>\n      {props.children}\n      <Tooltip title={props.hint}>\n        <IconButton>\n          <GrCircleQuestion />\n        </IconButton>\n      </Tooltip>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport {\n  FormikTextField,\n  FormikSelect,\n  FormikCheckbox,\n  FormikAutocomplete\n} from 'components/FormikField'\nimport { questionTypes } from '../../../../utils'\nimport { questionPriceHint, questionTypesHint, realPriceHint, bagcatRealPriceTypeHint } from './hints'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\n\nFormFields.propTypes = {\n  formik: PropTypes.object,\n  submitting: PropTypes.bool\n}\nexport default function FormFields({ formik, submitting }) {\n  const fieldProps = {\n    formik, disabled: submitting\n  }\n\n  const numberFieldProps = {\n    ...fieldProps,\n    type: 'number',\n    InputProps: { inputProps: { min: 0, max: 4294967295 } }\n  }\n\n  return (\n    <>\n      <Typography variant='h6'>Информация о вопросе</Typography>\n      <WithHint hint={questionPriceHint}>\n        <FormikTextField name='price' label='Стоимость' {...numberFieldProps} />\n      </WithHint>\n      <WithHint hint={questionTypesHint}>\n        <FormikSelect name='type' label='Тип вопроса' options={questionTypes} {...fieldProps} />\n      </WithHint>\n      {formik.values.type === 'cat' && <WithHint hint={realPriceHint}>\n        <FormikTextField name='realprice' label='Натоящая стоимость вопроса' {...numberFieldProps} />\n      </WithHint>}\n      {formik.values.type === 'bagcat' && <>\n        <WithHint hint={bagcatRealPriceTypeHint}>\n          <FormikSelect\n            name='questionPriceType'\n            label='Как определяется стоимость вопроса'\n            options={{\n              'fixed': 'Фиксирована вами',\n              'minMax': 'Выбором игрока из минимума и максимума стоимостей вопросов в раунде',\n              'byPlayer': 'Игроком в фиксированном вами интервале и шагом'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n        {formik.values.questionPriceType === 'fixed' && <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='Натоящая стоимость вопроса' {...numberFieldProps} />\n        </WithHint>}\n        {formik.values.questionPriceType === 'byPlayer' && <WithHint hint={realPriceHint}>\n          <div className={styles.grouped}>\n            <FormikTextField name='realpriceFrom' label='От' {...numberFieldProps} />\n            <FormikTextField name='realpriceTo' label='До' {...numberFieldProps} />\n            <FormikTextField name='realpriceStep' label='Шаг' {...numberFieldProps} />\n          </div>\n        </WithHint>}\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <FormikCheckbox name='transferToSelf' label='Можно отдать вопрос себе' {...fieldProps} />\n        <WithHint hint={<p>Если выбран вариант <b>Никогда</b>, то вопрос не задаётся, игроку просто перечисляется его стоимость</p>}>\n          <FormikSelect\n            name='detailsDisclosure'\n            label='Когда узнается стоимость вопроса'\n            options={{\n              'before': 'До передачи вопроса',\n              'after': 'После передачи вопроса',\n              'never': 'Никогда'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n      </>}\n      <Typography variant='h6'>Ответы</Typography>\n      <FormikAutocomplete\n        name='correctAnswers'\n        formik={formik}\n        label='Правильные ответы'\n        disabled={submitting}\n      />\n      <FormikAutocomplete\n        name='incorrectAnswers'\n        formik={formik}\n        label='Неправильные ответы (необязательно)'\n        disabled={submitting}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDelete, MdExpandMore, MdImage, MdMusicNote, MdVideocam, MdShortText, MdRecordVoiceOver } from 'react-icons/md'\nimport Item from 'components/ItemsList/Item'\nimport Handle from 'components/ItemsList/Handle'\nimport Typography from '@mui/material/Typography'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport Slider from '@mui/material/Slider'\nimport Decimal from 'decimal.js'\nimport ImageField from 'components/ImageField'\nimport Fade from '@mui/material/Fade'\n\nScenarioEvent.propTypes = {\n  index: PropTypes.number,\n  item: PropTypes.object,\n  onDelete: PropTypes.func,\n  onChangeDuration: PropTypes.func,\n  onChangeData: PropTypes.func,\n  draggableId: PropTypes.number,\n  formik: PropTypes.object,\n  scenario: PropTypes.object\n}\n\nexport default function ScenarioEvent(props) {\n  const [duration, setDuration] = React.useState()\n  const [eventData, setEventData] = React.useState()\n  const [expand, setExpand] = React.useState(false)\n  const formatTime = time => `${time.toFixed(1)} cек.`\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.onDelete(props.index)\n  }\n\n  React.useEffect(() => {\n    if(props.index !== undefined && duration !== undefined)\n      props.onChangeDuration(props.index, duration)\n  }, [duration])\n\n  React.useEffect(() => {\n    const scenarioEvent = props.scenario[props.index]\n    const data = scenarioEvent.data\n    const eventDuration = scenarioEvent.duration\n    !eventData && setEventData(data)\n    !duration && setDuration(eventDuration)\n  }, [props.scenario])\n\n  React.useEffect(() => eventData && requestAnimationFrame(() => props.onChangeData(props.index, eventData)), [eventData])\n\n  // 0.1 - 1.0 with step 0.1\n  // 1.0 - 10.0 with step 0.5\n  // 10.0 - 180.0 with step 1\n  const step0_1 = new Array(1/0.1).fill().map((_, i) => new Decimal(0.1).times(i+1).toNumber())\n  const step0_5 = new Array((10-1)/0.5).fill().map((_, i) => 1+(i+1)*0.5)\n  const step1 = new Array((30-10)/1).fill().map((_, i) => 10+1+i)\n  const step5 = new Array((60-30)/5).fill().map((_, i) => 30+(i+1)*5)\n  const durationMarks = [...step0_1, ...step0_5, ...step1, ...step5].map((value, i) => ({ _label: value, value: i }))\n\n  const closestToMarks = (duration, marks) => {\n    marks = marks.map(({ _label }) => _label)\n    for(let i = 0; i < marks.length; i++) {\n      if(marks[i] <= duration && marks[i+1] > duration) {\n        return i\n      }\n    }\n    return duration\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={props.draggableId.toString()}\n    >\n      {(provided) => <Accordion expanded={expand} onChange={(_, expanded) => setExpand(expanded)}>\n        <AccordionSummary expandIcon={<MdExpandMore />}>\n          <div className={styles.item}>\n            <Handle provided={provided} />\n            <Typography variant='body1' className={styles.itemType}>\n              {{\n                'image': 'Изображение',\n                'voice': 'Аудио',\n                'video': 'Видео',\n                'text': 'Текст',\n                'say': 'Слово ведущего'\n              }[props.item.type] ?? `Событие «${props.item.type}»`}\n              <span className={styles.spacing} />\n              {{\n                'image': <MdImage />,\n                'voice': <MdMusicNote />,\n                'video': <MdVideocam />,\n                'text': <MdShortText />,\n                'say': <MdRecordVoiceOver />\n              }[props.item.type]}\n            </Typography>\n            <Fade in={!expand}>\n              <Typography variant='body2' color='text.secondary'>\n                {formatTime(props.item.duration)}\n              </Typography>\n            </Fade>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <div className={styles.details}>\n            <div className={styles.duration}>\n              <Slider\n                defaultValue={durationMarks.find(({ _label }) => _label === 3).value}\n                step={null}\n                marks={durationMarks}\n                min={durationMarks[0].value}\n                max={durationMarks[durationMarks.length - 1].value}\n                valueLabelDisplay='off'\n                valueLabelFormat={i => durationMarks[i]._label}\n                value={duration !== undefined && closestToMarks(duration, durationMarks)}\n                onChange={e => requestAnimationFrame(() => setDuration(durationMarks[e.target.value]._label))}\n              />\n              <TextField\n                label='Время'\n                variant='outlined'\n                size='small'\n                type='number'\n                InputProps={{ inputProps: { min: 0.1, step: 0.1 } }}\n                className={styles.time}\n                value={duration}\n                onChange={e => setDuration(Number(e.target.value))}\n              />\n            </div>\n            {{\n              'text': <TextField\n                value={eventData?.text}\n                onChange={e => setEventData({ text: e.target.value })}\n                label='Введите текст'\n                multiline\n                rows={4}\n                fullWidth\n              />,\n              'image': <ImageField\n                value={eventData?.imageField}\n                onChange={newValue => setEventData({ imageField: newValue })}\n                label='Изображение'\n              />\n            }[props.item.type]}\n          </div>\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport ItemsList from 'components/ItemsList'\nimport MenuItem from '@mui/material/MenuItem'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport Select from '@mui/material/Select'\nimport IconButton from '@mui/material/IconButton'\nimport ScenarioEvent from './ScenarioEvent'\nimport { MdAdd } from 'react-icons/md'\nimport { scenarioHint } from './hints'\nimport WithHint from './WithHint'\nimport { connect } from 'react-redux'\nimport { useParams } from 'react-router'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { mapPackState } from 'utils.js'\n\nScenario.propTypes = { formik: PropTypes.object, pack: PropTypes.object, dispatch: PropTypes.func }\nfunction Scenario({ formik, ...props }) {\n  const [scenario, setScenario] = React.useState([])\n  const [newEventValue, setNewEventValue] = React.useState('')\n  const [scenarioUpdateTimeout, setScenarioUpdateTimeout] = React.useState()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const question = questions[questions.findIndex(({ price }) => price === Number(questionPrice))]\n  React.useEffect(() => question.scenario && setScenario(question.scenario), [])\n\n  React.useEffect(() => {\n    clearTimeout(scenarioUpdateTimeout)\n    const scenarioUpdateQueue = setTimeout(() => updateQuestionScenario(scenario), 1000)\n    setScenarioUpdateTimeout(scenarioUpdateQueue)\n  }, [scenario])\n\n  const updateQuestionScenario = async scenario => {\n    const pack = { ...props.pack }\n    const round = params.roundIndex-1\n    const questions = pack.rounds[round].themes[params.themeIndex-1].questions\n    const question = questions[questions.findIndex(({ price }) => price === Number(price))]\n    question.scenario = scenario\n    await saveLocalPack(pack)\n    props.dispatch({ type: 'pack/load', pack })\n  }\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(scenario, result.source.index, result.destination.index)\n    setScenario(items)\n  }\n\n  const handleAddEvent = () => {\n    setNewEventValue('')\n    setScenario([...scenario, { type: newEventValue, duration: 3, data: {} }])\n  }\n\n  const handleDelete = index => {\n    const newScenario = [...scenario]\n    newScenario.splice(index, 1)\n    setScenario(newScenario)\n  }\n\n  const handleChangeDuration = (index, value) => {\n    const newScenario = [...scenario]\n    newScenario[index].duration = value\n    setScenario(newScenario)\n  }\n\n  const handleChangeData = (index, data) => {\n    const newScenario = [...scenario]\n    newScenario[index].data = data\n    setScenario(newScenario)\n  }\n\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'>Сценарий</Typography>\n      </WithHint>\n      <ItemsList\n        droppableId='scenario'\n        onDragEnd={onDragEnd}\n        list={scenario}\n        draggableProps={{\n          onDelete: handleDelete, formik,\n          onChangeDuration: handleChangeDuration,\n          onChangeData: handleChangeData,\n          scenario\n        }}\n        noItemsLabel='Сценарий пуст'\n        itemComponent={ScenarioEvent}\n      />\n      {scenario.length < 100 &&\n        <div className={styles.addEvent}>\n          <FormControl fullWidth>\n            <InputLabel>Добавить событие</InputLabel>\n            <Select\n              name={name}\n              value={newEventValue}\n              onChange={e => setNewEventValue(e.target.value)}\n              label='Добавить событие'\n              displayEmpty={true}\n            >\n              <MenuItem value='text'>Текст на экране</MenuItem>\n              <MenuItem value='say'>Слово ведущего</MenuItem>\n              <MenuItem value='image'>Изображение</MenuItem>\n              <MenuItem value='voice'>Аудио</MenuItem>\n              <MenuItem value='video'>Видео</MenuItem>\n            </Select>\n          </FormControl>\n          <IconButton onClick={handleAddEvent} disabled={!newEventValue}>\n            <MdAdd />\n          </IconButton>\n        </div>}\n      <Typography variant='body2' color='text.secondary'>\n        Все изменения в сценарии сохраняются автоматически\n      </Typography>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Scenario)\n","import styles from './styles.module.scss'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\nimport { scenarioHint } from './hints'\n\nexport default function NoScenario() {\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'>Сценарий</Typography>\n      </WithHint>\n      <Typography variant='body2' color='text.secondary'>\n        Вы сможете редактировать сценарий после того, как добавите вопрос\n      </Typography>\n    </div>\n  )\n}\n","export const validate = (values, props, params) => {\n  const questions = [...props.pack.rounds[params.roundIndex-1].themes[params.themeIndex-1].questions]\n\n  const errors = {}\n  if(values.price !== props.data?.price && questions.some(({ price }) => price === values.price)) {\n    errors.price = 'Вопрос с такой стоимостью уже существует в этой теме'\n  }\n\n  const checkRealPrice = () => {\n    checkNumber('realprice', 'Выберете настоящую стоимость вопроса', 'Настоящая стоимость вопроса должна быть больше 0')\n  }\n\n  const checkNumber = (propertyName, noValueError = 'Выберете значение', zeroError = 'Значение должно быть больше 0') => {\n    if(values[propertyName] === undefined || values[propertyName] === '') {\n      errors[propertyName] = noValueError\n    } else if (values[propertyName] === 0) {\n      errors[propertyName] = zeroError\n    }\n  }\n\n  switch(values.type) {\n    case 'cat':\n      checkRealPrice()\n      break\n\n    case 'bagcat':\n      if(!values.questionPriceType) {\n        errors.questionPriceType = 'Выберете способ определения стоимость вопроса'\n      } else {\n        switch(values.questionPriceType) {\n          case 'fixed':\n            checkRealPrice()\n            break\n\n          case 'byPlayer':\n            ['realpriceFrom', 'realpriceTo', 'realpriceStep'].forEach(checkNumber)\n            break\n        }\n      }\n      if(!values.detailsDisclosure) errors.detailsDisclosure = 'Выберете момент, когда узнается стоимость вопроса'\n      break\n  }\n\n  return errors\n}\n","import PropTypes from 'prop-types'\nimport * as yup from 'yup'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport { useParams, useHistory, Prompt } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport FormFields from './FormFields'\nimport Scenario from './Scenario'\nimport NoScenario from './NoScenario'\nimport { mapPackState, initValues } from '../../../../utils'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { validate } from './validation'\n\nconst priceSchema = yup\n  .number()\n  .integer()\n  .min(1, 'Стоимость вопроса должна быть больше 0')\n  .max(4294967295) // max of uint32\n\nconst validationSchema = yup.object({\n  price: priceSchema.required('Выберете стоимость вопроса'),\n  realprice: priceSchema,\n  type: yup\n    .string()\n    .required('Выберете тип вопроса'),\n  transferToSelf: yup.bool(),\n  detailsDisclosure: yup.string(),\n  realpriceFrom: yup.number(),\n  realpriceTo: yup.number(),\n  realpriceStep: yup.number(),\n  correctAnswers: yup.array().ensure().min(1, 'Добавьте как минимум один правильный ответ'),\n  incorrectAnswers: yup.array().ensure()\n})\n\nQuestionContent.propTypes = {\n  data: PropTypes.object,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction QuestionContent(props) {\n  const history = useHistory()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const newQuestion = questionPrice === 'add'\n\n  const getNextPrice = questions => {\n    const findRegularity = () => {\n      let delta\n      for(let i = 1; i < questions.length; i++) {\n        let newDelta = questions[i].price - questions[i-1].price\n        if(delta !== undefined && delta !== newDelta) return undefined\n        else delta = newDelta\n      }\n      return questions[questions.length - 1].price+delta\n    }\n\n    const add100 = () => {\n      return questions[questions.length - 1].price+100\n    }\n\n    return questions.length === 0 ? 100 : findRegularity() || add100()\n  }\n  const initialValues = initValues(validationSchema,\n    newQuestion ? { ...props.data, price: getNextPrice(questions) } : props.data\n  )\n  const formik = useFormik({\n    initialValues,\n    validate: values => validate(values, props, params), validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      const pack = { ...props.pack }\n      const question = newQuestion ? values : { ...props.data, ...values }\n      const questions = pack.rounds[round-1].themes[params.themeIndex-1].questions\n      if(newQuestion) {\n        questions.push(question)\n      } else {\n        questions[questions.findIndex(({ price }) => price === Number(questionPrice))] = question\n      }\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}/rounds/${round}`)\n    },\n  })\n\n  const submitting = formik.isSubmitting\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormFields formik={formik} submitting={submitting} />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={(!newQuestion && !Object.keys(formik.touched).length) || submitting}\n          className={styles.submit}\n        >\n          {newQuestion ? 'Добавить вопрос' : 'Сохранить'}\n        </Button>\n      </form>\n      {newQuestion\n        ? <NoScenario />\n        : <Scenario formik={formik} submitting={formik.isValidating || submitting} />\n      }\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(QuestionContent)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useParams } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { mapPackState } from '../../../utils'\nimport NotFound404 from 'components/NotFound404'\nimport QuestionContent from './QuestionContent'\n\nQuestion.propTypes = {\n  pack: PropTypes.object,\n}\nfunction Question(props) {\n  const [notFound, setNotFound] = React.useState()\n  const [question, setQuestion] = React.useState()\n  const params = useParams()\n\n  React.useEffect(() => {\n    const pack = props.pack\n    if(!pack) return setNotFound(true)\n    const round = pack.rounds[params.roundIndex-1]\n    if(!round) return setNotFound(true)\n    const theme = round.themes[params.themeIndex-1]\n    if(!theme) return setNotFound(true)\n    if(params.questionPrice !== 'add') {\n      const question = theme.questions.find(({ price }) => price === Number(params.questionPrice))\n      if(!question) return setNotFound(true)\n      setQuestion(question)\n    }\n    setNotFound(false)\n  }, [params])\n\n  return (\n    notFound !== undefined && (\n      notFound\n        ? <NotFound404 />\n        : <QuestionContent data={question} />)\n  )\n}\n\nexport default connect(mapPackState)(Question)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport PackBreadcrumbs from './PackBreadcrumbs/'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../consts'\nimport PackToolbar from './PackToolbar/'\nimport Rounds from './Rounds'\nimport Settings from './Settings/'\nimport { Switch, Route, useRouteMatch } from 'react-router-dom'\nimport RoundThemes from './RoundThemes'\nimport NotFound404 from 'components/NotFound404'\nimport Question from './Question'\nimport { mapPackState } from '../../utils'\n\nPackPageContainer.propTypes = {\n  children: PropTypes.node,\n  pack: componentsPropTypes.pack,\n  toolbar: PropTypes.string\n}\n\nfunction PackPageContainer(props) {\n  const { path } = useRouteMatch()\n\n  return (\n    props.pack\n    && (props.pack === 'notFound'\n      ? <NotFound404 />\n      : <div className={styles.container}>\n        <div className={styles.toolbar}>\n          <PackBreadcrumbs />\n          <PackToolbar />\n        </div>\n        <Switch>\n          <Route exact path={path}>\n            <Rounds />\n          </Route>\n          <Route path={`${path}/settings`}>\n            <Settings />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex/themes/:themeIndex/questions/:questionPrice`}>\n            <Question />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex`}>\n            <RoundThemes />\n          </Route>\n          <Route path='*'><NotFound404 /></Route>\n        </Switch>\n      </div>)\n  )\n}\n\nexport default connect(mapPackState)(PackPageContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useLocation } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { loadLocalPack } from '../../localStorage/localPacks'\n\nContainer.propTypes = {\n  children: PropTypes.node,\n  dispatch: PropTypes.func\n}\nfunction Container(props) {\n  const route = useLocation()\n\n  React.useEffect(() => {\n    routeChanged(route.pathname.split('/').filter(String))\n  }, [route])\n\n  const routeChanged = async pathParts => {\n    if(pathParts[0] === 'pack') {\n      const packUUID = pathParts[1]\n      const pack = await loadLocalPack(packUUID)\n      props.dispatch({ type: 'pack/load', pack: pack ?? 'notFound' })\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default connect(null)(Container)\n","import {\n  BrowserRouter,\n  Switch,\n  Route\n} from 'react-router-dom'\nimport Dashboard from './routes/Dashboard'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport Navigation from './components/Navigation/index.js'\nimport NewPack from './routes/NewPack'\nimport Pack from './routes/Pack'\nimport sipackerStore from './reducers'\nimport { Provider } from 'react-redux'\nimport Container from './components/Container'\nimport 'dayjs/locale/ru'\nimport { history } from './utils'\nimport NotFound404 from 'components/NotFound404'\nimport ContextMenuProvider from 'components/ContextMenu'\n\nexport const darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#4248fb'\n    }\n  },\n})\n\nexport default function App() {\n  return (\n    <Provider store={sipackerStore}>\n      <ThemeProvider theme={darkTheme}>\n        <BrowserRouter history={history} basename={process.env.REACT_APP_PREFIX}>\n          <ContextMenuProvider>\n            <Container>\n              <Navigation />\n              <Switch>\n                <Route exact path='/'>\n                  <Dashboard />\n                </Route>\n                <Route path='/create'>\n                  <NewPack />\n                </Route>\n                <Route path={['/pack/:packUUID', '/pack/:packUUID/*']}>\n                  <Pack />\n                </Route>\n                <Route path='*'><NotFound404 /></Route>\n              </Switch>\n            </Container>\n          </ContextMenuProvider>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1W5Un\",\"name\":\"styles_name__2RB5S\",\"delete\":\"styles_delete__2ihaf\",\"addTheme\":\"styles_addTheme__1hwa9\",\"table\":\"styles_table__3es8F\",\"tableCell\":\"styles_tableCell__1cve7\",\"buttonBase\":\"styles_buttonBase__2kQLq\",\"heading\":\"styles_heading__1IQEt\",\"noItemsYet\":\"styles_noItemsYet__BxKD2\",\"tableRow\":\"styles_tableRow__2jH6j\",\"strikethrough\":\"styles_strikethrough__DFxi_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rounds\":\"styles_rounds__1ZZ2U\",\"heading\":\"styles_heading__-ydFv\",\"cardOfRound\":\"styles_cardOfRound__2AkoD\",\"item\":\"styles_item__3E1HY\",\"delete\":\"styles_delete__24Jnc\",\"link\":\"styles_link__B9CM5\",\"flex1\":\"styles_flex1__3-SY4\",\"inputField\":\"styles_inputField__38y2T\",\"droppable\":\"styles_droppable__25geG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__OqZ1N\",\"label\":\"styles_label__VxlIK\",\"preview\":\"styles_preview__2qqOY\",\"image\":\"styles_image__29S6D\",\"placeholder\":\"styles_placeholder__1vE4B\",\"loading\":\"styles_loading__1wm-5\",\"fileMissing\":\"styles_fileMissing__3t61m\",\"icon\":\"styles_icon__345-2\",\"info\":\"styles_info__1nl83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addItem\":\"styles_addItem__3dCij\",\"addButton\":\"styles_addButton__3g9mJ\",\"button\":\"styles_button__3ZegY\",\"expand\":\"styles_expand__2-jSs\",\"addButtonOuter\":\"styles_addButtonOuter__1y9QO\"};"],"sourceRoot":""}