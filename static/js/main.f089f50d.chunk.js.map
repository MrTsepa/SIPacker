{"version":3,"sources":["routes/Pack/styles.module.scss","routes/Pack/PackToolbar/styles.module.scss","components/ItemsList/styles.module.scss","components/EditingToolbar/styles.module.scss","routes/Pack/Settings/styles.module.scss","components/Navigation/styles.module.scss","routes/NewPack/styles.module.scss","components/FileStorage/styles.module.scss","routes/Pack/Rounds/styles.module.scss","components/ItemsList/Item/styles.module.scss","components/FormikField/styles.module.scss","components/NotFound404/styles.module.scss","components/Container/styles.module.scss","routes/Dashboard/styles.module.scss","routes/Pack/Question/QuestionContent/styles.module.scss","routes/Pack/Rounds/CheckList/styles.module.scss","consts.js","localStorage/indexeddb.js","localStorage/localPacks.js","localStorage/fileStorage/hashFile.js","localStorage/fileStorage/saveFile.js","localStorage/fileStorage/index.js","reducers/fileRendering.js","reducers/index.js","reducers/packReducer.js","reducers/dashboardReducer.js","reducers/menuReducer.js","localStorage/packGenerator/fileResolver.js","utils.js","localStorage/packGenerator/parser.js","localStorage/packGenerator/index.js","routes/Dashboard/packTypes/Upload.js","components/ContextMenu/index.js","components/ConfirmationDialog/index.js","components/ConfirmationDialog/DeleteConfirmationDialog.js","components/RenameDialog/index.js","routes/Dashboard/packTypes/Pack.js","routes/Dashboard/packTypes/index.js","routes/Dashboard/index.js","components/Navigation/index.js","routes/NewPack/index.js","routes/Pack/PackBreadcrumbs/index.js","routes/Pack/PackToolbar/SavingDialog.js","routes/Pack/PackToolbar/index.js","components/ItemsList/Item/index.js","components/ItemsList/Handle.js","routes/Pack/Rounds/List/Round.js","components/ItemsList/AddItem/index.js","components/ItemsList/index.js","components/EditingToolbar/index.js","routes/Pack/Rounds/List/index.js","routes/Pack/Rounds/CheckList/index.js","routes/Pack/Rounds/index.js","components/FileStorage/Filters.js","components/FileStorage/File.js","components/FileStorage/List.js","components/FileStorage/Upload.js","components/FileStorage/index.js","components/ImageField/index.js","components/FormikField/index.js","routes/Pack/Settings/index.js","components/NotFound404/index.js","routes/Pack/RoundThemes/RoundTable.js","routes/Pack/RoundThemes/Questions.js","components/ClickIsolator.js","routes/Pack/RoundThemes/Theme.js","routes/Pack/RoundThemes/ThemesEditing.js","routes/Pack/RoundThemes/index.js","routes/Pack/Question/QuestionContent/hints.js","routes/Pack/Question/QuestionContent/WithHint.js","routes/Pack/Question/QuestionContent/FormFields.js","routes/Pack/Question/QuestionContent/ScenarioEvent.js","routes/Pack/Question/QuestionContent/Scenario.js","routes/Pack/Question/QuestionContent/NoScenario.js","routes/Pack/Question/QuestionContent/validation.js","routes/Pack/Question/QuestionContent/index.js","routes/Pack/Question/index.js","routes/Pack/index.js","components/Container/index.js","App.js","serviceWorkerRegistration.js","index.js","routes/Pack/RoundThemes/styles.module.scss","routes/Pack/Rounds/List/styles.module.scss","components/ImageField/styles.module.scss","components/ItemsList/AddItem/styles.module.scss"],"names":["module","exports","format","PropTypes","shape","uuid","string","name","creationTime","number","date","thumbnail","formatDefaults","xmlJS","js2xml","_declaration","_attributes","version","encoding","Types","xmlns","Default","Extension","ContentType","compact","uuidRegex","init","db","Dexie","stores","packs","join","files","loadLocalPack","packUUID","a","get","pack","loadLocalPacks","toArray","saveLocalPack","put","deleteLocalPack","delete","hashFile","file","Promise","resolve","reject","blobSlice","File","prototype","slice","mozSlice","webkitSlice","chunkSize","chunks","Math","ceil","size","spark","SparkMD5","ArrayBuffer","fileReader","FileReader","currentChunk","onload","e","append","target","result","loadNext","end","onerror","start","readAsArrayBuffer","call","mimeTypes","image","audio","video","allowedFileTypes","saveFile","blob","includes","type","filename","hash","where","length","Object","entries","find","some","fileURI","nanoid","fileObject","fileName","addedAt","Date","now","generateMiniature","miniature","saveFileAsURL","url","img","document","createElement","src","URL","createObjectURL","width","height","min","newWidth","newHeight","canvas","drawTransparentPattern","getContext","drawImage","toBlob","revokeObjectURL","getFile","getAllURIsFromPack","primaryKeys","getPacksIDs","packIDs","map","getDeletedPacks","existingPacks","allPacks","filter","deleteFile","equals","getRecent","filters","splice","indexOf","deletedPacks","push","anyOf","limit","offset","reverse","sortBy","deleteFilesOfPack","bulkDelete","removeFileURI","state","newState","changeProperty","propertyName","newValue","createStore","combineReducers","action","dashboard","uploading","fileRendering","callback","keys","menu","position","FileResolver","zip","this","resolvedFiles","folders","warnings","folder","error","id","images","getDir","extension","removeUndefined","object","fromEntries","undefined","history","createBrowserHistory","emptyFunc","formatDate","dateTime","Intl","DateTimeFormat","year","month","day","hour","minute","seconds","mapPackState","questionTypes","initValues","schema","initialValues","fields","defaultValues","forEach","key","hasQuestionInEachTheme","Boolean","rounds","every","round","themes","theme","questions","hasThemeInEachRound","hasAtLeast25Questions","reduce","prev","hasQuestionWithAuction","question","hasQuestionWithBagCat","hasScenarioInEachQuestion","scenario","JSZip","loadAsync","contentXML","async","packContent","content","xml2js","mapText","array","elements","t","text","packageTag","n","property","attributes","difficulty","restriction","publisher","logo","language","infoTag","authors","tags","Number","over18","bom","packErrors","check","errors","questionType","currentTheme","questionParams","properties","cost","self","knows","cat","auction","bagcat","sponsored","param","questionPriceType","realpriceFrom","realpriceTo","realpriceStep","xmlescape","String","generate","texts","comment","generator","tag","author","all","price","scenarioEvent","time","duration","data","replaceAll","imageField","correctAnswers","answer","incorrectAnswers","declaration","generateAsync","compression","zipInBlob","SlideTransition","props","Slide","direction","connect","React","useState","entered","setEntered","setContent","useEffect","interval","setInterval","c","clearInterval","onDragEnter","onDragLeave","onDrop","acceptedFiles","previousState","dispatch","concat","parsePackGenerator","then","noContentXML","reloadPacks","store","getState","accept","getRootProps","getInputProps","className","cx","styles","packBase","newPack","upload","dragOver","backdrop","visible","Snackbar","open","onClose","TransitionComponent","Alert","severity","alert","i","ContextMenuActions","createContext","ContextMenu","items","setItems","contextMenu","preventDefault","clientX","clientY","close","Provider","value","children","ReactDOM","createPortal","Menu","anchorReference","anchorPosition","top","left","item","MenuItem","onClick","stopPropagation","ListItemIcon","icon","ListItemText","body","displayName","okCallback","ConfirmationDialog","forwardRef","ref","setOpen","setText","confirmText","setConfirmText","checkboxText","setCheckboxText","checkboxValue","setCheckboxValue","handleAction","confirmed","checked","useImperativeHandle","maxWidth","DialogTitle","title","DialogContent","DialogContentText","FormControlLabel","control","Checkbox","defaultChecked","onChange","label","DialogActions","Button","autoFocus","color","DeleteConfirmationDialog","confirmationDialogRef","useRef","useHistory","confirmPackDeletion","current","deleteFiles","confirmRoundDeletion","confirmDeleteQuestion","RenameDialog","setCallback","subject","setSubject","oldName","setOldName","setValue","askToRename","handleCancel","TextField","placeholder","variant","style","marginTop","disabled","Pack","confDialogRef","renameDialog","dashboardActions","useContext","DashboardContext","contextMenuActions","handleDeletePack","handleRenamePack","newName","onContextMenu","info","Create","Loading","loading","Skeleton","skeleton","setSrc","cleanup","pictureContainer","Dashboard","LocalPacks","savedLocalPacks","setSavedLocalPacks","loadPacks","packsUUID","sort","b","contextActions","packsList","PackBase","Array","fill","_","PackSwitch","to","Navigation","infoShown","setInfoShown","AppBar","zIndex","Toolbar","logoContainer","Typography","component","href","rel","IconButton","Dialog","NewPack","packName","setPackName","createPack","uuidv4","dayjs","examples","container","field","floor","random","onKeyUp","linkStyles","link","route","useLocation","path","setPath","page","pathname","split","RegExp","parts","crumbs","currentPack","settings","paths","default","pathRegex","test","Breadcrumbs","Transition","Zoom","SavingDialog","generating","setGenerating","setErrors","setWarnings","setPack","save","startProcessing","setTimeout","bundlePack","console","message","saveAs","slugify","autoBom","LinearProgress","warning","savingDialogRef","handleDeleteRound","roundIndex","parseInt","handleDeleteQuestion","match","themeIndex","questionPrice","questionIndex","findIndex","buttons","root","pageToolbar","regex","toolbar","getStyle","transform","axisLockY","Item","draggableId","index","provided","Card","innerRef","draggableProps","Handle","handle","dragHandleProps","Round","handleRemoveRound","handleOpenMenu","cardOfRound","editing","ItemContent","CardActionArea","CardContent","paddingBottom","darkTheme","spacing","flex1","roundNamesTextInput","handleRoundNameChange","inputField","flex2","AddItem","addingItem","setAddingItem","addItem","ItemName","handleAddItem","onAdd","button","expand","inputLabel","addButtonOuter","startIcon","addButton","buttonLabel","outlinedInput","handleDone","focus","FormControl","InputLabel","OutlinedInput","onKeyDown","paddingRight","inputRef","endAdornment","InputAdornment","ItemsList","WeakMap","itemsMap","setItemsMap","onDragEnd","droppableId","droppableProps","droppableClassName","list","oid","has","set","itemComponent","useIdAsKey","gutterBottom","listStyles","noItems","noItemsLabel","EditingToolbar","heading","showButton","hint","onSwitch","setRounds","setEditing","handleAddRound","packRounds","updateRounds","names","destination","startIndex","endIndex","from","removed","reorder","source","droppable","namesList","Items","first","starting","last","ending","replace","done","Marker","marker","lineBefore","hidden","bullet","lineAfter","required","optional","filterItems","f","reducer","progress","point","max","progressBar","caption","line","Rounds","roundsPage","Filters","Stack","checkboxes","handleChange","checkbox","fileSrc","setFileSrc","infoDialogueOpen","setInfoDialogueOpen","removing","setRemoving","handleDeleteFile","onRemove","Grid","xs","md","sm","handleSelect","itemInner","preview","foreground","background","filesize","symbols","List","setFiles","mapFiles","mappedFiles","packSwitchUUID","packGroup","packDivider","grid","j","noFilesYet","Upload","setUploading","uploadingFileIndex","setUploadingFileIndex","filesListLength","setFilesListLength","uploaded","setUploaded","handleDrop","hasErrors","fileIndex","errorMessage","setTab","validate","values","fetch","responseRaw","status","headers","formik","useFormik","validationSchema","yup","validateOnChange","validateOnBlur","onSubmit","uploadingFiles","uploadingScreen","uploadingCaption","CircularProgress","thickness","addForm","onDropAccepted","dropzone","flex","supportedTypes","handleSubmit","downloadByURL","FormikTextField","input","FileStorage","tab","setPacks","setPackUUID","setCheckboxes","handleClose","deletedPack","filteredPacks","cb","checkedPack","sx","palette","grey","dialog","Tabs","textColor","tabs","Tab","selectedFile","B","kB","MB","GB","TB","PB","EB","ZB","YB","Placeholder","FileMissingIcon","fileMissing","FileMissing","FileInfo","FileNotSelected","Image","srcUrl","alt","setSrcUrl","noFile","setNoFile","fileStorage","startsWith","handleClick","formikMuiErrors","helperText","fieldProps","setTouched","touched","FormikAutocomplete","handleKeyDown","Autocomplete","multiple","options","getOptionLabel","option","freeSolo","clearOnBlur","setFieldValue","renderInput","FormikSelect","fullWidth","Select","FormHelperText","FormikCheckbox","FormikSlider","slider","Slider","requestAnimationFrame","valueLabelDisplay","marks","FormikImageField","formikTouched","ensure","positive","integer","submitting","setSubmitting","useBeforeunload","event","form","step","when","NotFound404","centered","RoundTable","useRouteMatch","TableContainer","Paper","table","Table","TableBody","row","TableRow","borderBottom","TableCell","scope","rowName","tableCell","ButtonBase","buttonBase","align","colspan","Cell","wp","sortedQuestions","questionURL","border","cell1","minWidth","TableHead","hover","tableRow","strikethrough","colSpan","ClickIsolator","expandId","themeName","setThemeName","handleDelete","handleRemoveTheme","handleChangeThemeName","newThemeName","toString","Accordion","expanded","isExpand","setExpand","AccordionSummary","expandIcon","AccordionDetails","ThemesEditing","Theme","handleAddTheme","addTheme","setThemes","found","setFound","roundThemes","updateThemes","clone","questionPriceHint","questionTypesHint","realPriceHint","realPriceStepperHint","realThemeHint","bagcatRealPriceTypeHint","scenarioHint","WithHint","Tooltip","FormFields","numberFieldProps","InputProps","inputProps","grouped","ScenarioEvent","setDuration","eventData","setEventData","onDelete","onChangeDuration","eventDuration","onChangeData","step0_1","Decimal","times","toNumber","step0_5","step1","step5","durationMarks","_label","closestToMarks","itemType","voice","say","Fade","in","toFixed","details","defaultValue","valueLabelFormat","multiline","rows","setScenario","newEventValue","setNewEventValue","scenarioUpdateTimeout","setScenarioUpdateTimeout","params","useParams","clearTimeout","scenarioUpdateQueue","updateQuestionScenario","newScenario","addEvent","displayEmpty","NoScenario","priceSchema","realprice","realtheme","transferToSelf","detailsDisclosure","newQuestion","delta","newDelta","findRegularity","getNextPrice","checkRealPrice","checkNumber","noValueError","zeroError","resetForm","isSubmitting","submit","isValidating","notFound","setNotFound","setQuestion","exact","routeChanged","pathParts","createTheme","mode","primary","main","App","sipackerStore","ThemeProvider","basename","process","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","render","StrictMode","getElementById","publicUrl","origin","addEventListener","response","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f089f50d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"styles_link__iWnvj\",\"toolbar\":\"styles_toolbar__viJ4P\",\"container\":\"styles_container__3KW9G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"styles_buttons__Srfpa\",\"delete\":\"styles_delete__1GXPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"noItems\":\"styles_noItems__19dBE\",\"handle\":\"styles_handle__DHO5p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1dso8\",\"text\":\"styles_text__16Cv2\",\"hint\":\"styles_hint__2upGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1vfWp\",\"form\":\"styles_form__LUKmR\",\"info\":\"styles_info__1RrDx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation\":\"styles_navigation__b3eL_\",\"logoContainer\":\"styles_logoContainer__3hxi2\",\"logo\":\"styles_logo__Triy9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2Npq2\",\"field\":\"styles_field__1Q5KE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__3sESC\",\"dialog\":\"styles_dialog__2HYt8\",\"tabs\":\"styles_tabs__3oGTF\",\"files\":\"styles_files__gJLVp\",\"filters\":\"styles_filters__1TEOe\",\"text\":\"styles_text__3q7xF\",\"checkbox\":\"styles_checkbox__2-7wb\",\"list\":\"styles_list__QxZ1P\",\"content\":\"styles_content__3DAbo\",\"packDivider\":\"styles_packDivider__1eh-l\",\"grid\":\"styles_grid__2YaAc\",\"item\":\"styles_item__3OyXq\",\"itemInner\":\"styles_itemInner__j4sTM\",\"preview\":\"styles_preview__2vnda\",\"foreground\":\"styles_foreground__3OtLE\",\"background\":\"styles_background__2v4Hw\",\"fileName\":\"styles_fileName__Y6Kge\",\"button\":\"styles_button__2BATH\",\"noFilesYet\":\"styles_noFilesYet__1Hcst\",\"hint\":\"styles_hint__1anpH\",\"upload\":\"styles_upload__i5SMD\",\"addForm\":\"styles_addForm__3SMiC\",\"dropzone\":\"styles_dropzone__7zJs4\",\"flex\":\"styles_flex__1oz2f\",\"supportedTypes\":\"styles_supportedTypes__UNDK8\",\"downloadByURL\":\"styles_downloadByURL__2kp1o\",\"input\":\"styles_input__2FHJt\",\"uploadingFiles\":\"styles_uploadingFiles__3pQjA\",\"uploadingScreen\":\"styles_uploadingScreen__3l-EZ\",\"uploadingCaption\":\"styles_uploadingCaption__2Thca\",\"caption\":\"styles_caption__3MYtC\",\"errors\":\"styles_errors__3zZJK\",\"delete\":\"styles_delete__GzwCF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"roundsPage\":\"styles_roundsPage__2xjXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"styles_item__2_EzC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"styles_slider__2_T4D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centered\":\"styles_centered__23ouW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2xIAm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"packsList\":\"styles_packsList__3_FVk\",\"hoverUnfocused\":\"styles_hoverUnfocused__QnvyG\",\"packBase\":\"styles_packBase__1LyE6\",\"hoverFocused\":\"styles_hoverFocused__3wnZX\",\"loading\":\"styles_loading__3SVRQ\",\"pack\":\"styles_pack__P7r43\",\"info\":\"styles_info__2vfvj\",\"visibilityDelay\":\"styles_visibilityDelay__2WqMA\",\"newPack\":\"styles_newPack__SHDep\",\"skeleton\":\"styles_skeleton__2LQD-\",\"upload\":\"styles_upload__nOCvw\",\"thumbnail\":\"styles_thumbnail__1aU0y\",\"pictureContainer\":\"styles_pictureContainer__3Ksvb\",\"name\":\"styles_name__10d11\",\"time\":\"styles_time___bQuG\",\"backdrop\":\"styles_backdrop__2CHGI\",\"visible\":\"styles_visible__zmC7_\",\"alert\":\"styles_alert__1bU9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__10MD0\",\"hint\":\"styles_hint__2rDGF\",\"grouped\":\"styles_grouped__2K5-H\",\"addEvent\":\"styles_addEvent__3LcHk\",\"item\":\"styles_item__22gS9\",\"itemType\":\"styles_itemType__12yvw\",\"spacing\":\"styles_spacing__AWfQV\",\"details\":\"styles_details__2X22Q\",\"duration\":\"styles_duration__1EfuX\",\"time\":\"styles_time__CfIYV\",\"submit\":\"styles_submit__39tBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3R_IO\",\"list\":\"styles_list__V6atM\",\"done\":\"styles_done__T3LaX\",\"marker\":\"styles_marker__1v4R9\",\"lineBefore\":\"styles_lineBefore__3FZJa\",\"lineAfter\":\"styles_lineAfter__2tf62\",\"hidden\":\"styles_hidden__QZJee\",\"bullet\":\"styles_bullet__3qHV-\",\"link\":\"styles_link__3mTg0\",\"caption\":\"styles_caption__3cP02\",\"line\":\"styles_line__JJEXr\",\"text\":\"styles_text__1tFeb\",\"progress\":\"styles_progress__2qcQG\",\"progressBar\":\"styles_progressBar__1AayW\"};","import PropTypes from 'prop-types'\nimport xmlJS from 'xml-js'\n\nexport const componentsPropTypes = {\n  pack: PropTypes.shape({\n    uuid: PropTypes.string,\n    name: PropTypes.string,\n    creationTime: PropTypes.number,\n    date: PropTypes.string,\n    thumbnail: PropTypes.string\n  })\n}\n\nexport const format = {\n  xmlVersion: '1.0',\n  encoding: 'utf-8',\n  latestVersion: 4\n}\n\nexport const formatDefaults = {\n  contentTypes: xmlJS.js2xml({\n    _declaration: {\n      _attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    Types: {\n      _attributes: {\n        xmlns: 'http://schemas.openxmlformats.org/package/2006/content-types',\n      },\n      Default: {\n        _attributes: {\n          Extension: 'xml',\n          ContentType: 'si/xml'\n        }\n      }\n    }\n  }, { compact: true })\n}\n\nexport const uuidRegex = '\\\\b[0-9a-f]{8}\\\\b-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-\\\\b[0-9a-f]{12}\\\\b'\n","import Dexie from 'dexie'\n\nexport const init = () => {\n  const db = new Dexie('sipacker')\n  db.version(1).stores({\n    packs: [\n      'uuid'\n      // also: name, version, over18, date, publisher, difficulty, logo, language, tags, authors, comment\n    ].join(', '),\n    files: [\n      'fileURI',\n      'type',\n      'hash',\n      'packUUID',\n      'addedAt'\n      // also: filename, blob\n    ].join(', ')\n  })\n  return db\n}\n","import { init } from './indexeddb'\n\nexport async function loadLocalPack(packUUID) {\n  const db = init()\n  let pack = await db.packs.get(packUUID)\n  return pack ?? null\n}\n\nexport async function loadLocalPacks() {\n  const db = init()\n  const packs = await db.packs.toArray()\n  return packs\n}\n\nexport async function saveLocalPack(pack) {\n  const db = init()\n  await db.packs.put(pack)\n}\n\nexport async function deleteLocalPack(packUUID) {\n  const db = init()\n  await db.packs.delete(packUUID)\n}\n","import SparkMD5 from 'spark-md5'\n\nexport default function hashFile(file) {\n  return new Promise((resolve, reject) => {\n    // from https://github.com/satazor/js-spark-md5#hash-a-file-incrementally\n    const blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\n    const chunkSize = 1024*1024*2\n    const chunks = Math.ceil(file.size / chunkSize)\n    const spark = new SparkMD5.ArrayBuffer()\n    const fileReader = new FileReader()\n\n    let currentChunk = 0\n\n    fileReader.onload = e => {\n      spark.append(e.target.result)\n      currentChunk++\n\n      if (currentChunk < chunks) {\n        loadNext()\n      } else {\n        resolve(spark.end())\n      }\n    }\n\n    fileReader.onerror = () => reject('Unable to hash file')\n\n    const loadNext = () => {\n      const start = currentChunk * chunkSize\n      const end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize\n\n      fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n    }\n\n    loadNext()\n  })\n}\n","import hashFile from './hashFile'\nimport { nanoid } from 'nanoid'\nimport { init } from '../indexeddb'\nimport drawTransparentPattern from 'checkerboardjs'\n\nconst mimeTypes = {\n  image: ['image/png', 'image/jpeg'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg'],\n  video: ['video/mpeg']\n}\nexport const allowedFileTypes = [...mimeTypes.image, ...mimeTypes.audio, ...mimeTypes.video]\nexport async function saveFile(blob, packUUID) {\n  if(!allowedFileTypes.includes(blob.type)) { throw 'Mime-type is not supported' }\n  if(!blob.filename) { throw 'Blob instance must have filename propery' }\n\n  const db = init()\n  const hash = await hashFile(blob)\n\n  let results = await db.files.where({ packUUID, hash }).toArray()\n  if(results.length) throw 'File with such hash already exist'\n\n  const type = Object.entries(mimeTypes).find(\n    ([,mimeType]) => mimeType.some(type => type === blob.type)\n  )[0]\n\n  const fileURI = nanoid()\n  const fileObject = {\n    fileURI,\n    type,\n    blob,\n    size: blob.size,\n    fileName: blob.filename,\n    hash,\n    packUUID,\n    addedAt: Date.now()\n  }\n\n  switch(type) {\n    case 'image':\n      fileObject.miniature = await generateMiniature(blob)\n      break\n  }\n\n  await db.files.put(fileObject)\n  return fileURI\n}\n\nexport async function saveFileAsURL(url, file, packUUID) {\n  const db = init()\n\n  let results = await db.files.where({ packUUID, url }).toArray()\n  if(results.length) throw 'File with such url already exist'\n\n  const type = Object.entries(mimeTypes).find(\n    ([,mimeType]) => mimeType.some(type => type === file.type)\n  )[0]\n\n  const fileURI = nanoid()\n  const fileObject = {\n    fileURI,\n    type,\n    url,\n    size: file.size,\n    fileName: file.name,\n    packUUID,\n    addedAt: Date.now()\n  }\n\n  await db.files.put(fileObject)\n  return fileURI\n}\n\nconst maxSize = 100\nasync function generateMiniature(blob) {\n  const img = document.createElement('img')\n  const src = URL.createObjectURL(blob)\n  img.src = src\n  await new Promise(resolve => img.onload = resolve)\n  const { width, height } = img\n  const size = Math.min(width, height, maxSize)\n  let newWidth = size, newHeight = size\n  if(width > height) newHeight = newWidth*height/ width\n  else newWidth = newHeight*width/height\n\n  const canvas = document.createElement('canvas')\n  canvas.width = newWidth\n  canvas.height = newHeight\n  drawTransparentPattern(canvas)\n  const ctx = canvas.getContext('2d')\n  ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n  const miniature = await new Promise(resolve => canvas.toBlob(resolve))\n  URL.revokeObjectURL(src)\n  return miniature\n}\n","import { init } from '../indexeddb'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nexport { allowedFileTypes, saveFile, saveFileAsURL } from './saveFile'\n\nexport async function getFile(fileURI) {\n  const db = init()\n  let file = await db.files.get(fileURI)\n  return file ?? null\n}\n\nexport async function getAllURIsFromPack(packUUID) {\n  const db = init()\n  return await db.files.where({ packUUID }).primaryKeys()\n}\n\nexport async function getPacksIDs() {\n  const db = init()\n  const packIDs = await db.files.toArray()\n  return packIDs.map(({ packUUID }) => packUUID)\n}\n\nexport async function getDeletedPacks() {\n  let existingPacks = await loadLocalPacks()\n  existingPacks = existingPacks.map(({ uuid }) => uuid)\n  const allPacks = await getPacksIDs()\n  return allPacks.filter(pack => !existingPacks.includes(pack))\n}\n\nexport async function deleteFile(fileURI) {\n  const db = init()\n  await db.files.where('fileURI').equals(fileURI).delete()\n}\n\nconst size = 20\nexport async function getRecent(filters) {\n  const db = init()\n  if(filters.includes('null')){\n    filters.splice(filters.indexOf('null'), 1)\n    const deletedPacks = await getDeletedPacks()\n    filters.push(...deletedPacks)\n  }\n  const files = await db.files.where('packUUID').anyOf(filters)\n    .limit(size)\n    .offset(0)\n    .reverse()\n    .sortBy('addedAt')\n  return files\n}\n\nexport async function deleteFilesOfPack(packUUID) {\n  const db = init()\n  const files = await db.files.where({ packUUID }).primaryKeys()\n  await db.files.bulkDelete(files)\n}\n","export default function fileRenderingReducer(state = {}, action) {\n  switch (action.type) {\n    case 'fileRendering/fileRenderingStarted':\n      return state[action.fileURI] ? { ...state } :  { ...state, [action.fileURI]: action.callback }\n\n    case 'fileRendering/fileRenderingStopped':\n      return removeFileURI(state, action.fileURI)\n\n    case 'fileRendering/fileUnlinked':\n      if(!Object.keys(state).includes(action.fileURI)) return state\n      const callback = state[action.fileURI]\n      callback && callback()\n      return removeFileURI(state, action.fileURI)\n\n    case 'fileRendering/setFileUnlinkCallback':\n      return changeProperty(state, action.fileURI, action.callback)\n\n    default:\n      return state\n  }\n}\n\nfunction removeFileURI(state, fileURI) {\n  const newState = { ...state }\n  delete newState[fileURI]\n  return newState\n}\n\nfunction changeProperty(state, propertyName, newValue) {\n  const newState = { ...state }\n  newState[propertyName] = newValue\n  return newState\n}\n","import { combineReducers, createStore } from 'redux'\nimport packReducer from './packReducer'\nimport dashboardReducer from './dashboardReducer'\nimport fileRenderingReducer from './fileRendering'\nimport menuReducer from './menuReducer'\n\nexport default createStore(combineReducers({\n  pack: packReducer,\n  dashboard: dashboardReducer,\n  fileRendering: fileRenderingReducer,\n  menu: menuReducer\n}))\n","export default function packReducer(state = null, action) {\n  switch (action.type) {\n    case 'pack/load':\n      return action.pack\n    default:\n      return state\n  }\n}\n","export default function dashboardReducer(state = null, action) {\n  switch (action.type) {\n    case 'dashboard/setUploading':\n      return { ...state, uploading: action.uploading }\n    default:\n      return state\n  }\n}\n","export default function menuReducer(state = null, action) {\n  switch (action.type) {\n    case 'menu/setPosition':\n      return { ...state, position: action.position }\n    default:\n      return state\n  }\n}\n","import { getFile } from '../fileStorage'\nimport { nanoid } from 'nanoid'\n\nexport default class FileResolver {\n  constructor(zip) {\n    this.zip = zip\n    this.resolvedFiles = {}\n    this.folders = {}\n    this.warnings = []\n  }\n\n  getDir(folder) {\n    if(!this.folders[folder]) this.folders[folder] = this.zip.folder(folder)\n    return this.folders[folder]\n  }\n\n  async resolve(fileURI, error) {\n    if(!fileURI) return\n    // this.getDir('Audio')\n    // this.getDir('Video')\n    const file = await getFile(fileURI)\n    if(!file) throw `Файл не найден: Проверьте поле ${error}`\n\n    if(file.url) return file.url\n\n    if(file.blob.size > 1024*1024) this.warnings.push(`Файл «${file.fileName}» весит больше 1 МБ`)\n\n    let id, extension\n    switch(file.type) {\n      case 'image':\n        id = nanoid()\n        while(Object.keys(this.resolvedFiles).includes(id))\n          id = nanoid()\n\n        this.resolvedFiles[id] = true\n        const images = this.getDir('Images')\n        extension = {'image/png': 'png', 'image/jpeg': 'jpg'}[file.blob.type]\n        images.file(`${id}.${extension}`, file.blob)\n    }\n    return `@${id}.${extension}`\n  }\n}\n","import { createBrowserHistory } from 'history'\n\nexport const removeUndefined = object => Object.fromEntries(Object.entries(object).filter(([, val]) => val !== undefined))\n\nexport const history = createBrowserHistory()\n\nexport const emptyFunc = () => {}\n\nexport const formatDate = dateTime => new Intl.DateTimeFormat('ru-RU', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric',\n  seconds: 'numeric'\n}).format(dateTime)\n\nexport const mapPackState = state => ({ pack: state.pack })\n\nexport const questionTypes = {\n  'simple': 'Обычный',\n  'auction': 'Со ставкой (Аукцион)',\n  'cat': 'С секретом',\n  'bagcat': 'Кот в мешке',\n  'sponsored': 'Без риска'\n}\n\nexport const initValues = (schema, object) => {\n  const initialValues = object ?? {}\n  const fields = Object.keys(schema.fields)\n  const defaultValues = {\n    'number': 0,\n    'string': '',\n    'boolean': false\n  }\n  fields.forEach(key => initialValues[key] = object ? object[key] : defaultValues[schema.fields[key].type])\n  return initialValues\n}\n\n\nexport const hasQuestionInEachTheme = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.every(theme =>\n      theme.questions.length\n    )\n  )\n)\n\nexport const hasThemeInEachRound = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.length\n  )\n)\n\nexport const has5ThemesInEachRound = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(round =>\n    round.themes.length >= 5\n  )\n)\n\nexport const hasAtLeast25Questions = pack => Boolean(\n  pack.rounds.reduce(\n    (prev, round) => prev+round.themes.reduce(\n      (prev, theme) => prev+theme.questions.length, 0\n    ), 0\n  ) >= 25\n)\n\nexport const hasQuestionWithAuction = pack => Boolean(\n  pack.rounds.some(\n    round => round.themes.some(\n      theme => theme.questions.some(\n        question => question.type === 'auction'\n      )\n    )\n  )\n)\n\nexport const hasQuestionWithBagCat = pack => Boolean(\n  pack.rounds.some(\n    round => round.themes.some(\n      theme => theme.questions.some(\n        question => question.type === 'bagcat'\n      )\n    )\n  )\n)\n\nexport const hasScenarioInEachQuestion = pack => Boolean(\n  pack.rounds.length &&\n  pack.rounds.every(\n    round => round.themes.every(\n      theme => theme.questions.every(\n        question => question.scenario?.length\n      )\n    )\n  )\n)\n","import JSZip from 'jszip'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { removeUndefined } from 'utils'\nimport xmlJS from 'xml-js'\n\nexport default async function parse(blob) {\n  try {\n    const zip = await JSZip.loadAsync(blob)\n    const contentXML = zip.files['content.xml']\n    if(!contentXML) { return { error: 'noContentXML' }}\n    const packContent = await contentXML.async('string')\n    const content = xmlJS.xml2js(packContent)\n\n    const n = (object, property) => {\n      const target = object.elements.filter(e => e.name === property)\n      return target && target[0]\n    }\n\n    const mapText = array => {\n      if(!array) { return undefined }\n      return array.elements.map(t => t.elements[0].text)\n    }\n\n    const packageTag = n(content, 'package')\n    const { id, name, version, difficulty, restriction, date, publisher, logo, language } = packageTag.attributes\n    const infoTag = n(packageTag, 'info')\n    const authors = mapText(n(infoTag, 'authors'))\n    const tags = mapText(n(packageTag, 'tags'))\n\n    const pack = removeUndefined({\n      uuid: id,\n      name,\n      version: Number(version),\n      difficulty: Number(difficulty),\n      creationTime: Date.now(),\n      over18: restriction === '18+',\n      date,\n      authors: authors.join(','),\n      publisher,\n      tags: tags?.join(','),\n      logo,\n      language: language || ''\n    })\n    await saveLocalPack(pack)\n    return true\n  } catch(e) {\n    return { error: e }\n  }\n}\n","import JSZip from 'jszip'\nimport { format, formatDefaults } from 'consts'\nimport xmlJS from 'xml-js'\nimport FileResolver from './fileResolver'\nexport { default as parse } from './parser'\nimport { hasQuestionInEachTheme, hasThemeInEachRound, hasScenarioInEachQuestion } from 'utils'\nimport xmlescape from 'xml-escape'\n\nconst bom = '\\uFEFF'\n\nconst packErrors = {\n  noAuthor: 'Добавьте как минимум одного автора в настройках пака',\n  noLanguage: 'Установите язык вопросов в настройках пака',\n  noRounds: 'Добавьте как минимум один раунд',\n  noTheme: 'Добавьте как минимум одну тему в каждом раунде',\n  noQuestion: 'Добавьте как минимум один вопрос в каждой теме в каждом раунде',\n  noScenario: 'Добавьте как минимум одно событие в каждом сценарии каждого вопроса в каждом теме каждого раунда',\n}\nexport async function check(pack) {\n  let errors = []\n  if(!pack.authors) errors.push(packErrors.noAuthor)\n  if(!pack.language) errors.push(packErrors.noLanguage)\n  if(!pack.rounds.length) errors.push(packErrors.noRounds)\n  else if(!hasThemeInEachRound(pack)) errors.push(packErrors.noTheme)\n  else if(!hasQuestionInEachTheme(pack)) errors.push(packErrors.noQuestion)\n  else if(!hasScenarioInEachQuestion(pack)) errors.push(packErrors.noScenario)\n\n  return errors\n}\n\nfunction questionType(question, currentTheme) {\n  if(question.type !== 'simple') {\n    return [{\n      type: 'element',\n      name: 'type',\n      attributes: {\n        name: question.type\n      },\n      elements: questionParams(question, currentTheme)\n    }]\n  } else { return [] }\n}\n\nfunction questionParams(question, currentTheme){\n  const params = {\n    cat: ['theme', 'cost'],\n    auction: [],\n    bagcat: ['theme', 'cost', 'self', 'knows'],\n    sponsored: []\n  }\n  const properties = {\n    theme: 'realtheme',\n    cost: 'realprice',\n    self: 'transferToSelf',\n    knows: 'detailsDisclosure'\n  }\n  const paramsName = params[question.type]\n  return paramsName.map(param => {\n    let text = question[properties[param]]\n    if(param === 'cost' && question.type === 'bagcat') {\n      switch(question.questionPriceType) {\n        case 'minMax':\n          text = 0\n          break\n\n        case 'byPlayer':\n          text = `[${question.realpriceFrom};${question.realpriceTo}]/${question.realpriceStep}`\n          break\n      }\n    }\n    if(param === 'theme') text = xmlescape(text)\n    if(param === 'theme' && text === undefined) text = xmlescape(currentTheme)\n    if(param === 'self') text = String(Boolean(text))\n    return (\n      {\n        type: 'element',\n        name: 'param',\n        attributes: {\n          name: param\n        },\n        elements: [{ type: 'text', text }]\n      }\n    )\n  })\n}\n\nexport async function generate(pack) {\n  const zip = new JSZip()\n\n  const texts = zip.folder('Texts')\n  texts.file('authors.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Authors />')\n  texts.file('sources.xml', bom+'<?xml version=\"1.0\" encoding=\"utf-8\"?><Sources />')\n\n  zip.file('[Content_Types].xml', bom+formatDefaults.contentTypes)\n\n  const files = new FileResolver(zip)\n\n  const packContent = {\n    declaration: {\n      attributes: {\n        version: format.xmlVersion,\n        encoding: format.encoding\n      }\n    },\n    elements: [\n      {\n        type: 'comment',\n        comment: 'This package was generated using SIPacker — free open-source online tool for generating SIGame packs. Feel free to leave feedback on https://github.com/VityaSchel/SIPacker'\n      },\n      {\n        type: 'element',\n        name: 'package',\n        attributes: {\n          xmlns: 'http://vladimirkhil.com/ygpackage3.0.xsd',\n          id: pack.uuid,\n          name: xmlescape(pack.name),\n          version: pack.version,\n          restriction: pack.over18 ? '18+' : undefined,\n          date: pack.date,\n          publisher: xmlescape(pack.publisher),\n          difficulty: pack.difficulty,\n          logo: await files.resolve(pack.logo, 'логотип пака'),\n          language: pack.language,\n          generator: 'sipacker'\n        },\n        elements: [\n          ...pack.tags ? [\n            {\n              type: 'element',\n              name: 'tags',\n              elements: pack.tags.map(tag => (\n                {\n                  type: 'element',\n                  name: 'tag',\n                  elements: [{ type: 'text', text: xmlescape(tag) }]\n                }\n              ))\n            }\n          ] : [],\n          {\n            type: 'element',\n            name: 'info',\n            elements: [\n              {\n                type: 'element',\n                name: 'authors',\n                elements: pack.authors.map(author => (\n                  {\n                    type: 'element',\n                    name: 'author',\n                    elements: [{ type: 'text', text: xmlescape(author) }]\n                  }\n                ))\n              },\n              ...pack.comment ? [\n                {\n                  type: 'element',\n                  name: 'comments',\n                  elements: [\n                    {\n                      type: 'text',\n                      text: xmlescape(pack.comment)\n                    }\n                  ]\n                }\n              ] : []\n            ]\n          },\n          {\n            type: 'element',\n            name: 'rounds',\n            elements: await Promise.all(pack.rounds.map(async round => (\n              {\n                type: 'element',\n                name: 'round',\n                attributes: {\n                  name: xmlescape(round.name)\n                },\n                elements: [\n                  {\n                    type: 'element',\n                    name: 'themes',\n                    elements: await Promise.all(round.themes.map(async theme => (\n                      {\n                        type: 'element',\n                        name: 'theme',\n                        attributes: {\n                          name: xmlescape(theme.name)\n                        },\n                        elements: [\n                          {\n                            type: 'element',\n                            name: 'questions',\n                            elements: await Promise.all(theme.questions.map(async question => (\n                              {\n                                type: 'element',\n                                name: 'question',\n                                attributes: {\n                                  price: question.price\n                                },\n                                elements: [\n                                  ...questionType(question, theme.name),\n                                  {\n                                    type: 'element',\n                                    name: 'scenario',\n                                    elements: await Promise.all(question.scenario.map(async scenarioEvent => (\n                                      {\n                                        type: 'element',\n                                        name: 'atom',\n                                        attributes: {\n                                          type: scenarioEvent.type,\n                                          time: scenarioEvent.duration\n                                        },\n                                        elements: !['say', 'marker'].includes(scenarioEvent.type) ? [\n                                          {\n                                            type: 'text',\n                                            text: {\n                                              text: xmlescape(scenarioEvent.data.text ?? '').replaceAll('\\n', '\\\\n'),\n                                              image: await files.resolve(\n                                                scenarioEvent.data.imageField,\n                                                `сценарий вопроса за ${question.price} в теме «${theme.name}» в раунде «${round.name}»`\n                                              ),\n                                            }[scenarioEvent.type]\n                                          }\n                                        ] : []\n                                      }\n                                    )))\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'right',\n                                    elements: question.correctAnswers.map(answer => (\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: xmlescape(answer) }]\n                                      }\n                                    ))\n                                  },\n                                  {\n                                    type: 'element',\n                                    name: 'wrong',\n                                    elements: question.incorrectAnswers?.map(answer => (\n                                      {\n                                        type: 'element',\n                                        name: 'answer',\n                                        elements: [{ type: 'text', text: xmlescape(answer) }]\n                                      }\n                                    ))\n                                  }\n                                ]\n                              }\n                            )))\n                          }\n                        ]\n                      }\n                    )))\n                  }\n                ]\n              }\n            )))\n          }\n        ]\n      }\n    ]\n  }\n  const content = xmlJS.js2xml(packContent)\n  zip.file('content.xml', bom+content)\n\n  const warnings = files.warnings\n\n  const zipInBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE' })\n  return { result: zipInBlob, warnings }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport cx from 'classnames'\nimport Snackbar from '@mui/material/Snackbar'\nimport Slide from '@mui/material/Slide'\nimport Alert from '@mui/material/Alert'\nimport { connect } from 'react-redux'\nimport store from '../../../reducers'\nimport { MdFileUpload } from 'react-icons/md'\nimport Dropzone from 'react-dropzone'\nimport { parse as parsePackGenerator } from 'localStorage/packGenerator'\n\nconst SlideTransition = props => <Slide {...props} direction=\"right\" />\n\nfunction Upload(props) {\n  const [entered, setEntered] = React.useState(false)\n  const [content, setContent] = React.useState([])\n\n  const handleDrop = acceptedFiles => {\n    setEntered(false)\n    if(!acceptedFiles) { return }\n    for (let pack of acceptedFiles) {\n      let previousState = props.dashboard?.uploading ?? []\n      const id = Date.now()\n      props.dispatch({ type: 'dashboard/setUploading', uploading: previousState.concat({ id, name: pack.name }) })\n      parsePackGenerator(pack).then(result => {\n        if(result.error) {\n          const error = {\n            noContentXML: 'Не найден файл content.xml в паке. Возможно, архив поврежден или неправильно создан, например, с абсолютными путями вместо относительных.'\n          }[result.error]\n          const date = Date.now()\n          setContent(content.concat({ date, text: `Ошибка при загрузке пака «${pack.name}»: ${error}` }))\n        } else {\n          props.reloadPacks()\n        }\n        props.dispatch({ type: 'dashboard/setUploading', uploading: store.getState().pack?.uploading.filter(pack => id !== pack.id) })\n      })\n    }\n  }\n\n  const handleEnter = () => setEntered(true)\n  const handleLeave = () => setEntered(false)\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      setContent(content.filter(c => c.date >= Date.now()-1000*5))\n    }, 1000)\n    return () => clearInterval(interval)\n  }, [content])\n\n  return (\n    <>\n      <Dropzone\n        onDragEnter={handleEnter}\n        onDragLeave={handleLeave}\n        onDrop={handleDrop}\n        accept={['.siq']}\n      >\n        {({getRootProps, getInputProps}) => (\n          <div className={cx(\n            [styles.packBase, styles.newPack, styles.upload],\n            { [styles.dragOver]: entered }\n          )} {...getRootProps()}>\n            <input {...getInputProps()} />\n            <span><MdFileUpload /> Загрузить файл пака</span>\n          </div>\n        )}\n      </Dropzone>\n      <div className={cx(styles.backdrop, { [styles.visible]: entered })} />\n      <Snackbar\n        open={content.length}\n        onClose={() => setContent([])}\n        TransitionComponent={SlideTransition}\n      >\n        <Alert severity=\"error\" className={styles.alert}>\n          {content.map((c, i) => <p key={i}>{c.text}</p>)}\n        </Alert>\n      </Snackbar>\n    </>\n  )\n}\n\nUpload.propTypes = {\n  dashboard: PropTypes.object,\n  dispatch: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default connect(state => ({ dashboard: state.dashboard }))(Upload)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Menu from '@mui/material/Menu'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport ListItemText from '@mui/material/ListItemText'\n\nexport const ContextMenuActions = React.createContext({})\nfunction ContextMenu(props) {\n  const [items, setItems] = React.useState()\n\n  const contextMenu = {\n    open(e, items) {\n      if(props.menu?.position) return true\n      else e.preventDefault()\n      setItems(items)\n      props.dispatch({ type: 'menu/setPosition', position: [e.clientX, e.clientY] })\n      return false\n    }\n  }\n\n  const close = e => {\n    e?.preventDefault()\n    props.dispatch({ type: 'menu/setPosition', position: null })\n  }\n\n  const handleSelect = action => e => {\n    e.stopPropagation()\n    action()\n    close()\n  }\n\n  return (\n    <>\n      <ContextMenuActions.Provider value={contextMenu}>\n        {props.children}\n      </ContextMenuActions.Provider>\n      {\n        ReactDOM.createPortal(\n          <Menu\n            open={props.menu?.position}\n            anchorReference=\"anchorPosition\"\n            anchorPosition={props.menu?.position && { top: props.menu.position[1], left: props.menu.position[0] }}\n            onClose={close}\n          >\n            {items?.map((item, i) =>\n              <MenuItem onClick={handleSelect(item.action)} key={i}>\n                <ListItemIcon>\n                  {item.icon}\n                </ListItemIcon>\n                <ListItemText>{item.name}</ListItemText>\n              </MenuItem>\n            )}\n          </Menu>,\n          document.body\n        )\n      }\n    </>\n  )\n}\n\nContextMenu.displayName = 'ContextMenu'\nContextMenu.propTypes = {\n  dispatch: PropTypes.func,\n  menu: PropTypes.array,\n  name: PropTypes.string,\n  children: PropTypes.func,\n}\n\nexport default connect(state => ({ menu: state.menu }))(ContextMenu)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@mui/material/Button'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport Checkbox from '@mui/material/Checkbox'\nimport FormControlLabel from '@mui/material/FormControlLabel'\n\nlet okCallback\nconst ConfirmationDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [text, setText] = React.useState()\n  const [confirmText, setConfirmText] = React.useState('')\n  const [checkboxText, setCheckboxText] = React.useState('')\n  const [checkboxValue, setCheckboxValue] = React.useState(true)\n\n  const handleAction = result => {\n    setOpen(false)\n    okCallback({ confirmed: result, checked: checkboxValue })\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    open(text, confirmText, checkboxText) {\n      return new Promise(resolve => {\n        okCallback = resolve\n        setOpen(true)\n        setText(text)\n        setConfirmText(confirmText)\n        setCheckboxText(checkboxText)\n      })\n    }\n  }))\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      onClose={() => handleAction(false)}\n    >\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {text && <p>{text}</p>}\n          {props.children}\n          {checkboxText && <FormControlLabel control={\n            <Checkbox\n              defaultChecked\n              value={checkboxValue}\n              onChange={e => setCheckboxValue(e.target.checked)}\n            />\n          } label={checkboxText} />}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={() => handleAction(false)} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={() => handleAction(true)} color=\"primary\">\n          {confirmText ?? 'Продолжить'}\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  children: PropTypes.node\n}\nConfirmationDialog.displayName = 'ConfirmationDialog'\nexport default ConfirmationDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport ConfirmationDialog from 'components/ConfirmationDialog'\nimport { deleteFilesOfPack, getAllURIsFromPack } from 'localStorage/fileStorage'\nimport { deleteLocalPack } from 'localStorage/localPacks'\nimport { useHistory } from 'react-router-dom'\nimport store from 'reducers/index'\n\nconst DeleteConfirmationDialog = React.forwardRef((props, ref) => {\n  const confirmationDialogRef = React.useRef()\n  const history = useHistory()\n\n  React.useImperativeHandle(ref, () => ({\n    async confirmPackDeletion(packUUID) {\n      const { confirmed, checked } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить пак? Он будет удален безвозвратно.',\n          'Удалить',\n          'Удалить все связанные медиафайлы'\n        )\n      const deleteFiles = checked\n      if(confirmed) {\n        if(deleteFiles) {\n          const fileURIs = await getAllURIsFromPack(packUUID)\n          fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n          await deleteFilesOfPack(packUUID)\n        }\n        await deleteLocalPack(packUUID)\n        history.push('/')\n      }\n      return confirmed\n    },\n\n    async confirmRoundDeletion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить раунд? Все вопросы также будут удалены.', 'Удалить')\n      return confirmed\n    },\n\n    async confirmDeleteQuestion() {\n      const { confirmed } = await confirmationDialogRef.current\n        .open('Вы уверены, что хотите удалить вопрос?', 'Удалить')\n      return confirmed\n    }\n  }))\n\n  return (\n    <ConfirmationDialog ref={confirmationDialogRef} />\n  )\n})\n\nDeleteConfirmationDialog.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string\n}\n\nDeleteConfirmationDialog.displayName = 'DeleteConfirmationDialog'\nexport default DeleteConfirmationDialog\n","import React from 'react'\nimport Button from '@mui/material/Button'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogActions from '@mui/material/DialogActions'\nimport MuiDialog from '@mui/material/Dialog'\nimport TextField from '@mui/material/TextField'\n\nconst RenameDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => () => {})\n  const [subject, setSubject] = React.useState('')\n  const [oldName, setOldName] = React.useState('')\n  const [value, setValue] = React.useState('')\n\n  React.useImperativeHandle(ref, () => ({\n    askToRename(callback, subject, oldName) {\n      setCallback(() => callback)\n      setSubject(subject)\n      setOldName(oldName)\n      setValue(oldName)\n      setOpen(true)\n    }\n  }))\n\n  const handleCancel = () => {\n    setOpen(false)\n    callback()\n  }\n\n  const handleRename = () => {\n    setOpen(false)\n    callback(value)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth='xs'\n      open={open}\n      onClose={handleCancel}\n    >\n      <DialogTitle>Переименовать {subject}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label='Новое имя'\n          placeholder={oldName}\n          variant='outlined'\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          style={{ marginTop: 15 }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          Отмена\n        </Button>\n        <Button onClick={handleRename} color=\"primary\" disabled={!value.length}>\n          Переименовать\n        </Button>\n      </DialogActions>\n    </MuiDialog>\n  )\n})\n\nRenameDialog.displayName = 'RenameDialog'\n\nexport default RenameDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from '../styles.module.scss'\nimport { MdDelete } from 'react-icons/md'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { BiRename } from 'react-icons/bi'\nimport { formatDate } from '../../../utils'\nimport { componentsPropTypes } from '../../../consts'\nimport PackImage from './index'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport { DashboardContext } from '../index'\nimport RenameDialog from 'components/RenameDialog'\nimport { loadLocalPack, saveLocalPack } from 'localStorage/localPacks'\n\nPack.propTypes = { pack: PropTypes.shape(componentsPropTypes.pack) }\nexport default function Pack(props) {\n  const confDialogRef = React.useRef()\n  const renameDialog = React.useRef()\n  const dashboardActions = React.useContext(DashboardContext)\n  const creationTime = formatDate(new Date(props.pack.creationTime))\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Переименовать', icon: <BiRename />, action: () => handleRenamePack() },\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeletePack() }\n    ])\n  }\n\n  const handleDeletePack = async () => {\n    if(await confDialogRef.current.confirmPackDeletion(props.pack.uuid))\n      dashboardActions.reloadPacks()\n  }\n\n  const handleRenamePack = async () => {\n    const newName = await new Promise(resolve =>\n      renameDialog.current.askToRename(resolve, 'пак', props.pack.name)\n    )\n    if(newName !== undefined){\n      let pack = await loadLocalPack(props.pack.uuid)\n      pack = { ...pack, name: newName }\n      saveLocalPack(pack)\n      dashboardActions.reloadPacks()\n    }\n  }\n\n  return (\n    <>\n      <div\n        className={[styles.packBase, styles.pack].join(' ')}\n        onContextMenu={handleOpenMenu}\n      >\n        <PackImage src={props.pack.logo} />\n        <div className={styles.info}>\n          <span className={styles.name}>{props.pack.name}</span>\n          <span className={styles.time}>Создано: {creationTime}</span>\n        </div>\n      </div>\n      <div onClick={e => e.stopPropagation()}>\n        <DeleteConfirmationDialog ref={confDialogRef} />\n        <RenameDialog ref={renameDialog} />\n      </div>\n    </>\n  )\n}\n","import React from 'react'\nimport styles from '../styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { BsPlus } from 'react-icons/bs'\nimport Skeleton from '@mui/material/Skeleton'\nimport { componentsPropTypes } from '../../../consts'\nimport { getFile } from 'localStorage/fileStorage'\nexport { default as Upload } from './Upload'\nexport { default as Pack } from './Pack'\nimport { connect } from 'react-redux'\n\nexport function Create() {\n  return (\n    <div className={[styles.packBase, styles.newPack].join(' ')}>\n      <span><BsPlus /> Создать новый пак</span>\n    </div>\n  )\n}\n\nLoading.propTypes = { name: PropTypes.string }\nexport function Loading(props) {\n  return (\n    <div className={[styles.packBase, styles.loading].join(' ')}>\n      <Skeleton variant='rectangular' width='100%' height='100%' className={styles.skeleton} />\n      { props.name && <span>Загрузка «{props.name}»</span> }\n    </div>\n  )\n}\n\nPackImage.propTypes = {\n  src: componentsPropTypes.pack.thumbnail,\n  dispatch: PropTypes.func\n}\n\nfunction PackImage(props) {\n  const [src, setSrc] = React.useState()\n\n  React.useEffect(() => {\n    if(!src) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: props.src, callback: () => setSrc() })\n  }, [setSrc])\n\n  React.useEffect(() => {\n    let cleanup = () => {}\n    if(props.src) {\n      (async () => {\n        const file = await getFile(props.src)\n        if(file === null) return setSrc()\n\n        const src = URL.createObjectURL(file.blob)\n        setSrc(src)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: props.src, callback: () => setSrc() })\n\n        cleanup = () => {\n          URL.revokeObjectURL(src)\n          props.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: props.src })\n        }\n      })()\n    } else {\n      setSrc()\n    }\n    return () => cleanup(src)\n  }, [props.src])\n\n  return (\n    <div className={styles.pictureContainer}>\n      {src\n        ? <img src={src} className={styles.thumbnail} />\n        : <div className={styles.thumbnail} />\n      }\n    </div>\n  )\n}\n\nexport default connect(null)(PackImage)\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport PropTypes from 'prop-types'\nimport { componentsPropTypes } from '../../consts.js'\nimport { Create, Upload, Loading, Pack } from './packTypes'\nimport { Link } from 'react-router-dom'\nimport { loadLocalPacks } from '../../localStorage/localPacks'\nimport { connect } from 'react-redux'\n\nexport default function Dashboard() {\n  return (\n    <LocalPacks />\n  )\n}\n\nexport const DashboardContext = React.createContext({})\nexport const LocalPacks = connect(state => ({ dashboard: state.dashboard }))(props => {\n  const [savedLocalPacks, setSavedLocalPacks] = React.useState()\n\n  const loadPacks = async () => {\n    const packsUUID = await loadLocalPacks()\n    const packs = packsUUID\n      .sort((a,b) => a.creationTime - b.creationTime)\n    setSavedLocalPacks(packs)\n  }\n\n  React.useEffect(() => loadPacks(), [])\n\n  const contextActions = {\n    reloadPacks: () => loadPacks()\n  }\n\n  return (\n    <div>\n      <DashboardContext.Provider value={contextActions}>\n        <div className={styles.packsList}>\n          <PackBase type='create' />\n          <PackBase type='upload' reloadPacks={loadPacks} />\n          { props.dashboard?.uploading?.reverse().map(({ name }, i) => <PackBase type='loading' name={name} key={i} />) }\n          { savedLocalPacks\n            ? savedLocalPacks.map(pack => <PackBase type='pack' key={pack.uuid} pack={pack} />)\n            : new Array(5).fill().map((_, i) => <PackBase type='loading' key={i} />)\n          }\n        </div>\n      </DashboardContext.Provider>\n    </div>\n  )\n})\n\nPackBase.propTypes = PackSwitch.propTypes = {\n  type: PropTypes.oneOf(['create', 'upload', 'pack', 'loading']),\n  pack: PropTypes.shape(componentsPropTypes.pack),\n  name: PropTypes.string,\n  reloadPacks: PropTypes.func\n}\n\nfunction PackBase(props) {\n  return (\n    ['loading', 'upload'].includes(props.type)\n      ? <PackSwitch {...props} />\n      : <Link to={props.type === 'pack' ? `/pack/${props.pack.uuid}` : `${props.type}`}><PackSwitch {...props} /></Link>\n  )\n}\n\nfunction PackSwitch(props) {\n  return (\n    {\n      'create': <Create />,\n      'upload': <Upload reloadPacks={props.reloadPacks} />,\n      'loading': <Loading name={props.name} />,\n      'pack': <Pack pack={props.pack} />\n    }[props.type]\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport { Link } from 'react-router-dom'\nimport IconButton from '@mui/material/IconButton'\nimport { ImGithub } from 'react-icons/im'\nimport { AiOutlineInfoCircle } from 'react-icons/ai'\nimport AppBar from '@mui/material/AppBar'\nimport Toolbar from '@mui/material/Toolbar'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport Dialog from '@mui/material/Dialog'\nimport DialogActions from '@mui/material/DialogActions'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\n\nexport default function Navigation() {\n  const [infoShown, setInfoShown] = React.useState(false)\n\n  return (\n    <AppBar position='static' style={{ zIndex: 4 }}>\n      <Toolbar color='primary'>\n        <div className={styles.logoContainer}>\n          <Link to='/' className={styles.logo}>\n            <Typography variant='h6' component='div'>\n              SIPacker\n            </Typography>\n          </Link>\n        </div>\n        <div>\n          <a href='https://github.com/VityaSchel/SIPacker' target='_blank' rel='noreferrer'>\n            <IconButton>\n              <ImGithub />\n            </IconButton>\n          </a>\n          <IconButton onClick={() => setInfoShown(true)}>\n            <AiOutlineInfoCircle />\n          </IconButton>\n        </div>\n        <Dialog\n          open={infoShown}\n          onClose={() => setInfoShown(false)}\n        >\n          <DialogTitle>\n            Автор приложения\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <p>Веб-приложение создано VityaSchel в 2021 году для игры SiGame как кроссплатформенная замена SIQuester.</p>\n              <p>Все свои идеи и предложения излагайте в пул-реквестах или хотя бы во вкладке Issues, а не в моих лс.</p>\n              <p>\n                <a\n                  href='https://github.com/VladimirKhil/SI/wiki/%D0%A1%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B0-.siq'\n                  className='onHover'\n                >\n                  Спецификация формата .siq\n                </a>\n              </p>\n              <p>\n                Большая благодарность Владимиру Хилю за то, что не игнорил мои вопросы во время разработки этого сайта\n                (привет разработчикам мафии онлайн и мафии го)\n              </p>\n              <p>\n                Также хочу пожелать удачи и легкой\n                службы <a\n                  href='https://vk.com/id245297843'\n                  target='_blank'\n                  rel=\"noreferrer\"\n                  className='onHover'\n                >Роме Кучину</a>, который своим комментарием натолкнул меня на идею создания этого сайта, но не может\n                работать со мной по причине Я в армии.\n              </p>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setInfoShown(false)}>ОК</Button>\n          </DialogActions>\n        </Dialog>\n      </Toolbar>\n    </AppBar>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport TextField from '@mui/material/TextField'\nimport Button from '@mui/material/Button'\nimport { v4 as uuidv4 } from 'uuid'\nimport { useHistory } from 'react-router-dom'\nimport { saveLocalPack } from '../../localStorage/localPacks'\nimport dayjs from 'dayjs'\nimport { format } from '../../consts.js'\n\nexport default function NewPack() {\n  const [packName, setPackName] = React.useState('')\n  const history = useHistory()\n\n  const createPack = async () => {\n    const uuid = uuidv4()\n    const pack = {\n      uuid,\n      name: packName,\n      date: dayjs().format('DD.MM.YYYY'),\n      creationTime: Date.now(),\n      language: '',\n      version: format.latestVersion,\n      difficulty: 5,\n      rounds: []\n    }\n    await saveLocalPack(pack)\n    history.push(`/pack/${uuid}`)\n  }\n\n  const handleCheckSubmit = e => {\n    if(e.key === 'Enter') createPack()\n  }\n\n  const examples = ['Вопросы от славян', 'Игры, музыка и многое другое', 'Кинопак', 'Аниме и прочий буллщит', 'Мемная Солянка']\n\n  return (\n    <div className={styles.container}>\n      <TextField\n        label='Название пака'\n        variant='outlined'\n        value={packName}\n        onChange={e => setPackName(e.target.value)}\n        className={styles.field}\n        placeholder={examples[Math.floor(Math.random()*examples.length)]}\n        onKeyUp={handleCheckSubmit}\n        autoFocus\n      />\n      <Button\n        variant='contained'\n        onClick={() => createPack()}\n        disabled={!packName.length}\n      >Создать</Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Breadcrumbs from '@mui/material/Breadcrumbs'\nimport Typography from '@mui/material/Typography'\nimport { useLocation } from 'react-router'\nimport styles from '../styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes, uuidRegex } from 'consts'\nimport { mapPackState } from 'utils'\nimport { settings, rounds, question } from '../pathRegexps.json'\n\nPackBreadcrumbs.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackBreadcrumbs(props) {\n  const linkStyles = [styles.link, 'onHover', 'noDefaults'].join(' ')\n  const route = useLocation()\n  const [path, setPath] = React.useState([])\n\n  React.useEffect(() => {\n    const page = route.pathname.split(new RegExp(`/pack/${uuidRegex}`), 2)[1]\n    const parts = page.split('/')\n\n    const crumbs = {\n      dashboard: { to: '/', name: 'Паки' },\n      currentPack: { to: `/pack/${props.pack.uuid}`, name: props.pack.name },\n      settings: { to: `/pack/${props.pack.uuid}/settings`, name: 'Настройки' },\n      rounds: { to: `/pack/${props.pack.uuid}/rounds/${parts[2]}`, name: `Раунд ${parts[2]}` },\n      theme: { name: `Тема ${parts[4]}` },\n      questions: {\n        to: `/pack/${props.pack.uuid}/rounds/${parts[2]}/themes/${parts[4]}/questions/${parts[6]}`,\n        name: parts[6] === 'add' ? 'Новый вопрос' : `Вопрос за ${parts[6]}`\n      }\n    }\n\n    const paths = {\n      default: [crumbs.dashboard, crumbs.currentPack],\n      [settings]: [crumbs.dashboard, crumbs.currentPack, crumbs.settings],\n      [rounds]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds],\n      [question]: [crumbs.dashboard, crumbs.currentPack, crumbs.rounds, crumbs.theme, crumbs.questions],\n    }\n\n    for(let [pathRegex, path] of Object.entries(paths)){\n      if(new RegExp(`^${pathRegex}/?$`).test(page)){\n        return setPath(path)\n      }\n    }\n    return setPath(paths.default)\n  }, [route, props.pack])\n\n  return (\n    <Breadcrumbs>\n      {path.map(({ to, name }, i) => {\n        if(to && i !== path.length-1) {\n          return <Link to={to} className={linkStyles} key={i}>\n            {name}\n          </Link>\n        } else {\n          return <Typography color={i === path.length-1 ? 'text.primary' : 'text.secondary'} key={i}>{name}</Typography>\n        }\n      })}\n    </Breadcrumbs>\n  )\n}\n\nexport default connect(mapPackState)(PackBreadcrumbs)\n","import React from 'react'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport MuiDialog from '@mui/material/Dialog'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport Zoom from '@mui/material/Zoom'\nimport DialogActions from '@mui/material/DialogActions'\nimport Button from '@mui/material/Button'\nimport { generate, check } from 'localStorage/packGenerator'\nimport { saveAs } from 'file-saver'\nimport { slugify } from 'transliteration'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Zoom ref={ref} {...props} />\n})\n\nconst SavingDialog = React.forwardRef((props, ref) => {\n  const [open, setOpen] = React.useState(false)\n  const [generating, setGenerating] = React.useState(false)\n  const [errors, setErrors] = React.useState([])\n  const [warnings, setWarnings] = React.useState([])\n  const [pack, setPack] = React.useState()\n\n  React.useImperativeHandle(ref, () => ({\n    save(pack) {\n      setOpen(true)\n      setPack(pack)\n    }\n  }))\n\n  React.useEffect(() => pack?.uuid && startProcessing(), [pack])\n\n  const startProcessing = async () => {\n    const errors = await check(pack)\n    setErrors(errors)\n    if(errors.length) return\n\n    setGenerating(true)\n    setTimeout(bundlePack, 500)\n  }\n\n  const bundlePack = async () => {\n    let zip, warnings = []\n    try {\n      const result = await generate(pack)\n      zip = result.result\n      warnings = result.warnings\n    } catch(e) {\n      console.error(e)\n      return setErrors([e?.message])\n    }\n    setGenerating(false)\n    saveAs(zip, `${slugify(pack.name)}.siq`, { autoBom: true })\n    setWarnings(warnings)\n    setOpen(warnings.length)\n  }\n\n  return (\n    <MuiDialog\n      maxWidth=\"xs\"\n      open={open}\n      TransitionComponent={Transition}\n      onClose={() => errors.length && setOpen(false)}\n    >\n      <DialogTitle>Генерация архива</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          { generating && Boolean(!errors.length) && <>\n            <p>Производится генерация файла пака. Это может занять несколько секунд, в зависимости от количества медиа-файлов.</p>\n            <LinearProgress color='primary' />\n          </>}\n          { Boolean(errors.length) && <>\n            <p>Исправьте следующие ошибки и перезапустите процесс генерации пака:</p>\n            <ul>\n              { errors.map((error, i) => <li key={i}>{error}</li>) }\n            </ul>\n          </> }\n          { Boolean(warnings.length) && <>\n            <p>Во время генерации возникли возникли следующие предупреждения, их не требуется исправлять:</p>\n            <ul>\n              { warnings.map((warning, i) => <li key={i}>{warning}</li>) }\n            </ul>\n          </> }\n        </DialogContentText>\n      </DialogContent>\n      { !generating &&\n        <DialogActions>\n          <Button autoFocus onClick={() => setOpen(false)}>\n            Закрыть\n          </Button>\n        </DialogActions>\n      }\n    </MuiDialog>\n  )\n})\n\nSavingDialog.displayName = 'ConfirmationDialog'\nexport default SavingDialog\n","import React from 'react'\nimport { useLocation, useHistory, Link } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../../consts'\nimport IconButton from '@mui/material/IconButton'\nimport { MdSettings, MdDelete, MdFileDownload } from 'react-icons/md'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport SavingDialog from './SavingDialog'\nimport { mapPackState } from 'utils'\nimport { uuidRegex } from 'consts'\nimport { root, rounds, question } from '../pathRegexps.json'\n\nPackToolbar.propTypes = {\n  pack: componentsPropTypes.pack\n}\n\nfunction PackToolbar(props) {\n  const confirmationDialogRef = React.useRef()\n  const savingDialogRef = React.useRef()\n  const history = useHistory()\n  const { pathname } = useLocation()\n\n  const handleSave = () => savingDialogRef.current.save(props.pack)\n  const handleDeletePack = () => {\n    confirmationDialogRef.current.confirmPackDeletion(props.pack.uuid)\n  }\n\n  const handleDeleteRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    const pack = { ...props.pack }\n    const roundIndex = parseInt(pathname.split(`/pack/${props.pack.uuid}/rounds/`, 2)[1])\n    pack.rounds.splice(roundIndex - 1, 1)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}`)\n  }\n\n  const handleDeleteQuestion = async () => {\n    if(!await confirmationDialogRef.current.confirmDeleteQuestion()) return\n    const pack = { ...props.pack }\n    let [,round,themeIndex,questionPrice] = pathname.match(new RegExp(`/pack/${uuidRegex}/rounds/(\\\\d+)/themes/(\\\\d+)/questions/(\\\\d+)`))\n    questionPrice = parseInt(questionPrice)\n    const theme = props.pack.rounds[round-1].themes[themeIndex-1]\n    const questionIndex = theme.questions.findIndex(({ price }) => price === Number(questionPrice))\n    theme.questions.splice(questionIndex, 1)\n    theme.questions = theme.questions.sort((a, b) => a.price - b.price)\n    await saveLocalPack(pack)\n    history.push(`/pack/${pack.uuid}/rounds/${round}`)\n  }\n\n  const buttons = props.pack && {\n    [root]: [\n      [handleSave, <MdFileDownload key='download' />],\n      [`/pack/${props.pack.uuid}/settings`, <MdSettings key='settings' />],\n      [handleDeletePack, <MdDelete key='delete' />, styles.delete]\n    ],\n    [rounds]: [\n      [handleDeleteRound, <MdDelete key='delete' />, styles.delete]\n    ],\n    [question]: [\n      [handleDeleteQuestion, <MdDelete key='delete' />, styles.delete]\n    ]\n  }\n\n  const path = pathname.split(`/pack/${props.pack.uuid}`, 2)[1]\n  const pageToolbar = Object.entries(buttons).find(\n    ([regex, toolbar]) => new RegExp(`^${regex}/?$`).test(path) && toolbar\n  )\n\n  return (\n    <>\n      <div className={styles.buttons}>\n        {pageToolbar && pageToolbar[1].map(([action, icon, styles], i) => <>\n          {\n            typeof action === 'string'\n              ? <Link to={action} className={styles} key={i}>\n                <IconButton>\n                  {icon}\n                </IconButton>\n              </Link>\n              : <IconButton className={styles} onClick={action} key={i}>\n                {icon}\n              </IconButton>\n          }\n        </>)}\n      </div>\n      <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      <SavingDialog ref={savingDialogRef} />\n    </>\n  )\n}\n\nexport default connect(mapPackState)(PackToolbar)\n","import PropTypes from 'prop-types'\nimport { Draggable } from 'react-beautiful-dnd'\nimport Card from '@mui/material/Card'\nimport styles from './styles.module.scss'\n\nfunction getStyle(style) {\n  if (style.transform) {\n    const axisLockY =\n      'translate(0px' +\n      style.transform.slice(\n        style.transform.indexOf(','),\n        style.transform.length\n      )\n    return {\n      ...style,\n      transform: axisLockY\n    }\n  }\n  return style\n}\n\nItem.propTypes = {\n  index: PropTypes.number,\n  draggableId: PropTypes.string,\n  className: PropTypes.string,\n  children: PropTypes.func,\n  tag: PropTypes.string,\n}\n\nexport default function Item(props) {\n  return (\n    <Draggable\n      draggableId={String(props.draggableId)}\n      index={props.index}\n    >\n      {provided =>\n        <Card\n          className={[props.className, styles.item].join(' ')}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          style={getStyle(provided.draggableProps.style)}\n        >\n          {props.children(provided)}\n        </Card>\n      }\n    </Draggable>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDragHandle } from 'react-icons/md'\n\nHandle.propTypes = { provided: PropTypes.object }\nexport default function Handle(props) {\n  return (\n    <div\n      className={styles.handle}\n      {...props.provided.dragHandleProps}\n    >\n      <MdDragHandle />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport CardContent from '@mui/material/CardContent'\nimport CardActionArea from '@mui/material/CardActionArea'\nimport { darkTheme } from '../../../../App'\nimport { Link } from 'react-router-dom'\nimport { MdDelete } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport TextField from '@mui/material/TextField'\nimport Item from 'components/ItemsList/Item'\nimport DeleteConfirmationDialog from 'components/ConfirmationDialog/DeleteConfirmationDialog'\nimport Typography from '@mui/material/Typography'\nimport Handle from 'components/ItemsList/Handle'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nRound.propTypes = ItemContent.propTypes = {\n  draggableId: PropTypes.string,\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  editing: PropTypes.bool,\n  setEditing: PropTypes.func,\n  handleRemoveRound: PropTypes.func,\n  roundNamesTextInput: PropTypes.arrayOf(PropTypes.string),\n  handleRoundNameChange: PropTypes.func\n}\n\nexport default function Round(props) {\n  const confirmationDialogRef = React.useRef()\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleRemoveRound = async () => {\n    if(!await confirmationDialogRef.current.confirmRoundDeletion()) return\n    props.handleRemoveRound(props.index)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleRemoveRound() }\n    ])\n  }\n\n  return (\n    <Item {...props} className={styles.cardOfRound}>\n      {(provided) => <>\n        {!props.editing\n          ? <Link\n            to={`/pack/${props.pack.uuid}/rounds/${props.index+1}`}\n            className={styles.link}\n            onContextMenu={handleOpenMenu}\n          >\n            <CardActionArea>\n              <ItemContent {...props} />\n            </CardActionArea>\n          </Link>\n          : <div className={styles.item}>\n            <Handle provided={provided} />\n            <ItemContent {...props} />\n            <Toolbar handleRemoveRound={handleRemoveRound} />\n          </div>\n        }\n        <DeleteConfirmationDialog ref={confirmationDialogRef} />\n      </>}\n    </Item>\n  )\n}\n\nfunction ItemContent(props) {\n  const round = props.item\n\n  return (\n    <CardContent style={{ paddingBottom: darkTheme.spacing(2) }} className={styles.flex1}>\n      {\n        props.editing\n          ? <TextField\n            value={props.roundNamesTextInput[props.index]}\n            label='Название раунда'\n            variant='outlined'\n            onChange={e => props.handleRoundNameChange(e, props.index)}\n            size='small'\n            className={styles.inputField}\n          />\n          : <Typography variant='body2' color='text.secondary' className={styles.flex2}>\n            Раунд {props.index+1}. {round.name}\n          </Typography>\n      }\n    </CardContent>\n  )\n}\n\nToolbar.propTypes = { handleRemoveRound: PropTypes.func }\nfunction Toolbar(props) {\n  return (\n    <IconButton onClick={props.handleRemoveRound} className={styles.delete}>\n      <MdDelete />\n    </IconButton>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdCancel, MdAdd, MdDone } from 'react-icons/md'\nimport cx from 'classnames'\nimport Button from '@mui/material/Button'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormControl from '@mui/material/FormControl'\nimport OutlinedInput from '@mui/material/OutlinedInput'\nimport InputAdornment from '@mui/material/InputAdornment'\nimport IconButton from '@mui/material/IconButton'\n\nAddItem.propTypes = {\n  onAdd: PropTypes.func,\n  inputLabel: PropTypes.string,\n  buttonLabel: PropTypes.string,\n  className: PropTypes.string\n}\nexport default function AddItem(props) {\n  const [addingItem, setAddingItem] = React.useState(false)\n\n  return (\n    <div className={[styles.addItem, props.className].join(' ')}>\n      <ItemName\n        setAddingItem={setAddingItem}\n        handleAddItem={props.onAdd}\n        className={cx(styles.button, { [styles.expand]: addingItem })}\n        addingItem={addingItem}\n        label={props.inputLabel}\n      />\n      <div className={cx([styles.button, styles.addButtonOuter], { [styles.expand]: !addingItem })}>\n        <Button\n          variant='contained'\n          startIcon={<MdAdd />}\n          onClick={() => setAddingItem(true)}\n          className={styles.addButton}\n        >{props.buttonLabel}</Button>\n      </div>\n    </div>\n  )\n}\n\nItemName.propTypes = {\n  setAddingItem: PropTypes.func,\n  handleAddItem: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  className: PropTypes.string,\n  addingItem: PropTypes.bool,\n  label: PropTypes.string\n}\n\nfunction ItemName(props) {\n  const [value, setValue] = React.useState('')\n  const outlinedInput = React.useRef()\n\n  const handleDone = () => {\n    props.setAddingItem(false)\n    if(value.length) {\n      props.handleAddItem(value)\n      setValue('')\n    }\n  }\n\n  React.useEffect(() => {\n    props.addingItem && outlinedInput.current.focus()\n  }, [props.addingItem])\n\n  return (\n    <FormControl variant='outlined' className={props.className}>\n      <InputLabel size=\"small\">{props.label}</InputLabel>\n      <OutlinedInput\n        label={props.label}\n        size='small'\n        type='text'\n        value={value}\n        onChange={e => setValue(e.target.value)}\n        onKeyDown={e => e.key === 'Enter' && handleDone()}\n        style={{ paddingRight: 0 }}\n        inputRef={outlinedInput}\n        endAdornment={\n          <InputAdornment position='end'>\n            <IconButton onClick={handleDone}>\n              {!value.length ? <MdCancel /> : <MdDone />}\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\nimport Typography from '@mui/material/Typography'\nimport listStyles from './styles.module.scss'\n\nItemsList.propTypes = {\n  droppableId: PropTypes.string,\n  droppableClassName: PropTypes.string,\n  draggableProps: PropTypes.object,\n  list: PropTypes.array,\n  itemComponent: PropTypes.func,\n  useIdAsKey: PropTypes.bool,\n  noItemsLabel: PropTypes.string,\n  onDragEnd: PropTypes.func\n}\n\nexport default function ItemsList(props) {\n  const [itemsMap, setItemsMap] = React.useState({ map: new WeakMap(), length: 0 })\n\n  return (\n    <DragDropContext onDragEnd={props.onDragEnd}>\n      <Droppable droppableId={props.droppableId}>\n        {provided => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className={props.droppableClassName}\n          >\n            {(() => {\n              const children = props.list.length\n                ? props.list.map((item, i) => {\n                  const oid = object => {\n                    if(!itemsMap.map.has(object)) itemsMap.map.set(object, ++itemsMap.length)\n                    return itemsMap.map.get(object)\n                  }\n\n                  return (\n                    <props.itemComponent\n                      key={props.useIdAsKey ? item.id : oid(item)}\n                      index={i}\n                      draggableId={props.useIdAsKey ? item.id : oid(item)}\n                      item={item}\n                      {...props.draggableProps}\n                    />\n                  )\n                })\n                : <Typography\n                  variant='body1'\n                  gutterBottom\n                  className={listStyles.noItems}\n                >{props.noItemsLabel}</Typography>\n              setItemsMap(itemsMap)\n              return children\n            })()}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport IconButton from '@mui/material/IconButton'\nimport { MdEdit, MdDone } from 'react-icons/md'\nimport Typography from '@mui/material/Typography'\n\nEditingToolbar.propTypes = {\n  showButton: PropTypes.boolean,\n  editing: PropTypes.boolean,\n  onSwitch: PropTypes.func,\n  heading: PropTypes.string\n}\nexport default function EditingToolbar(props) {\n  return (\n    <div className={styles.toolbar}>\n      <h2 className={styles.text}>{props.heading}</h2>\n      {props.showButton && props.editing && <>\n        <Typography color='text.secondary' className={styles.hint}>\n          Все изменения сохраняются автоматически\n        </Typography>\n      </>}\n      {props.showButton && <IconButton onClick={props.onSwitch}>{props.editing ? <MdDone /> : <MdEdit />}</IconButton>}\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Round from './Round'\nimport AddItem from 'components/ItemsList/AddItem'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport ItemsList from 'components/ItemsList'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../../utils'\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n  return result\n}\n\nRoundsList.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundsList(props) {\n  const [rounds, setRounds] = React.useState([])\n  const [editing, setEditing] = React.useState(false)\n  const pack = props.pack\n\n  React.useEffect(() => setRounds(props.pack.rounds), [props.pack.rounds])\n\n  const handleAddRound = async name => {\n    let packRounds = [...pack.rounds]\n    packRounds.push({ name, themes: [] })\n    updateRounds(packRounds)\n  }\n\n  const handleRemoveRound = index => {\n    let packRounds = [...pack.rounds]\n    packRounds.splice(index, 1)\n    updateRounds(packRounds)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(rounds, result.source.index, result.destination.index)\n    updateRounds(items)\n  }\n\n  const handleSwitchEditing = () => {\n    setEditing(!editing)\n  }\n\n  const handleRoundNameChange = (e, index) => {\n    const namesList = [...rounds]\n    namesList[index].name = e.target.value\n    updateRounds(namesList)\n  }\n\n  const updateRounds = async items => {\n    setRounds(items)\n    let newPack = { ...pack, rounds: items }\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const names = rounds.map(pack => pack.name)\n\n  return (\n    <div className={styles.rounds}>\n      <EditingToolbar\n        showButton={Boolean(rounds.length)}\n        onSwitch={handleSwitchEditing}\n        editing={editing}\n        heading='Раунды пака'\n      />\n      <ItemsList\n        onDragEnd={onDragEnd}\n        droppableId='rounds'\n        droppableClassName={styles.droppable}\n        itemComponent={Round}\n        draggableProps={{\n          pack, editing,\n          handleRemoveRound: handleRemoveRound,\n          handleRoundNameChange: handleRoundNameChange,\n          roundNamesTextInput: names\n        }}\n        list={rounds}\n        noItemsLabel='Еще нет раундов'\n      />\n      <AddItem\n        onAdd={handleAddRound}\n        inputLabel='Название раунда'\n        buttonLabel='Добавить раунд'\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(RoundsList)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport LinearProgress from '@mui/material/LinearProgress'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport { MdKeyboardArrowRight } from 'react-icons/md'\nimport cx from 'classnames'\nimport { mapPackState } from '../../../../utils'\nimport {\n  hasQuestionInEachTheme, hasThemeInEachRound, has5ThemesInEachRound, hasAtLeast25Questions, hasQuestionWithAuction,\n  hasQuestionWithBagCat, hasScenarioInEachQuestion\n} from 'utils'\n\nCheckList.propTypes = { pack: PropTypes.object }\nfunction CheckList(props) {\n\n  const items = {\n    required: [\n      { name: 'Добавить авторов пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.authors) },\n      { name: 'Установить язык пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.language) },\n      { name: 'Создать раунд', link: '/pack/%packUUID%/', done: Boolean(props.pack.rounds.length) },\n      { name: 'Создать темы во всех раундах', done: hasThemeInEachRound(props.pack) },\n      { name: 'Создать вопросы во всех темах', done: hasQuestionInEachTheme(props.pack) },\n      { name: 'Создать события сценария в каждом вопросе', done: hasScenarioInEachQuestion(props.pack) },\n      //Установить равное колво вопросов во всех темах одного раунда\n    ],\n    optional: [\n      { name: 'Добавить иконку пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.logo) },\n      { name: 'Добавить теги пака', link: '/pack/%packUUID%/settings/', done: Boolean(props.pack.tags) },\n      { name: 'Добавить не менее 5 тем в каждом раунде', done: has5ThemesInEachRound(props.pack) },\n      { name: 'Добавить не менее 25 вопросов всего', done: hasAtLeast25Questions(props.pack) },\n      { name: 'Добавить вопрос со ставкой', done: hasQuestionWithAuction(props.pack) },\n      { name: 'Добавить вопрос Кот в мешке', done: hasQuestionWithBagCat(props.pack) },\n      { name: 'Сжать файлы, чтобы размер каждого был менее 1 МБ' }\n    ]\n  }\n  const filterItems = f => f.filter(item => item.done !== undefined)\n  const reducer = (progress, point) => progress+Number(point.done)\n  const progress = filterItems(items.required).reduce(reducer, 0) + filterItems(items.optional).reduce(reducer, 0)\n  const max = filterItems(items.required).length + filterItems(items.optional).length\n\n  return (\n    <div className={styles.container}>\n      <Typography variant='h6' className={styles.text}>Чеклист:</Typography>\n      <div className={styles.progress}>\n        <LinearProgress variant='determinate' value={progress/max*100} className={styles.progressBar} />\n        <Typography variant='subtitle1' color='text.secondary'>Выполнено: {progress} из {max}</Typography>\n      </div>\n      <ol className={styles.list}>\n        <Items starting>{items.required}</Items>\n        <div className={styles.caption}>\n          <span className={styles.line} />\n          <Typography variant='overline' className={styles.text}>Можно публиковать пак</Typography>\n          <span className={styles.line} />\n        </div>\n        <Items ending>{items.optional}</Items>\n      </ol>\n    </div>\n  )\n}\n\nfunction Items(props) {\n  return (\n    props.children.map((item, i) => <Item\n      key={i}\n      first={props.starting && i === 0}\n      last={props.ending && i === props.children.length-1}\n    >{item}</Item>)\n  )\n}\n\nMarker.propTypes = { first: PropTypes.bool, last: PropTypes.bool }\nItem.propTypes = { children: PropTypes.node, ...Marker.propTypes }\nfunction Item(props) {\n  const location = useLocation()\n  const path = location.pathname.split('/').filter(String)\n  const packUUID = path[1]\n  const link = props.children.link && props.children.link.replace('%packUUID%', packUUID)\n\n  return (\n    <li className={props.children.done && styles.done}>\n      <Marker first={props.first} last={props.last} />\n      { link\n        ? <Link to={link} className={styles.link}>\n          <span>{props.children.name}</span>\n          <MdKeyboardArrowRight/>\n        </Link>\n        : <span>{props.children.name}</span>\n      }\n    </li>\n  )\n}\n\nfunction Marker(props) {\n  return (\n    <span className={styles.marker}>\n      <span className={cx(styles.lineBefore, { [styles.hidden]: props.first })}/>\n      <span className={styles.bullet}/>\n      <span className={cx(styles.lineAfter, { [styles.hidden]: props.last })}></span>\n    </span>\n  )\n}\n\nexport default connect(mapPackState)(CheckList)\n","import styles from './styles.module.scss'\nimport RoundsList from './List/'\nimport CheckList from './CheckList/'\n\nexport default function Rounds() {\n  return (\n    <div className={styles.roundsPage}>\n      <RoundsList />\n      <CheckList />\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdFilterList, MdDelete } from 'react-icons/md'\nimport Stack from '@mui/material/Stack'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Typography from '@mui/material/Typography'\nimport { ContextMenuActions } from 'components/ContextMenu'\nimport { deleteFilesOfPack, getDeletedPacks, getAllURIsFromPack } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\n\nFilters.propTypes = {\n  packs: PropTypes.arrayOf(PropTypes.string),\n  checkboxes: PropTypes.arrayOf(PropTypes.bool),\n  onChange: PropTypes.func,\n  reloadPacks: PropTypes.func\n}\n\nexport default function Filters(props) {\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  const handleChange = (e, i) => {\n    const checkboxes = [...props.checkboxes]\n    checkboxes[i] = { ...checkboxes[i], checked: e.target.checked }\n    props.onChange(checkboxes)\n  }\n\n  const handleOpenMenu = uuid => e => {\n    contextMenuActions.open(\n      e,\n      [\n        {\n          name: 'Удалить',\n          icon: <MdDelete />,\n          action: async () => {\n            if(uuid === null) {\n              const deletedPacks = await getDeletedPacks()\n              await Promise.all(\n                deletedPacks.map(\n                  async packUUID => {\n                    const fileURIs = await getAllURIsFromPack(packUUID)\n                    fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n                    await deleteFilesOfPack(packUUID)\n                  }\n                )\n              )\n            } else {\n              const fileURIs = await getAllURIsFromPack(uuid)\n              fileURIs.forEach(fileURI => store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI }))\n              await deleteFilesOfPack(uuid)\n            }\n            props.reloadPacks()\n          }\n        }\n      ]\n    )\n  }\n\n  return (\n    <Stack className={styles.filters}>\n      <div className={styles.text}>\n        <MdFilterList />\n        <Typography variant='overline' color='text.secondary'>\n          Фильтры\n        </Typography>\n      </div>\n      {props.packs.map((pack, i) =>\n        <FormControlLabel\n          key={i}\n          control={\n            <Checkbox\n              checked={Boolean(props.checkboxes[i]?.checked)}\n              onChange={e => handleChange(e, i)}\n            />\n          }\n          className={styles.checkbox}\n          label={pack === null ? 'Удаленные паки' : pack.name}\n          onContextMenu={handleOpenMenu(pack === null ? null : pack.uuid)}\n        />\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport IconButton from '@mui/material/IconButton'\nimport { MdInfoOutline, MdDelete } from 'react-icons/md'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport Button from '@mui/material/Button'\nimport filesize from 'filesize'\nimport { symbols } from 'components/ImageField'\nimport { formatDate } from '../../utils'\nimport { deleteFile } from 'localStorage/fileStorage'\nimport store from 'reducers/index'\nimport { ContextMenuActions } from 'components/ContextMenu'\n\nFile.propTypes = {\n  file: PropTypes.object,\n  handleSelect: PropTypes.func,\n  onRemove: PropTypes.func\n}\n\nexport default function File(props) {\n  const [fileSrc, setFileSrc] = React.useState()\n  const [infoDialogueOpen, setInfoDialogueOpen] = React.useState(false)\n  const [removing, setRemoving] = React.useState(false)\n  const contextMenuActions = React.useContext(ContextMenuActions)\n\n  React.useEffect(() => {\n    const url = props.file.url\n    if(url) setFileSrc(url)\n    else {\n      const src = URL.createObjectURL(props.file.miniature)\n      setFileSrc(src)\n      return () => URL.revokeObjectURL(src)\n    }\n  }, [props.file.miniature])\n\n  const handleSelect = () => props.handleSelect(props.file.fileURI)\n\n  const handleShowInfo = e => {\n    e.stopPropagation()\n    setInfoDialogueOpen(true)\n  }\n\n  const handleCloseInfo = e => {\n    if(removing) return false\n    e.stopPropagation()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleDeleteFile = async () => {\n    const fileURI = props.file.fileURI\n    setRemoving(true)\n    await deleteFile(fileURI)\n    store.dispatch({ type: 'fileRendering/fileUnlinked', fileURI })\n    setRemoving(false)\n    props.onRemove()\n    setInfoDialogueOpen(false)\n  }\n\n  const handleOpenMenu = e => {\n    contextMenuActions.open(e, [\n      { name: 'Удалить', icon: <MdDelete />, action: () => handleDeleteFile() }\n    ])\n  }\n\n  return (\n    <>\n      <Grid\n        item xs={4} md={6} sm={12}\n        className={styles.item}\n        onClick={handleSelect}\n        onContextMenu={handleOpenMenu}\n      >\n        <div className={styles.itemInner}>\n          <IconButton\n            className={styles.button}\n            size='small'\n            onClick={handleShowInfo}\n          >\n            <MdInfoOutline />\n          </IconButton>\n          <div className={styles.preview}>\n            <img src={fileSrc} className={styles.foreground} />\n            <img src={fileSrc} className={styles.background} />\n          </div>\n          <div className={styles.fileName}>{props.file.fileName}</div>\n        </div>\n      </Grid>\n      <Dialog\n        open={infoDialogueOpen}\n        onClose={handleCloseInfo}\n      >\n        <DialogTitle className={styles.title}>Информация о файле {props.file.filename}</DialogTitle>\n        <DialogContent>\n          <p>Размер файла: <b>{filesize(props.file.size, { symbols })}</b></p>\n          <p>Дата добавления: <b>{formatDate(new Date(props.file.addedAt))}</b></p>\n          <Button\n            variant='contained'\n            className={styles.delete}\n            onClick={handleDeleteFile}\n            disabled={removing}\n          >Удалить файл</Button>\n        </DialogContent>\n      </Dialog>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Grid from '@mui/material/Grid'\nimport { getRecent } from 'localStorage/fileStorage'\nimport File from './File'\nimport Typography from '@mui/material/Typography'\n\nList.propTypes = {\n  packs: PropTypes.array,\n  handleSelect: PropTypes.func\n}\n\nexport default function List(props) {\n  const [files, setFiles] = React.useState([])\n\n  React.useEffect(() => { mapFiles() }, [props.packs])\n\n  const mapFiles = async () => {\n    const files = await getRecent(Object.keys(props.packs))\n    const mappedFiles = []\n    let packSwitchUUID\n    for (let file of files) {\n      if(packSwitchUUID !== file.packUUID){\n        packSwitchUUID = file.packUUID\n        mappedFiles.push({\n          packName: props.packs[packSwitchUUID],\n          files: [file]\n        })\n      } else {\n        mappedFiles[mappedFiles.length - 1].files.push(file)\n      }\n    }\n    setFiles(mappedFiles)\n  }\n\n  return (\n    <div className={styles.list}>\n      <div className={styles.content}>\n        {\n          files.length\n            ? files.map((packGroup, i) => <div key={i}>\n              <div className={styles.packDivider}>\n                {packGroup.packName\n                  ? <>Пак <b>{packGroup.packName}</b></>\n                  : <>Удаленный пак</>\n                }\n              </div>\n              <Grid container spacing={2} className={styles.grid}>\n                {packGroup.files.map((file, j) =>\n                  <File\n                    file={file}\n                    key={`${i}_${j}`}\n                    handleSelect={props.handleSelect}\n                    onRemove={mapFiles}\n                  />\n                )}\n              </Grid>\n            </div>)\n            : <div className={styles.noFilesYet}>\n              <Typography className={styles.hint}>Файлы не найдены</Typography>\n              <Typography className={styles.hint}>Попробуйте изменить фильтры</Typography>\n              <Typography className={styles.hint}>Загрузите файлы во вкладке Загрузка</Typography>\n            </div>\n        }\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dropzone from 'react-dropzone'\nimport styles from './styles.module.scss'\nimport { MdFileUpload, MdDone } from 'react-icons/md'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { saveFile, saveFileAsURL, allowedFileTypes } from 'localStorage/fileStorage'\nimport Button from '@mui/material/Button'\nimport { FormikTextField } from 'components/FormikField'\nimport { useFormik } from 'formik'\nimport * as yup from 'yup'\n\nUpload.propTypes = {\n  packUUID: PropTypes.string,\n  setTab: PropTypes.func\n}\n\nexport default function Upload(props) {\n  const [uploading, setUploading] = React.useState(false)\n  const [uploadingFileIndex, setUploadingFileIndex] = React.useState()\n  const [filesListLength, setFilesListLength] = React.useState()\n  const [errors, setErrors] = React.useState([])\n  const [uploaded, setUploaded] = React.useState(false)\n\n  const handleDrop = async files => {\n    setUploaded(false)\n    setUploading(true)\n    setFilesListLength(files.length)\n    const errors = []\n    let hasErrors = false\n    for (let fileIndex in files) {\n      setUploadingFileIndex(Number(fileIndex)+1)\n      const file = files[fileIndex]\n      file.filename = file.name\n      try {\n        await saveFile(file, props.packUUID)\n      } catch(e) {\n        console.error(e)\n        hasErrors = true\n        setErrors(errors.concat({ filename: file.name, errorMessage: e }))\n      }\n    }\n    setUploaded(true)\n    if(!hasErrors) {\n      setUploading(false)\n      props.setTab('added')\n    }\n  }\n\n  const validate = async values => {\n    const url = values.url\n    let responseRaw\n    try {\n      responseRaw = await fetch(url)\n      if(responseRaw?.status !== 200) throw {}\n    } catch(e) {\n      return { url: 'Не удалось получить изображение' }\n    }\n    values.file = {}\n    values.file.type = responseRaw?.headers?.get?.('content-type')\n    if(!allowedFileTypes.includes(values.file.type))\n      return { url: 'Неподдерживаемый тип файла' }\n    const blob = await responseRaw.blob()\n    values.file.size = blob.size\n    values.file.name = blob.name || responseRaw?.headers?.get?.('content-disposition') || url.split('/').splice(-1) || 'Без названия'\n  }\n\n  const formik = useFormik({\n    initialValues: { url: '' },\n    validationSchema: yup.object({\n      url: yup\n        .string()\n        .url('Некорректный формат адреса')\n        .required('Введите адрес')\n    }),\n    validate,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async values => {\n      let hasErrors = false\n      try {\n        await saveFileAsURL(values.url, values.file, props.packUUID)\n      } catch(e) {\n        console.error(e)\n        hasErrors = true\n        setErrors([{ filename: values.file.name, errorMessage: e }])\n        setUploading(true)\n      }\n      !hasErrors && props.setTab('added')\n    }\n  })\n\n  return (\n    !uploading\n      ? <div className={styles.addForm}>\n        <Dropzone\n          onDropAccepted={handleDrop}\n          accept={allowedFileTypes}\n        >\n          {({ getRootProps, getInputProps }) => (\n            <div className={styles.dropzone} {...getRootProps()}>\n              <input {...getInputProps()} />\n              <span className={styles.flex}><MdFileUpload /> Загрузить медиа-файл</span>\n              <span className={styles.supportedTypes}>\n                <span>Поддерживаемые типы файлов:</span>\n                <span>Фото: png, jpeg, gif</span>\n                <span>Аудио: mp3, wav, ogg</span>\n                <span>Видео: mp4</span>\n              </span>\n            </div>\n          )}\n        </Dropzone>\n        <form onSubmit={formik.handleSubmit} className={styles.downloadByURL}>\n          <span className={styles.hint}>Или загрузить по URL:</span>\n          <FormikTextField\n            name='url'\n            formik={formik}\n            label='Адрес файла'\n            placeholder='https://example.com/image.png'\n            size='small'\n            className={styles.input}\n          />\n          <Button type='submit'>Добавить</Button>\n        </form>\n      </div>\n      : <div className={styles.uploadingFiles}>\n        <div className={styles.uploadingScreen}>\n          <div className={styles.uploadingCaption}>\n            { !uploaded\n              ? <>\n                <CircularProgress size={20} thickness={10} />\n                <span className={styles.caption}>Загрузка файла {uploadingFileIndex} из {filesListLength}</span>\n              </>\n              : <>\n                <MdDone />\n                <span className={styles.caption}>{errors.length < filesListLength ? 'Файлы загружены' : 'Операция завершена'}</span>\n              </>\n            }\n          </div>\n          {Boolean(errors.length) && <div className={styles.errors}>\n            <span>Ошибки во время загрузки файлов:</span>\n            {errors.map((error, i) => <span key={i}>Файл «{error.filename}»: {\n              {\n                'File with such hash already exist': 'Такой файл уже загружен в этот пак'\n              }[error.errorMessage]\n            }</span>)}\n          </div>}\n          {uploaded && <Button variant='contained' onClick={() => setUploading(false)}>ОК</Button>}\n        </div>\n      </div>\n  )\n}\n","import React from 'react'\nimport styles from './styles.module.scss'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport IconButton from '@mui/material/IconButton'\nimport DialogContent from '@mui/material/DialogContent'\nimport { MdClose } from 'react-icons/md'\nimport { emptyFunc } from '../../utils'\nimport Filters from './Filters'\nimport { loadLocalPacks } from 'localStorage/localPacks'\nimport { getDeletedPacks } from 'localStorage/fileStorage'\nimport List from './List'\nimport Tabs from '@mui/material/Tabs'\nimport Tab from '@mui/material/Tab'\nimport Upload from './Upload'\n\nconst FileStorage = React.forwardRef((props, ref) => {\n  const [tab, setTab] = React.useState('added')\n  const [open, setOpen] = React.useState(false)\n  const [callback, setCallback] = React.useState(() => emptyFunc)\n  const [packs, setPacks] = React.useState([])\n  const [packUUID, setPackUUID] = React.useState([])\n  const [checkboxes, setCheckboxes] = React.useState([])\n\n  const handleClose = () => {\n    setOpen(false)\n    setCallback(() => emptyFunc)\n  }\n\n  const handleSelect = selectedFile => {\n    handleClose()\n    setTimeout(() => callback(selectedFile), 1)\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    async open(packUUID, callback) {\n      setCallback(() => callback)\n      await loadPacks()\n      setOpen(true)\n      setPackUUID(packUUID)\n    }\n  }))\n\n  const loadPacks = async () => {\n    const packs = await loadLocalPacks()\n    const deletedPacks = await getDeletedPacks()\n    if(deletedPacks.length) packs.push(null)\n    setPacks(packs)\n    setCheckboxes(\n      packs.map(\n        pack => {\n          const deletedPack = pack === null\n          const packUUID = deletedPack ? null : pack.uuid\n          const checked = checkboxes.find(({ uuid }) => uuid === packUUID)?.checked\n          return (\n            {\n              uuid: packUUID,\n              checked: checked !== undefined\n                ? Boolean(checked)\n                : !deletedPack\n            }\n          )\n        }\n      )\n    )\n  }\n\n  const filteredPacks = Object.fromEntries(checkboxes\n    .filter(cb => cb.checked)\n    .map(checkedPack => ([checkedPack.uuid,\n      checkedPack.uuid === null\n        ? 'Удаленные паки'\n        : packs.find(pack => pack.uuid === checkedPack.uuid)?.name\n    ])\n    )\n  )\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n    >\n      <DialogTitle className={styles.title}>\n        <span>Хранилище файлов</span>\n        <IconButton\n          onClick={handleClose}\n          className={styles.close}\n          sx={{ color: theme => theme.palette.grey[500] }}\n        >\n          <MdClose />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent className={styles.dialog}>\n        <Tabs\n          value={tab} variant='fullWidth'\n          onChange={(_, tab) => setTab(tab)}\n          textColor='inherit'\n          className={styles.tabs}\n        >\n          <Tab label='Добавленные' value='added' />\n          <Tab label='Загрузить' value='upload' />\n        </Tabs>\n        {\n          tab === 'added' &&\n          <div className={styles.files}>\n            <Filters\n              packs={packs}\n              checkboxes={checkboxes}\n              onChange={setCheckboxes}\n              reloadPacks={loadPacks}\n            />\n            <List\n              packs={filteredPacks}\n              handleSelect={handleSelect}\n            />\n          </div>\n        }\n        {\n          tab === 'upload' &&\n          <div className={styles.upload}>\n            <Upload packUUID={packUUID} setTab={setTab} />\n          </div>\n        }\n      </DialogContent>\n    </Dialog>\n  )\n})\n\nFileStorage.displayName = 'FileStorage'\nexport default FileStorage\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport Button from '@mui/material/Button'\nimport { getFile } from 'localStorage/fileStorage'\nimport filesize from 'filesize'\nexport const symbols = { B: 'Б', kB: 'кБ', MB: 'МБ', GB: 'ГБ', TB: 'ТБ', PB: 'ПБ', EB: 'ЭБ', ZB: 'ЗБ', YB: 'ЙБ' }\nimport FileStorage from 'components/FileStorage'\nimport { connect } from 'react-redux'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport { MdErrorOutline } from 'react-icons/md'\nimport store from 'reducers/index'\n\nImageField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  name: PropTypes.string,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func,\n  onChange: PropTypes.func,\n}\n\nfunction ImageField(props) {\n  const [src, setSrc] = React.useState({})\n  const [srcUrl, setSrcUrl] = React.useState(null)\n  const [noFile, setNoFile] = React.useState(false)\n  const fileStorage = React.useRef()\n\n  React.useEffect(() => {\n    if(!src.fileURI) return\n    props.dispatch({ type: 'fileRendering/setFileUnlinkCallback', fileURI: src.fileURI, callback: () => setNoFile(true) })\n  }, [setNoFile])\n\n  React.useEffect(() => {\n    const fileURI = props.value\n    let cleanup = () => {}\n    setSrcUrl()\n    if(fileURI) {\n      (async () => {\n        const file = await getFile(fileURI)\n        if(!file) return setNoFile(true)\n\n        setNoFile(false)\n\n        const blob = file.miniature\n        const name = file.fileName\n        const size = file.size\n        setSrc({ name, size })\n\n        const url = file.url ?? URL.createObjectURL(blob)\n        setSrcUrl(url)\n        props.dispatch({ type: 'fileRendering/fileRenderingStarted', fileURI: file.fileURI, callback: () => setNoFile(true) })\n\n        cleanup = () => {\n          url.startsWith('blob:') && URL.revokeObjectURL(url)\n          store.dispatch({ type: 'fileRendering/fileRenderingStopped', fileURI: file.fileURI })\n        }\n      })()\n    } else {\n      setSrc({})\n      setSrcUrl(null)\n    }\n    return () => cleanup()\n  }, [props.value])\n\n  const handleClick = async () => {\n    let result = await new Promise(resolve => fileStorage.current.open(props.pack.uuid, resolve))\n    if(!result) { return }\n    props.onChange(result)\n  }\n\n  const handleClear = () => {\n    setNoFile(false)\n    props.onChange(undefined)\n  }\n\n  return (\n    <div className={styles.container}>\n      <Typography\n        variant='body'\n        color='text.primary'\n        gutterBottom\n        className={styles.label}\n      >{props.label}:</Typography>\n      <div className={styles.preview}>\n        { srcUrl === null\n          ? <Placeholder onClick={handleClick} />\n          : noFile\n            ? <FileMissingIcon onClick={handleClick} />\n            : srcUrl !== undefined\n              ? <Image src={src} srcUrl={srcUrl} label={props.label} onClick={handleClick} />\n              : <Loading />\n        }\n        <div className={styles.info}>\n          { noFile\n            ? <FileMissing />\n            : src.size\n              ? <FileInfo src={src} />\n              : <FileNotSelected />\n          }\n          <Button\n            variant='contained'\n            onClick={handleClear}\n            disabled={!srcUrl && !noFile}\n          >Очистить поле</Button>\n        </div>\n      </div>\n      <FileStorage ref={fileStorage} />\n    </div>\n  )\n}\n\nPlaceholder.propTypes = FileMissingIcon.propTypes = { onClick: PropTypes.func }\nfunction Placeholder({ onClick }) {\n  return (\n    <div className={styles.placeholder} onClick={onClick}>\n      <span>Нажмите, чтобы выбрать</span>\n    </div>\n  )\n}\n\nfunction FileMissingIcon({ onClick }) {\n  return (\n    <div className={styles.fileMissing} onClick={onClick}>\n      <MdErrorOutline className={styles.icon} />\n    </div>\n  )\n}\n\nfunction FileMissing() {\n  return (\n    <span>\n      Файл не найден. Вероятно, вы выбрали его, но затем удалили из хранилища файлов.\n    </span>\n  )\n}\n\nFileInfo.propTypes = { src: PropTypes.object }\nfunction FileInfo({ src }) {\n  return (\n    <>\n      <span>Название файла: {src.name}</span>\n      <span>Размер файла: {filesize(src.size, { symbols })}</span>\n    </>\n  )\n}\n\nfunction FileNotSelected() {\n  return (\n    <>\n      <span>Файл не выбран</span>\n      <span>Выберете файл, нажав на кнопку левее.</span>\n    </>\n  )\n}\n\nfunction Loading() {\n  return (\n    <div className={styles.loading}>\n      <CircularProgress />\n    </div>\n  )\n}\n\nImage.propTypes = {\n  src: PropTypes.object,\n  srcUrl: PropTypes.string,\n  onClick: PropTypes.func,\n  label: PropTypes.string\n}\nfunction Image({ src, srcUrl, onClick, label }) {\n  return (\n    <img\n      src={srcUrl}\n      alt={srcUrl ? `Изображение для поля ${label} с именем «${src.name}»` : ''}\n      onClick={onClick}\n      className={styles.image}\n    />\n  )\n}\n\nexport default connect(state => ({ pack: state.pack, fileRendering: state.fileRendering }))(ImageField)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport TextField from '@mui/material/TextField'\nimport Autocomplete from '@mui/material/Autocomplete'\nimport MenuItem from '@mui/material/MenuItem'\nimport Select from '@mui/material/Select'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport FormHelperText from '@mui/material/FormHelperText'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Slider from '@mui/material/Slider'\nimport styles from './styles.module.scss'\nimport ImageField from 'components/ImageField'\n\nconst formikMuiErrors = (formik, name) => ({\n  error: Boolean(formik.errors[name]),\n  helperText: formik.errors[name]\n})\n\nFormikTextField.propTypes =\nFormikAutocomplete.propTypes =\nFormikCheckbox.propTypes =\nFormikImageField.propTypes =\n{\n  name: PropTypes.string,\n  formik: PropTypes.object\n}\n\nexport function FormikTextField(props) {\n  const { name, formik, ...fieldProps } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <TextField\n      name={name}\n      value={formik.values[name]}\n      onChange={handleChange}\n      {...formikMuiErrors(formik, name)}\n      {...fieldProps}\n    />\n  )\n}\n\n\nexport function FormikAutocomplete(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = (_, value) => {\n    formik.setFieldValue(name, value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  let value = formik.values[name] ?? []\n  if(value.length === 1 && value[0] === '') value = []\n\n  const handleKeyDown = e => {\n    if(e.key === 'Enter') {\n      e.preventDefault()\n    }\n  }\n\n  return (\n    <Autocomplete\n      {...field}\n      multiple\n      options={[]}\n      value={value}\n      getOptionLabel={(option) => option}\n      freeSolo clearOnBlur={true}\n      onChange={handleChange}\n      renderInput={props => (\n        <TextField\n          {...field}\n          {...props}\n          {...formikMuiErrors(formik, name)}\n          placeholder='Нажмите Enter, чтобы добавить'\n          onKeyDown={handleKeyDown}\n        />\n      )}\n    />\n  )\n}\n\nFormikSelect.propTypes = { ...FormikTextField.propTypes, options: PropTypes.object }\nexport function FormikSelect(props) {\n  const { formik, name, options, ...field } = props\n  const error = { error: Boolean(formik.errors[name]) }\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControl fullWidth>\n      <InputLabel {...error}>{props.label}</InputLabel>\n      <Select\n        {...field}\n        name={name}\n        value={formik.values[name]}\n        onChange={handleChange}\n        {...error}\n      >\n        {Object.entries(options).map(([id, label]) => <MenuItem value={id} key={id}>{label}</MenuItem>)}\n      </Select>\n      <FormHelperText error>{formik.errors[name] && formik.errors[name]}</FormHelperText>\n    </FormControl>\n  )\n}\n\nexport function FormikCheckbox(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = e => {\n    formik.handleChange(e)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          name={name}\n          checked={formik.values[name]}\n          onChange={handleChange}\n        />\n      }\n      {...field}\n    />\n  )\n}\n\nFormikSlider.propTypes = {\n  ...FormikTextField.propTypes,\n  defaultValue: PropTypes.number,\n}\nexport function FormikSlider(props) {\n  const { formik, name, ...field } = props\n  const [value, setValue] = React.useState(formik.values[name])\n\n  const handleChange = value => {\n    setValue(value)\n    formik.setTouched({ ...formik.touched, [name]: true })\n  }\n\n  React.useEffect(() => formik.setFieldValue(name, value), [value])\n\n  return (\n    <div className={styles.slider}>\n      <span>{field.label}</span>\n      <Slider\n        name={name}\n        value={value}\n        onChange={e => requestAnimationFrame(() => handleChange(e.target.value))}\n        valueLabelDisplay='auto'\n        marks\n        {...field}\n      />\n    </div>\n  )\n}\n\nexport function FormikImageField(props) {\n  const { formik, name, ...field } = props\n\n  const handleChange = fileURI => {\n    formik.setFieldValue(name, fileURI ?? '')\n    let touched = { ...formik.touched }\n    if(fileURI !== undefined || formik.initialValues[name] !== (fileURI ?? '')) {\n      touched = { ...formik.touched, [name]: true }\n    } else {\n      const formikTouched = { ...formik.touched }\n      delete formikTouched[name]\n      touched = formikTouched\n    }\n    formik.setTouched(touched)\n  }\n\n  return (\n    <ImageField\n      {...field}\n      value={formik.values[name]}\n      onChange={handleChange}\n    />\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport * as yup from 'yup'\nimport { componentsPropTypes, format } from '../../../consts'\nimport {\n  FormikTextField,\n  FormikAutocomplete,\n  FormikSelect,\n  FormikCheckbox,\n  FormikSlider,\n  FormikImageField\n} from 'components/FormikField'\nimport { connect } from 'react-redux'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport { useHistory, Prompt } from 'react-router-dom'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { initValues, mapPackState } from '../../../utils'\n\nconst validationSchema = yup.object({\n  logo: yup\n    .string('Добавьте логотип пака'),\n  name: yup\n    .string('Введите название пака')\n    .required('Заполните поле названия'),\n  authors: yup\n    .array()\n    .ensure()\n    .min(1, 'Заполните поле автора')\n    .required('Заполните поле автора'),\n  publisher: yup\n    .string('Введите издателя'),\n  difficulty: yup\n    .number('Выберете сложность пака')\n    .positive()\n    .min(1)\n    .max(10)\n    .integer('Число должно быть целым')\n    .required('Заполните поле сложности'),\n  comment: yup\n    .string('Введите комментарий'),\n  tags: yup\n    .array().ensure(),\n  language: yup\n    .string('Введите язык пака')\n    .required('Заполните поле язык'),\n  over18: yup\n    .bool('Введите ограничения пака')\n})\n\nSettings.propTypes = {\n  pack: PropTypes.shape(componentsPropTypes),\n  dispatch: PropTypes.func\n}\n\nfunction Settings(props) {\n  const [submitting, setSubmitting] = React.useState(false)\n  const history = useHistory()\n  const initialValues = initValues(validationSchema, props.pack)\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      setSubmitting(true)\n      let pack = { ...props.pack, ...values }\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      history.push(`/pack/${pack.uuid}`)\n    },\n  })\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormikTextField\n          name='name'\n          formik={formik}\n          label='Название'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='authors'\n          formik={formik}\n          label='Авторы'\n          disabled={submitting}\n        />\n        <FormikImageField\n          name='logo'\n          formik={formik}\n          label='Логотип'\n        />\n        <FormikTextField\n          name='publisher'\n          formik={formik}\n          label='Издатель пака (необязательно)'\n          disabled={submitting}\n        />\n        <FormikSlider\n          name='difficulty'\n          label='Сложность'\n          formik={formik}\n          disabled={submitting}\n          step={1} min={1} max={10}\n        />\n        <FormikSelect\n          name='language'\n          formik={formik}\n          label='Язык пака'\n          options={{\n            '': 'Не указано',\n            'ru-RU': 'Русский (ru-RU)',\n            'en-US': 'Английский (en-US)'\n          }}\n          disabled={submitting}\n        />\n        <FormikTextField\n          name='comment'\n          formik={formik}\n          label='Описание (необязательно)'\n          disabled={submitting}\n        />\n        <FormikAutocomplete\n          name='tags'\n          formik={formik}\n          label='Теги (необязательно)'\n          disabled={submitting}\n        />\n        <FormikCheckbox\n          name='over18'\n          formik={formik}\n          label='Добавить метку 18+'\n          disabled={submitting}\n        />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={!Object.keys(formik.touched).length || submitting}\n        >\n          Сохранить\n        </Button>\n      </form>\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n      <div className={styles.info}>\n        <ul>\n          <li>Версия XML для описания формата: <span>{format.xmlVersion}</span></li>\n          <li>Кодировка текста в формате: <span>{format.encoding}</span></li>\n          <li>Версия формата: <span>{props.pack.version}</span></li>\n          <li>UUID: <span>{props.pack.uuid}</span></li>\n          <li>Дата создания: <span>{props.pack.date}</span></li>\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Settings)\n","import Typography from '@mui/material/Typography'\nimport styles from './styles.module.scss'\n\nexport default function NotFound404() {\n  return (\n    <div className={styles.centered}>\n      <Typography variant='h1'>Страница не найдена</Typography>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport TableBody from '@mui/material/TableBody'\nimport Paper from '@mui/material/Paper'\nimport ButtonBase from '@mui/material/ButtonBase'\nimport { useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Typography from '@mui/material/Typography'\n\nRoundTable.propTypes = { themes: PropTypes.array }\nexport default function RoundTable(props) {\n  const { url } = useRouteMatch()\n\n  return (\n    <TableContainer\n      component={Paper}\n      className={styles.table}\n    >\n      <Table>\n        <TableBody>\n          {props.themes.map((row, i) => (\n            <TableRow\n              key={i}\n              sx={{ '&:last-child td, &:last-child th': { borderBottom: 0 } }}\n            >\n              <TableCell component='th' scope='row' className={styles.rowName}>{row.name}</TableCell>\n              {\n                row.questions.length\n                  ? row.questions.map((question, j) =>\n                    <TableCell key={j} className={styles.tableCell}>\n                      <Link to={`${url}/themes/${i+1}/questions/${question.price}`}>\n                        <ButtonBase className={styles.buttonBase}>\n                          {question.price}\n                        </ButtonBase>\n                      </Link>\n                    </TableCell>)\n                  : <TableCell align='right' colspan='1000'>\n                    <Typography color='text.secondary' variant='caption'>Еще нет вопросов</Typography>\n                  </TableCell>\n              }\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport TableContainer from '@mui/material/TableContainer'\nimport Table from '@mui/material/Table'\nimport TableBody from '@mui/material/TableBody'\nimport TableHead from '@mui/material/TableHead'\nimport TableRow from '@mui/material/TableRow'\nimport TableCell from '@mui/material/TableCell'\nimport { MdImage, MdDone, MdMusicNote, MdVideocam, MdAdd } from 'react-icons/md'\nimport { useHistory, useRouteMatch } from 'react-router'\nimport { Link } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { connect } from 'react-redux'\nimport { mapPackState, questionTypes } from '../../../utils'\nimport Typography from '@mui/material/Typography'\n\n\nItemContent.propTypes = {\n  themeIndex: PropTypes.number,\n  theme: PropTypes.object,\n  pack: PropTypes.object\n}\n\nfunction ItemContent(props) {\n  const history = useHistory()\n  const route = useRouteMatch()\n\n  const sortedQuestions = props.theme.questions.sort((a,b) => a.price - b.price)\n\n  const questionType = type => questionTypes[type] || type\n\n  const questionURL = `${route.url}/themes/${props.themeIndex+1}/questions`\n  const handleOpenQuestion = price => () => history.push(`${questionURL}/${price}`)\n  const row = { sx: { '&:last-child td, &:last-child th': { border: 0 } } }\n  const cell1 = { component: 'th', scope: 'row' }\n\n  return (\n    <>\n      <TableContainer>\n        <Table sx={{ minWidth: 650 }}>\n          <TableHead>\n            <TableRow>\n              <TableCell>Цена</TableCell>\n              <Cell wp={10}>Текст</Cell>\n              <Cell wp={9}>Ответы</Cell>\n              <Cell wp={4}>Вид вопроса</Cell>\n              <Cell wp={1}><MdImage /></Cell>\n              <Cell wp={1}><MdMusicNote /></Cell>\n              <Cell wp={1}><MdVideocam /></Cell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {sortedQuestions.length\n              ? sortedQuestions.map((question, i) => (\n                <TableRow\n                  key={i}\n                  hover\n                  onClick={handleOpenQuestion(question.price)}\n                  className={styles.tableRow}\n                  {...row}\n                >\n                  <TableCell {...cell1}>{question.price}</TableCell>\n                  <Cell wp={10}>\n                    {question.scenario?.filter(({ type }) => type === 'text').map(({ data }) => data.text).join(', ')}\n                  </Cell>\n                  <Cell wp={10}>\n                    {question.correctAnswers?.map((answer, i, a) =>\n                      <span key={i}>{answer}{i !== a.length - 1 && ', '}</span>)}\n                    {question.incorrectAnswers?.length && ', '}\n                    {question.incorrectAnswers?.map((answer, i, a) => <>\n                      <span className={styles.strikethrough} key={i}>{answer}</span>\n                      {i !== a.length - 1 && ', '}\n                    </>)}\n                  </Cell>\n                  <Cell wp={3}>{questionType(question.type)}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'image') && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'audio') && <MdDone />}</Cell>\n                  <Cell wp={1}>{question.scenario?.some(({ type }) => type === 'movie') && <MdDone />}</Cell>\n                </TableRow>\n              ))\n              : <TableRow {...row}>\n                <TableCell {...cell1} colSpan={7}>\n                  <Typography color='text.secondary' variant='caption'>Еще нет вопросов</Typography>\n                </TableCell>\n              </TableRow>}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <Link to={`${questionURL}/add`}>\n        <Button\n          color='primary'\n          startIcon={<MdAdd />}\n        >Создать вопрос</Button>\n      </Link>\n    </>\n  )\n}\n\nCell.propTypes = { wp: PropTypes.number, children: PropTypes.node }\nfunction Cell(props) {\n  return (\n    <TableCell align='right' style={{ width: props.wp/26*100+'%' }}>{props.children}</TableCell>\n  )\n}\n\nexport default connect(mapPackState)(ItemContent)\n","import PropTypes from 'prop-types'\n\nconst ClickIsolator = props => (\n  <div onClick={e => e.stopPropagation()} {...props}>{props.children}</div>\n)\n\nClickIsolator.propTypes = { children: PropTypes.any }\nClickIsolator.displayName = 'ClickIsolator'\nexport default ClickIsolator\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport ItemContent from './Questions'\nimport Item from 'components/ItemsList/Item'\nimport { connect } from 'react-redux'\nimport { MdDelete, MdExpandMore } from 'react-icons/md'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport ClickIsolator from 'components/ClickIsolator'\nimport { mapPackState } from '../../../utils'\nimport Handle from 'components/ItemsList/Handle'\n\nTheme.propTypes = {\n  item: PropTypes.object,\n  pack: PropTypes.object,\n  index: PropTypes.number,\n  expandId: PropTypes.number,\n  setExpand: PropTypes.func,\n  draggableId: PropTypes.string,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.string,\n}\n\nfunction Theme(props) {\n  const theme = props.item\n  const expand = props.draggableId === props.expandId\n  const [themeName, setThemeName] = React.useState(theme.name)\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.handleRemoveTheme(props.index)\n  }\n\n  const handleChangeThemeName = e => {\n    const newThemeName = e.target.value\n    setThemeName(newThemeName)\n    props.handleChangeThemeName(props.index, newThemeName)\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={theme.id.toString()}\n    >\n      {(provided) => <Accordion\n        expanded={expand}\n        onChange={(_, isExpand) => props.setExpand(isExpand ? theme.id : undefined)}\n      >\n        <AccordionSummary\n          expandIcon={<MdExpandMore />}\n        >\n          <div className={styles.toolbar}>\n            <Handle provided={provided} />\n            <ClickIsolator className={styles.name}>\n              <TextField\n                value={themeName}\n                label='Название темы'\n                variant='outlined'\n                onChange={handleChangeThemeName}\n                size='small'\n                fullWidth\n              />\n            </ClickIsolator>\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <ItemContent theme={theme} themeIndex={props.index} />\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n\nexport default connect(mapPackState)(Theme)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport AddItem from 'components/ItemsList/AddItem'\nimport ItemsList from 'components/ItemsList'\nimport Theme from './Theme'\n\nThemesEditing.propTypes = {\n  onDragEnd: PropTypes.func,\n  themes: PropTypes.array,\n  expand: PropTypes.bool,\n  setExpand: PropTypes.func,\n  setEditing: PropTypes.func,\n  handleAddTheme: PropTypes.func,\n  handleRemoveTheme: PropTypes.func,\n  handleChangeThemeName: PropTypes.func\n}\nexport default function ThemesEditing(props) {\n  return (\n    <>\n      <ItemsList\n        droppableId='themes'\n        onDragEnd={props.onDragEnd}\n        list={props.themes}\n        draggableProps={{\n          setExpand: props.setExpand,\n          handleRemoveTheme: props.handleRemoveTheme,\n          handleChangeThemeName: props.handleChangeThemeName,\n          expandId: props.expand\n        }}\n        noItemsLabel='Еще нет созданных тем'\n        itemComponent={Theme}\n        useIdAsKey={true}\n      />\n      <AddItem\n        onAdd={props.handleAddTheme}\n        inputLabel='Название темы'\n        buttonLabel='Добавить тему'\n        className={styles.addTheme}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router'\nimport { uuidRegex } from '../../../consts'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport clone from 'just-clone'\nimport NotFound404 from 'components/NotFound404'\nimport RoundTable from './RoundTable'\nimport ThemesEditing from './ThemesEditing'\nimport EditingToolbar from 'components/EditingToolbar'\nimport { mapPackState } from '../../../utils'\n\nRoundThemes.propTypes = {\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction RoundThemes(props) {\n  const [themes, setThemes] = React.useState([])\n  const [found, setFound] = React.useState()\n  const route = useLocation()\n  const roundIndex = route.pathname.split(new RegExp(`/pack/${uuidRegex}/rounds/`), 2)[1]\n  const [expand, setExpand] = React.useState()\n  let [editing, setEditing] = React.useState(false)\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const round = props.pack.rounds[roundIndex-1]\n  React.useEffect(() => {\n    if(round) setFound(true)\n    else setFound(false)\n  }, [])\n\n  const handleAddTheme = async name => {\n    let roundThemes = [...themes]\n    roundThemes.push({ name, id: Date.now(), questions: [] })\n    updateThemes(roundThemes)\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(themes, result.source.index, result.destination.index)\n    updateThemes(items)\n  }\n\n  const updateThemes = async items => {\n    setThemes(items)\n    const newPack = clone(props.pack)\n    newPack.rounds[roundIndex-1].themes = items\n    await saveLocalPack(newPack)\n    props.dispatch({ type: 'pack/load', pack: newPack })\n  }\n\n  const handleRemoveTheme = index => {\n    let roundThemes = [...themes]\n    roundThemes.splice(index, 1)\n    updateThemes(roundThemes)\n  }\n\n  const handleChangeThemeName = (index, newName) => {\n    let roundThemes = [...themes]\n    roundThemes[index].name = newName\n    updateThemes(roundThemes)\n  }\n\n  React.useEffect(() => {\n    round && setThemes(round.themes)\n  }, [])\n\n  return (\n    found !== undefined && (\n      found\n        ? <div>\n          <EditingToolbar\n            showButton={Boolean(themes.length)}\n            onSwitch={() => setEditing(!editing)}\n            editing={editing}\n            heading={`Темы и вопросы раунда ${round.name}`}\n          />\n          {themes.length && !editing\n            ? <RoundTable\n              themes={themes}\n            />\n            : <ThemesEditing\n              themes={themes}\n              onDragEnd={onDragEnd}\n              expand={expand}\n              setExpand={setExpand}\n              setEditing={setEditing}\n              handleAddTheme={handleAddTheme}\n              handleRemoveTheme={handleRemoveTheme}\n              handleChangeThemeName={handleChangeThemeName}\n            />\n          }\n        </div>\n        : <NotFound404 />\n    )\n  )\n}\n\nexport default connect(mapPackState)(RoundThemes)\n","export const questionPriceHint = <p>\n  <b>Стоимость вопроса</b> — это число очков, обычно кратное 100, которое получает игрок\n  в случае правильного ответа и теряет в случае неправильного ответа (за исключением ответа на Вопрос без риска).\n  Это число отображается в таблице раунда.\n</p>\n\nexport const questionTypesHint = <>\n  <p>\n    <b>Обычный</b> — Этот вопрос задаётся, затем у всех игроков есть время, чтобы подумать и нажать на кнопку.\n    Нажавший раньше остальных отвечает. В случае верного ответа стоимость вопроса прибавляется к счёту\n    игрока, в случае неверного - стоимость вопроса снимается со счёта игрока. В случае неверного ответа\n    кнопку снова могут жать не отвечавшие игроки.\n  </p>\n  <p>\n    <b>Со ставкой (аукцион)</b> — При розыгрыше этого вопроса игроки последовательно, в порядке возрастания сумм (но начиная\n    с того, кому вопрос достался), делают ставки, перекрывая ставки оппонентов. Минимальная ставка равна\n    номинальной стоимости вопроса. Можно сказать «Пас» и выйти из торгов. Можно пойти «ва-банк» —\n    поставить всё на кон. Ва-банк перекрывает все простые ставки, но пойти ва-банк можно только\n    перекрывая по сумме предыдущую ставку. Тот, кто поставит больше остальных, будет единилично\n    играть этот вопрос без возможности отказаться. Стоимость вопроса равна стоимости ставки играющего.\n  </p>\n  <p>\n    <b>С секретом</b> — Тот, кому достался вопрос, обязан передать его другом игроку, и последний обязан\n    ответить на полученный вопрос. Вопрос имеет собственную тему и стоимость, неизвестную до отдачи.\n  </p>\n  <p>\n    <b>Кот в мешке</b> — На этот вопрос отвечает 1 человек. Отвечающего назначает открывший вопрос игрок.\n    У вопроса имеется собственная тема и стоимость.\n  </p>\n  <p>\n    <b>Без риска</b> — На этот вопрос отвечает только игрок, открывший его. В случае правильного ответа\n    он зарабатывает сумму, равную удвоенному номиналу вопроса. В случае неверного ответа он ничего не теряет.\n  </p>\n</>\n\nexport const realPriceHint = <p>\n    Раннее указанная стоимость отображается в таблице с темами, в то время как настоящая стоимость влияет на счет\n    игроков после ответа. Это поле действует лишь для вопросов с секретом и кот в мешке.\n</p>\n\nexport const realPriceStepperHint = <>\n  <p>\n    Раннее указанная стоимость отображается в таблице с темами, в то время как настоящая стоимость влияет на счет\n    игроков после ответа. Это поле действует лишь для вопросов с секретом и кот в мешке.\n  </p>\n  <p>\n    Если не указано поле шаг, выбирать можно только из минимума и максимума.\n  </p>\n</>\n\nexport const realThemeHint = 'Настоящая тема вопроса — это строка, ее узнает игрок вместе с настоящей стоимостью. \\\nВопрос должен быть именно на тему, указанную в этом поле.'\n\nexport const bagcatRealPriceTypeHint = <>\n  <p>\n    У вопроса Кот в мешке существует «настоящая стоимость», которая влияет на счет игроков после ответа, в отличии\n    от обычной стоимости, которая отображается в таблице раунда.\n  </p>\n  <p>\n    Настоящая стоимость для каждого вопроса может быть фиксированной или определяться в течение игры. Если вы выберете\n    <b>фиксированную настоящую стоимость</b>, вам необходимо будет указать ее ниже.\n  </p>\n  <p>\n    Во втором случае, настоящая стоимость выбирается игроком, на выбор которому дается два варианта: наименьшая и\n    наибольшая стоимость из всех вопросов в раунде.\n  </p>\n  <p>\n    Третий вариант это когда настоящая стоимость вопроса выбирается игроком в заданном вам интервале с заданным вами шагом.\n    Если шаг не указан, выбирать можно только крайние значения\n  </p>\n</>\n\nexport const scenarioHint = <>\n  <p>\n    У каждого вопроса есть <b>сценарий</b> — порядок действий, выполняемый при выборе вопроса.\n    Большинству вопросов достаточно одного события в сценарии — текста, изображения, аудио или видео,\n    тем не менее, вы можете добавить до 100 событий в один сценарий.\n  </p>\n  <p>\n    Ответ на вопрос это всегда строка, но вы можете добавить к ней сценарий. Например, если вы хотите после ответа игрока\n    показать картинку или проиграть звук/видео, добавьте маркер &quot;<i>[Игроки отвечают]</i>&quot;, после которого\n    вы сможете добавить сценарий, исполняющийся после ответа. Этот маркер добавлять необязательно, без него игроки также\n    смогут ответить на вопрос и узнают правильный ответ.\n  </p>\n</>\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { GrCircleQuestion } from 'react-icons/gr'\nimport Tooltip from '@mui/material/Tooltip'\nimport IconButton from '@mui/material/IconButton'\n\nWithHint.propTypes = { hint: PropTypes.node, children: PropTypes.node }\nexport default function WithHint(props) {\n  return (\n    <div className={styles.hint}>\n      {props.children}\n      <Tooltip title={props.hint}>\n        <IconButton>\n          <GrCircleQuestion />\n        </IconButton>\n      </Tooltip>\n    </div>\n  )\n}\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport {\n  FormikTextField,\n  FormikSelect,\n  FormikCheckbox,\n  FormikAutocomplete\n} from 'components/FormikField'\nimport { questionTypes } from '../../../../utils'\nimport { questionPriceHint, questionTypesHint, realPriceHint, realPriceStepperHint, realThemeHint, bagcatRealPriceTypeHint } from './hints'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\n\nFormFields.propTypes = {\n  formik: PropTypes.object,\n  submitting: PropTypes.bool\n}\nexport default function FormFields({ formik, submitting }) {\n  const fieldProps = {\n    formik, disabled: submitting\n  }\n\n  const numberFieldProps = {\n    ...fieldProps,\n    type: 'number',\n    InputProps: { inputProps: { min: 0, max: 4294967295 } }\n  }\n\n  return (\n    <>\n      <Typography variant='h6'>Информация о вопросе</Typography>\n      <WithHint hint={questionPriceHint}>\n        <FormikTextField name='price' label='Стоимость' {...numberFieldProps} />\n      </WithHint>\n      <WithHint hint={questionTypesHint}>\n        <FormikSelect name='type' label='Тип вопроса' options={questionTypes} {...fieldProps} />\n      </WithHint>\n      {formik.values.type === 'cat' && <>\n        <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='Настоящая стоимость вопроса' {...numberFieldProps} />\n        </WithHint>\n        <WithHint hint={realThemeHint}>\n          <FormikTextField name='realtheme' label='Настоящая тема вопроса' {...fieldProps} />\n        </WithHint>\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <WithHint hint={realThemeHint}>\n          <FormikTextField name='realtheme' label='Настоящая тема вопроса' {...fieldProps} />\n        </WithHint>\n        <WithHint hint={bagcatRealPriceTypeHint}>\n          <FormikSelect\n            name='questionPriceType'\n            label='Как определяется стоимость вопроса'\n            options={{\n              'fixed': 'Фиксирована вами',\n              'minMax': 'Выбором игрока из минимума и максимума стоимостей вопросов в раунде',\n              'byPlayer': 'Игроком в фиксированном вами интервале и шагом'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n        {formik.values.questionPriceType === 'fixed' && <WithHint hint={realPriceHint}>\n          <FormikTextField name='realprice' label='Настоящая стоимость вопроса' {...numberFieldProps} />\n        </WithHint>}\n        {formik.values.questionPriceType === 'byPlayer' && <WithHint hint={realPriceStepperHint}>\n          <div className={styles.grouped}>\n            <FormikTextField name='realpriceFrom' label='От' {...numberFieldProps} />\n            <FormikTextField name='realpriceTo' label='До' {...numberFieldProps} />\n            <FormikTextField name='realpriceStep' label='Шаг' {...numberFieldProps} />\n          </div>\n        </WithHint>}\n      </>}\n      {formik.values.type === 'bagcat' && <>\n        <FormikCheckbox name='transferToSelf' label='Можно отдать вопрос себе' {...fieldProps} />\n        <WithHint hint={<p>Если выбран вариант <b>Никогда</b>, то вопрос не задаётся, игроку просто перечисляется его стоимость</p>}>\n          <FormikSelect\n            name='detailsDisclosure'\n            label='Когда узнается стоимость и тема'\n            options={{\n              'before': 'До передачи вопроса',\n              'after': 'После передачи вопроса',\n              'never': 'Никогда'\n            }}\n            {...fieldProps}\n          />\n        </WithHint>\n      </>}\n      <Typography variant='h6'>Ответы</Typography>\n      <FormikAutocomplete\n        name='correctAnswers'\n        formik={formik}\n        label='Правильные ответы'\n        disabled={submitting}\n      />\n      <FormikAutocomplete\n        name='incorrectAnswers'\n        formik={formik}\n        label='Неправильные ответы (необязательно)'\n        disabled={submitting}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport { MdDelete, MdExpandMore, MdImage, MdMusicNote, MdVideocam, MdShortText, MdRecordVoiceOver } from 'react-icons/md'\nimport Item from 'components/ItemsList/Item'\nimport Handle from 'components/ItemsList/Handle'\nimport Typography from '@mui/material/Typography'\nimport IconButton from '@mui/material/IconButton'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport TextField from '@mui/material/TextField'\nimport Slider from '@mui/material/Slider'\nimport Decimal from 'decimal.js'\nimport ImageField from 'components/ImageField'\nimport Fade from '@mui/material/Fade'\n\nScenarioEvent.propTypes = {\n  index: PropTypes.number,\n  item: PropTypes.object,\n  onDelete: PropTypes.func,\n  onChangeDuration: PropTypes.func,\n  onChangeData: PropTypes.func,\n  draggableId: PropTypes.number,\n  formik: PropTypes.object,\n  scenario: PropTypes.object\n}\n\nexport default function ScenarioEvent(props) {\n  const [duration, setDuration] = React.useState()\n  const [eventData, setEventData] = React.useState()\n  const [expand, setExpand] = React.useState(false)\n  const formatTime = time => `${time.toFixed(1)} cек.`\n\n  const handleDelete = e => {\n    e.stopPropagation()\n    props.onDelete(props.index)\n  }\n\n  React.useEffect(() => {\n    if(props.index !== undefined && duration !== undefined)\n      props.onChangeDuration(props.index, duration)\n  }, [duration])\n\n  React.useEffect(() => {\n    const scenarioEvent = props.scenario[props.index]\n    const data = scenarioEvent.data\n    const eventDuration = scenarioEvent.duration\n    !eventData && setEventData(data)\n    !duration && setDuration(eventDuration)\n  }, [props.scenario])\n\n  React.useEffect(() => eventData && requestAnimationFrame(() => props.onChangeData(props.index, eventData)), [eventData])\n\n  // 0.1 - 1.0 with step 0.1\n  // 1.0 - 10.0 with step 0.5\n  // 10.0 - 180.0 with step 1\n  const step0_1 = new Array(1/0.1).fill().map((_, i) => new Decimal(0.1).times(i+1).toNumber())\n  const step0_5 = new Array((10-1)/0.5).fill().map((_, i) => 1+(i+1)*0.5)\n  const step1 = new Array((30-10)/1).fill().map((_, i) => 10+1+i)\n  const step5 = new Array((60-30)/5).fill().map((_, i) => 30+(i+1)*5)\n  const durationMarks = [...step0_1, ...step0_5, ...step1, ...step5].map((value, i) => ({ _label: value, value: i }))\n\n  const closestToMarks = (duration, marks) => {\n    marks = marks.map(({ _label }) => _label)\n    for(let i = 0; i < marks.length; i++) {\n      if(marks[i] <= duration && marks[i+1] > duration) {\n        return i\n      }\n    }\n    return duration\n  }\n\n  return (\n    <Item\n      index={props.index}\n      draggableId={props.draggableId.toString()}\n    >\n      {(provided) => <Accordion expanded={expand} onChange={(_, expanded) => setExpand(expanded)}>\n        <AccordionSummary expandIcon={<MdExpandMore />}>\n          <div className={styles.item}>\n            <Handle provided={provided} />\n            <Typography variant='body1' className={styles.itemType}>\n              {{\n                image: 'Изображение',\n                voice: 'Аудио',\n                video: 'Видео',\n                text: 'Текст',\n                say: 'Слово ведущего',\n                marker: <i>[Игроки отвечают]</i>\n              }[props.item.type] ?? `Событие «${props.item.type}»`}\n              <span className={styles.spacing} />\n              {{\n                'image': <MdImage />,\n                'voice': <MdMusicNote />,\n                'video': <MdVideocam />,\n                'text': <MdShortText />,\n                'say': <MdRecordVoiceOver />\n              }[props.item.type]}\n            </Typography>\n            {props.item.type !== 'marker' && (\n              <Fade in={!expand}>\n                <Typography variant='body2' color='text.secondary'>\n                  {formatTime(props.item.duration)}\n                </Typography>\n              </Fade>\n            )}\n            <IconButton\n              onClick={handleDelete}\n              className={styles.delete}\n            >\n              <MdDelete className={styles.delete} />\n            </IconButton>\n          </div>\n        </AccordionSummary>\n        <AccordionDetails>\n          <div className={styles.details}>\n            {props.item.type !== 'marker' && (\n              <div className={styles.duration}>\n                <Slider\n                  defaultValue={durationMarks.find(({ _label }) => _label === 3).value}\n                  step={null}\n                  marks={durationMarks}\n                  min={durationMarks[0].value}\n                  max={durationMarks[durationMarks.length - 1].value}\n                  valueLabelDisplay='off'\n                  valueLabelFormat={i => durationMarks[i]._label}\n                  value={duration !== undefined && closestToMarks(duration, durationMarks)}\n                  onChange={e => requestAnimationFrame(() => setDuration(durationMarks[e.target.value]._label))}\n                />\n                <TextField\n                  label='Время'\n                  variant='outlined'\n                  size='small'\n                  type='number'\n                  InputProps={{ inputProps: { min: 0.1, step: 0.1 } }}\n                  className={styles.time}\n                  value={duration}\n                  onChange={e => setDuration(Number(e.target.value))}\n                />\n              </div>\n            )}\n            {{\n              'text': <TextField\n                value={eventData?.text}\n                onChange={e => setEventData({ text: e.target.value })}\n                label='Введите текст'\n                multiline\n                rows={4}\n                fullWidth\n              />,\n              'image': <ImageField\n                value={eventData?.imageField}\n                onChange={newValue => setEventData({ imageField: newValue })}\n                label='Изображение'\n              />,\n              'marker': <Typography variant='caption'>\n                Все события, идущие после этого, будут проигрываться после ответа игрока.\n              </Typography>\n            }[props.item.type]}\n          </div>\n        </AccordionDetails>\n      </Accordion>}\n    </Item>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport Typography from '@mui/material/Typography'\nimport ItemsList from 'components/ItemsList'\nimport MenuItem from '@mui/material/MenuItem'\nimport FormControl from '@mui/material/FormControl'\nimport InputLabel from '@mui/material/InputLabel'\nimport Select from '@mui/material/Select'\nimport IconButton from '@mui/material/IconButton'\nimport ScenarioEvent from './ScenarioEvent'\nimport { MdAdd } from 'react-icons/md'\nimport { scenarioHint } from './hints'\nimport WithHint from './WithHint'\nimport { connect } from 'react-redux'\nimport { useParams } from 'react-router'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { mapPackState } from 'utils.js'\n\nScenario.propTypes = { formik: PropTypes.object, pack: PropTypes.object, dispatch: PropTypes.func }\nfunction Scenario({ formik, ...props }) {\n  const [scenario, setScenario] = React.useState([])\n  const [newEventValue, setNewEventValue] = React.useState('')\n  const [scenarioUpdateTimeout, setScenarioUpdateTimeout] = React.useState()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const question = questions[questions.findIndex(({ price }) => price === Number(questionPrice))]\n  React.useEffect(() => question.scenario && setScenario(question.scenario), [])\n\n  React.useEffect(() => {\n    clearTimeout(scenarioUpdateTimeout)\n    const scenarioUpdateQueue = setTimeout(() => updateQuestionScenario(scenario), 1000)\n    setScenarioUpdateTimeout(scenarioUpdateQueue)\n  }, [scenario])\n\n  const updateQuestionScenario = async scenario => {\n    const pack = { ...props.pack }\n    const round = params.roundIndex-1\n    const questions = pack.rounds[round].themes[params.themeIndex-1].questions\n    const question = questions[questions.findIndex(({ price }) => price === Number(questionPrice))]\n    question.scenario = scenario\n    await saveLocalPack(pack)\n    props.dispatch({ type: 'pack/load', pack })\n  }\n\n  const reorder = (list, startIndex, endIndex) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  const onDragEnd = result => {\n    if (!result.destination) return\n    const items = reorder(scenario, result.source.index, result.destination.index)\n    setScenario(items)\n  }\n\n  const handleAddEvent = () => {\n    setNewEventValue('')\n    setScenario([...scenario, { type: newEventValue, duration: 3, data: {} }])\n  }\n\n  const handleDelete = index => {\n    const newScenario = [...scenario]\n    newScenario.splice(index, 1)\n    setScenario(newScenario)\n  }\n\n  const handleChangeDuration = (index, value) => {\n    const newScenario = [...scenario]\n    newScenario[index].duration = value\n    setScenario(newScenario)\n  }\n\n  const handleChangeData = (index, data) => {\n    const newScenario = [...scenario]\n    newScenario[index].data = data\n    setScenario(newScenario)\n  }\n\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'>Сценарий</Typography>\n      </WithHint>\n      <ItemsList\n        droppableId='scenario'\n        onDragEnd={onDragEnd}\n        list={scenario}\n        draggableProps={{\n          onDelete: handleDelete, formik,\n          onChangeDuration: handleChangeDuration,\n          onChangeData: handleChangeData,\n          scenario\n        }}\n        noItemsLabel='Сценарий пуст'\n        itemComponent={ScenarioEvent}\n      />\n      {scenario.length < 100 &&\n        <div className={styles.addEvent}>\n          <FormControl fullWidth>\n            <InputLabel>Добавить событие</InputLabel>\n            <Select\n              name={name}\n              value={newEventValue}\n              onChange={e => setNewEventValue(e.target.value)}\n              label='Добавить событие'\n              displayEmpty={true}\n            >\n              <MenuItem value='text'>Текст на экране</MenuItem>\n              <MenuItem value='say'>Слово ведущего</MenuItem>\n              <MenuItem value='image'>Изображение</MenuItem>\n              <MenuItem value='voice'>Аудио</MenuItem>\n              <MenuItem value='video'>Видео</MenuItem>\n              <MenuItem value='marker'><i>[Игроки отвечают]</i></MenuItem>\n            </Select>\n          </FormControl>\n          <IconButton onClick={handleAddEvent} disabled={!newEventValue}>\n            <MdAdd />\n          </IconButton>\n        </div>}\n      <Typography variant='body2' color='text.secondary'>\n        Все изменения в сценарии сохраняются автоматически\n      </Typography>\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(Scenario)\n","import styles from './styles.module.scss'\nimport WithHint from './WithHint'\nimport Typography from '@mui/material/Typography'\nimport { scenarioHint } from './hints'\n\nexport default function NoScenario() {\n  return (\n    <div className={styles.scenario}>\n      <WithHint hint={scenarioHint}>\n        <Typography variant='h6'>Сценарий</Typography>\n      </WithHint>\n      <Typography variant='body2' color='text.secondary'>\n        Вы сможете редактировать сценарий после того, как добавите вопрос\n      </Typography>\n    </div>\n  )\n}\n","export const validate = (values, props, params) => {\n  const questions = [...props.pack.rounds[params.roundIndex-1].themes[params.themeIndex-1].questions]\n\n  const errors = {}\n  if(values.price !== props.data?.price && questions.some(({ price }) => price === values.price)) {\n    errors.price = 'Вопрос с такой стоимостью уже существует в этой теме'\n  }\n\n  const checkRealPrice = () => {\n    checkNumber('realprice', 'Выберете настоящую стоимость вопроса', 'Настоящая стоимость вопроса должна быть больше 0')\n  }\n\n  const checkNumber = (propertyName, noValueError = 'Выберете значение', zeroError = 'Значение должно быть больше 0') => {\n    if(values[propertyName] === undefined || values[propertyName] === '') {\n      errors[propertyName] = noValueError\n    } else if (values[propertyName] === 0) {\n      errors[propertyName] = zeroError\n    }\n  }\n\n  switch(values.type) {\n    case 'cat':\n      checkRealPrice()\n      break\n\n    case 'bagcat':\n      if(!values.questionPriceType) {\n        errors.questionPriceType = 'Выберете способ определения стоимость вопроса'\n      } else {\n        switch(values.questionPriceType) {\n          case 'fixed':\n            checkRealPrice()\n            break\n\n          case 'byPlayer':\n            ['realpriceFrom', 'realpriceTo'].forEach(checkNumber)\n            if(values.realpriceStep === 0) errors.realpriceStep = 'Шаг не может быть равен 0'\n            break\n        }\n      }\n      if(!values.detailsDisclosure) errors.detailsDisclosure = 'Выберете момент, когда узнается стоимость вопроса'\n      break\n  }\n\n  return errors\n}\n","import PropTypes from 'prop-types'\nimport * as yup from 'yup'\nimport styles from './styles.module.scss'\nimport { useFormik } from 'formik'\nimport { useParams, useHistory, Prompt } from 'react-router-dom'\nimport Button from '@mui/material/Button'\nimport { useBeforeunload } from 'react-beforeunload'\nimport FormFields from './FormFields'\nimport Scenario from './Scenario'\nimport NoScenario from './NoScenario'\nimport { mapPackState, initValues } from '../../../../utils'\nimport { connect } from 'react-redux'\nimport { saveLocalPack } from 'localStorage/localPacks'\nimport { validate } from './validation'\n\nconst priceSchema = yup\n  .number()\n  .integer()\n  .min(1, 'Стоимость вопроса должна быть больше 0')\n  .max(4294967295) // max of uint32\n\nconst validationSchema = yup.object({\n  price: priceSchema.required('Выберете стоимость вопроса'),\n  realprice: priceSchema,\n  realtheme: yup.string(),\n  type: yup\n    .string()\n    .required('Выберете тип вопроса'),\n  transferToSelf: yup.bool(),\n  detailsDisclosure: yup.string(),\n  realpriceFrom: yup.number(),\n  realpriceTo: yup.number(),\n  realpriceStep: yup.number(),\n  correctAnswers: yup\n    .array()\n    .ensure()\n    .min(1, 'Добавьте как минимум один правильный ответ')\n    .required('Добавьте как минимум один правильный ответ'),\n  incorrectAnswers: yup.array().ensure()\n})\n\nQuestionContent.propTypes = {\n  data: PropTypes.object,\n  pack: PropTypes.object,\n  dispatch: PropTypes.func\n}\n\nfunction QuestionContent(props) {\n  const history = useHistory()\n  const params = useParams()\n  const round = params.roundIndex\n  const questionPrice = params.questionPrice\n  const questions = props.pack.rounds[round-1].themes[params.themeIndex-1].questions\n  const newQuestion = questionPrice === 'add'\n\n  const getNextPrice = questions => {\n    const findRegularity = () => {\n      let delta\n      for(let i = 1; i < questions.length; i++) {\n        let newDelta = questions[i].price - questions[i-1].price\n        if(delta !== undefined && delta !== newDelta) return undefined\n        else delta = newDelta\n      }\n      return questions[questions.length - 1].price+delta\n    }\n\n    const add100 = () => {\n      return questions[questions.length - 1].price+100\n    }\n\n    return questions.length === 0 ? 100 : findRegularity() || add100()\n  }\n  const initialValues = initValues(validationSchema,\n    newQuestion ? { ...props.data, price: getNextPrice(questions) } : props.data\n  )\n  const formik = useFormik({\n    initialValues,\n    validate: values => validate(values, props, params), validationSchema,\n    validateOnChange: false,\n    validateOnBlur: false,\n    onSubmit: async (values) => {\n      const pack = { ...props.pack }\n      const theme = params.themeIndex\n      const question = newQuestion ? { ...values } : { ...props.data, ...values }\n      let questions = pack.rounds[round-1].themes[theme-1].questions\n      if(newQuestion) {\n        questions.push(question)\n      } else {\n        questions[questions.findIndex(({ price }) => price === Number(questionPrice))] = question\n      }\n      questions = questions.sort((a, b) => a.price - b.price)\n      await saveLocalPack(pack)\n      props.dispatch({ type: 'pack/load', pack })\n      formik.resetForm()\n      history.push(`/pack/${pack.uuid}/rounds/${round}/themes/${theme}/questions/${question.price}`)\n    },\n  })\n\n  const submitting = formik.isSubmitting\n\n  useBeforeunload((event) => {\n    if(Object.keys(formik.touched).length) event.preventDefault()\n  })\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={formik.handleSubmit} className={styles.form}>\n        <FormFields formik={formik} submitting={submitting} />\n        <Button\n          color='primary'\n          variant='contained'\n          type='submit'\n          disabled={(!newQuestion && !Object.keys(formik.touched).length) || submitting}\n          className={styles.submit}\n        >\n          {newQuestion ? 'Добавить вопрос' : 'Сохранить'}\n        </Button>\n      </form>\n      {newQuestion\n        ? <NoScenario />\n        : <Scenario formik={formik} submitting={formik.isValidating || submitting} />\n      }\n      <Prompt\n        when={Object.keys(formik.touched).length && !submitting}\n        message='Вы хотите покинуть страницу, не сохраняя изменений?'\n      />\n    </div>\n  )\n}\n\nexport default connect(mapPackState)(QuestionContent)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useParams } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { mapPackState } from '../../../utils'\nimport NotFound404 from 'components/NotFound404'\nimport QuestionContent from './QuestionContent'\n\nQuestion.propTypes = {\n  pack: PropTypes.object,\n}\nfunction Question(props) {\n  const [notFound, setNotFound] = React.useState()\n  const [question, setQuestion] = React.useState()\n  const params = useParams()\n\n  React.useEffect(() => {\n    const pack = props.pack\n    if(!pack) return setNotFound(true)\n    const round = pack.rounds[params.roundIndex-1]\n    if(!round) return setNotFound(true)\n    const theme = round.themes[params.themeIndex-1]\n    if(!theme) return setNotFound(true)\n    if(params.questionPrice !== 'add') {\n      const question = theme.questions.find(({ price }) => price === Number(params.questionPrice))\n      if(!question) return setNotFound(true)\n      setQuestion(question)\n    }\n    setNotFound(false)\n  }, [params])\n\n  return (\n    notFound !== undefined && (\n      notFound\n        ? <NotFound404 />\n        : <QuestionContent data={question} />)\n  )\n}\n\nexport default connect(mapPackState)(Question)\n","import PropTypes from 'prop-types'\nimport styles from './styles.module.scss'\nimport PackBreadcrumbs from './PackBreadcrumbs/'\nimport { connect } from 'react-redux'\nimport { componentsPropTypes } from '../../consts'\nimport PackToolbar from './PackToolbar/'\nimport Rounds from './Rounds'\nimport Settings from './Settings/'\nimport { Switch, Route, useRouteMatch } from 'react-router-dom'\nimport RoundThemes from './RoundThemes'\nimport NotFound404 from 'components/NotFound404'\nimport Question from './Question'\nimport { mapPackState } from '../../utils'\n\nPackPageContainer.propTypes = {\n  children: PropTypes.node,\n  pack: componentsPropTypes.pack,\n  toolbar: PropTypes.string\n}\n\nfunction PackPageContainer(props) {\n  const { path } = useRouteMatch()\n\n  return (\n    props.pack\n    && (props.pack === 'notFound'\n      ? <NotFound404 />\n      : <div className={styles.container}>\n        <div className={styles.toolbar}>\n          <PackBreadcrumbs />\n          <PackToolbar />\n        </div>\n        <Switch>\n          <Route exact path={path}>\n            <Rounds />\n          </Route>\n          <Route path={`${path}/settings`}>\n            <Settings />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex/themes/:themeIndex/questions/:questionPrice`}>\n            <Question />\n          </Route>\n          <Route path={`${path}/rounds/:roundIndex`}>\n            <RoundThemes />\n          </Route>\n          <Route path='*'><NotFound404 /></Route>\n        </Switch>\n      </div>)\n  )\n}\n\nexport default connect(mapPackState)(PackPageContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useLocation } from 'react-router-dom'\nimport styles from './styles.module.scss'\nimport { connect } from 'react-redux'\nimport { loadLocalPack } from '../../localStorage/localPacks'\n\nContainer.propTypes = {\n  children: PropTypes.node,\n  dispatch: PropTypes.func\n}\nfunction Container(props) {\n  const route = useLocation()\n\n  React.useEffect(() => {\n    routeChanged(route.pathname.split('/').filter(String))\n  }, [route])\n\n  const routeChanged = async pathParts => {\n    if(pathParts[0] === 'pack') {\n      const packUUID = pathParts[1]\n      const pack = await loadLocalPack(packUUID)\n      props.dispatch({ type: 'pack/load', pack: pack ?? 'notFound' })\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default connect(null)(Container)\n","import React from 'react'\nimport {\n  BrowserRouter,\n  Switch,\n  Route\n} from 'react-router-dom'\nimport Dashboard from './routes/Dashboard'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport Navigation from './components/Navigation/index.js'\nimport NewPack from './routes/NewPack'\nimport Pack from './routes/Pack'\nimport sipackerStore from './reducers'\nimport { Provider } from 'react-redux'\nimport Container from './components/Container'\nimport 'dayjs/locale/ru'\nimport { history } from './utils'\nimport NotFound404 from 'components/NotFound404'\nimport ContextMenuProvider from 'components/ContextMenu'\n\nexport const darkTheme = createTheme({\n  palette: {\n    mode: 'dark',\n    primary: {\n      main: '#4248fb'\n    }\n  },\n})\n\nexport default function App() {\n  return (\n    <Provider store={sipackerStore}>\n      <ThemeProvider theme={darkTheme}>\n        <BrowserRouter history={history} basename={process.env.REACT_APP_PREFIX}>\n          <ContextMenuProvider>\n            <Container>\n              <Navigation />\n              <Switch>\n                <Route exact path='/'>\n                  <Dashboard />\n                </Route>\n                <Route path='/create'>\n                  <NewPack />\n                </Route>\n                <Route path={['/pack/:packUUID', '/pack/:packUUID/*']}>\n                  <Pack />\n                </Route>\n                <Route path='*'><NotFound404 /></Route>\n              </Switch>\n            </Container>\n          </ContextMenuProvider>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n","const debugSwRegistration = false\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\nexport function register(config) {\n  debugSwRegistration && console.log('sw-debug', 'registering', config)\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    debugSwRegistration && console.log('sw-debug', 'can register')\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      debugSwRegistration && console.log('sw-debug', publicUrl.origin, 'is not', window.location.origin)\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      debugSwRegistration && console.log('sw-debug', 'load event')\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n      debugSwRegistration && console.log('sw-debug', 'url is', swUrl)\n\n      if (isLocalhost) {\n        debugSwRegistration && console.log('sw-debug', 'is localhost')\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          debugSwRegistration && console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          )\n        })\n      } else {\n        debugSwRegistration && console.log('sw-debug', 'registering regular service worker')\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      debugSwRegistration && console.log('sw-debug', 'registration done')\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          debugSwRegistration && console.log('sw-debug', 'installing worker is null')\n          return\n        }\n        installingWorker.onstatechange = () => {\n          debugSwRegistration && console.log('sw-debug', 'state changed')\n          if (installingWorker.state === 'installed') {\n            debugSwRegistration && console.log('sw-debug', 'installed worker')\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              debugSwRegistration && console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              debugSwRegistration && console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  debugSwRegistration && console.log('sw-debug', 'checking if sw is valid', swUrl, config)\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      debugSwRegistration && console.log('sw-debug', 'response to validating sw is', response.status)\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        debugSwRegistration && console.log('sw-debug', 'sw not found')\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        debugSwRegistration && console.log('sw-debug', 'sw is valid, proceed to install it')\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      debugSwRegistration && console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  debugSwRegistration && console.log('sw-debug', 'unregistering')\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport * as serviceWorker from './serviceWorkerRegistration'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\nserviceWorker.register()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"styles_toolbar__1W5Un\",\"name\":\"styles_name__2RB5S\",\"delete\":\"styles_delete__2ihaf\",\"addTheme\":\"styles_addTheme__1hwa9\",\"table\":\"styles_table__3es8F\",\"rowName\":\"styles_rowName__1K8zb\",\"tableCell\":\"styles_tableCell__1cve7\",\"buttonBase\":\"styles_buttonBase__2kQLq\",\"heading\":\"styles_heading__1IQEt\",\"noItemsYet\":\"styles_noItemsYet__BxKD2\",\"tableRow\":\"styles_tableRow__2jH6j\",\"strikethrough\":\"styles_strikethrough__DFxi_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rounds\":\"styles_rounds__1ZZ2U\",\"heading\":\"styles_heading__-ydFv\",\"cardOfRound\":\"styles_cardOfRound__2AkoD\",\"item\":\"styles_item__3E1HY\",\"delete\":\"styles_delete__24Jnc\",\"link\":\"styles_link__B9CM5\",\"flex1\":\"styles_flex1__3-SY4\",\"inputField\":\"styles_inputField__38y2T\",\"droppable\":\"styles_droppable__25geG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__OqZ1N\",\"label\":\"styles_label__VxlIK\",\"preview\":\"styles_preview__2qqOY\",\"image\":\"styles_image__29S6D\",\"placeholder\":\"styles_placeholder__1vE4B\",\"loading\":\"styles_loading__1wm-5\",\"fileMissing\":\"styles_fileMissing__3t61m\",\"icon\":\"styles_icon__345-2\",\"info\":\"styles_info__1nl83\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addItem\":\"styles_addItem__3dCij\",\"addButton\":\"styles_addButton__3g9mJ\",\"button\":\"styles_button__3ZegY\",\"expand\":\"styles_expand__2-jSs\",\"addButtonOuter\":\"styles_addButtonOuter__1y9QO\"};"],"sourceRoot":""}